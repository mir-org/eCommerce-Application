!function(){"use strict";var e={183:function(e,t,n){n.r(t)},430:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.TOKEN_STORAGE_KEY=t.CTP_SCOPES=t.CTP_API_URL=t.CTP_AUTH_URL=t.CTP_CLIENT_ID=t.CTP_CLIENT_SECRET=t.CTP_PROJECT_KEY=void 0;t.CTP_PROJECT_KEY="beat-amazon";t.CTP_CLIENT_SECRET="Q-Re7QPpJHlYELukt_igPBIHx6mOx13q";t.CTP_CLIENT_ID="X5YO3W0sZrwcRNYQexE8np0q";t.CTP_AUTH_URL="https://auth.europe-west1.gcp.commercetools.com";t.CTP_API_URL="https://api.europe-west1.gcp.commercetools.com";t.CTP_SCOPES="manage_my_quote_requests:beat-amazon manage_my_orders:beat-amazon view_products:beat-amazon manage_my_quotes:beat-amazon view_categories:beat-amazon manage_my_shopping_lists:beat-amazon view_published_products:beat-amazon manage_my_business_units:beat-amazon manage_my_payments:beat-amazon create_anonymous_token:beat-amazon manage_my_profile:beat-amazon";t.TOKEN_STORAGE_KEY="access-token"},770:function(e,t,n){var s=this&&this.__awaiter||function(e,t,n,s){return new(n||(n=Promise))((function(i,r){function a(e){try{d(s.next(e))}catch(e){r(e)}}function o(e){try{d(s.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}d((s=s.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.AuthAPI=t.AuthStatusCodes=void 0;const i=n(430);var r;!function(e){e[e.successfulPasswordTokenFetch=200]="successfulPasswordTokenFetch"}(r||(t.AuthStatusCodes=r={}));t.AuthAPI=class{static setAccessToken(){return s(this,void 0,void 0,(function*(){localStorage.getItem(i.TOKEN_STORAGE_KEY)||(yield this.fetchAnonymousToken())}))}static fetchAnonymousToken(){return s(this,void 0,void 0,(function*(){const e=`${i.CTP_AUTH_URL}/oauth/${i.CTP_PROJECT_KEY}/anonymous/token?grant_type=client_credentials`,t=yield fetch(e,{method:"POST",headers:{Authorization:`Basic ${btoa(`${i.CTP_CLIENT_ID}:${i.CTP_CLIENT_SECRET}`)}`}}),n=(yield t.json()).access_token;localStorage.setItem(i.TOKEN_STORAGE_KEY,n)}))}static fetchPasswordToken(e,t){return s(this,void 0,void 0,(function*(){const n=`${i.CTP_AUTH_URL}/oauth/${i.CTP_PROJECT_KEY}/customers/token?grant_type=password&username=${e}&password=${t}`,s=yield fetch(n,{method:"POST",headers:{Authorization:`Basic ${btoa(`${i.CTP_CLIENT_ID}:${i.CTP_CLIENT_SECRET}`)}`}});if(s.status!==r.successfulPasswordTokenFetch)return s.status;const a=(yield s.json()).access_token;return localStorage.setItem(i.TOKEN_STORAGE_KEY,a),s.status}))}static fetchRefreshToken(e){return s(this,void 0,void 0,(function*(){const t=`${i.CTP_AUTH_URL}/oauth/token?grant_type=refresh_token&refresh_token=${e}`,n=yield fetch(t,{method:"POST",headers:{Authorization:`Basic ${btoa(`${i.CTP_CLIENT_ID}:${i.CTP_CLIENT_SECRET}`)}`}}),s=(yield n.json()).access_token;localStorage.setItem(i.TOKEN_STORAGE_KEY,s)}))}}},437:function(e,t){var n;Object.defineProperty(t,"__esModule",{value:!0}),t.StatusCodes=void 0,function(e){e[e.successfulLogin=200]="successfulLogin",e[e.successfulRegistration=201]="successfulRegistration"}(n||(t.StatusCodes=n={}))},155:function(e,t,n){var s=this&&this.__awaiter||function(e,t,n,s){return new(n||(n=Promise))((function(i,r){function a(e){try{d(s.next(e))}catch(e){r(e)}}function o(e){try{d(s.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}d((s=s.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.CustomerAPI=void 0;const i=n(430),r=n(770),a=n(437),o=n(387);class d{static loginCustomer(e,t){return s(this,void 0,void 0,(function*(){const n=`${i.CTP_API_URL}/${i.CTP_PROJECT_KEY}/me/login`,s=yield r.AuthAPI.fetchPasswordToken(e,t);if(s!==r.AuthStatusCodes.successfulPasswordTokenFetch)return s;return(yield fetch(n,{method:"POST",headers:this.headers,body:JSON.stringify({email:e,password:t})})).status}))}static registerCustomer(e){return s(this,void 0,void 0,(function*(){const t=`${i.CTP_API_URL}/${i.CTP_PROJECT_KEY}/me/signup`,n=yield fetch(t,{method:"POST",headers:this.headers,body:JSON.stringify({email:e.email,password:e.password,firstName:e.firstName,lastName:e.lastName,dateOfBirth:e.dateOfBirth,addresses:e.addresses,defaultShippingAddress:e.defaultShippingAddress,shippingAddresses:e.shippingAddresses,defaultBillingAddress:e.defaultBillingAddress,billingAddresses:e.billingAddresses})});return n.status!==a.StatusCodes.successfulRegistration||(yield r.AuthAPI.fetchPasswordToken(e.email,e.password),yield this.loginCustomer(e.email,e.password)),n.status}))}static getCustomerInfo(){return s(this,void 0,void 0,(function*(){const e=`${i.CTP_API_URL}/${i.CTP_PROJECT_KEY}/me`,t=yield fetch(e,{method:"GET",headers:this.headers});return yield t.json()}))}static updateCustomerFirstName(e){return s(this,void 0,void 0,(function*(){try{const t=`${i.CTP_API_URL}/${i.CTP_PROJECT_KEY}/me/`,n=yield fetch(t,{method:"GET",headers:this.headers});if(400===n.status){const e=yield n.json();(0,o.createPopupWithText)(`Error ${n.status}: ${e.message}`)}else{const s={version:(yield n.json()).version,actions:[{action:"setFirstName",firstName:e}]},i=yield fetch(t,{method:"POST",headers:this.headers,body:JSON.stringify(s)});if(400===i.status){const e=yield i.json();(0,o.createPopupWithText)(`Error ${i.status}: ${e.message}`)}else(0,o.createPopupWithText)("First Name updated.")}}catch(e){this.handleFetchError(e)}}))}static updateCustomerLastName(e){return s(this,void 0,void 0,(function*(){const t=`${i.CTP_API_URL}/${i.CTP_PROJECT_KEY}/me/`,n=yield fetch(t,{method:"GET",headers:this.headers}),s={version:(yield n.json()).version,actions:[{action:"setLastName",lastName:e}]};yield fetch(t,{method:"POST",headers:this.headers,body:JSON.stringify(s)}),(0,o.createPopupWithText)("Last Name updated.")}))}static updateCustomerEmail(e){return s(this,void 0,void 0,(function*(){const t=`${i.CTP_API_URL}/${i.CTP_PROJECT_KEY}/me/`,n=yield fetch(t,{method:"GET",headers:this.headers}),s={version:(yield n.json()).version,actions:[{action:"changeEmail",email:e}]};yield fetch(t,{method:"POST",headers:this.headers,body:JSON.stringify(s)}),(0,o.createPopupWithText)("Email updated.")}))}static updateCustomerBirthDay(e){return s(this,void 0,void 0,(function*(){const t=`${i.CTP_API_URL}/${i.CTP_PROJECT_KEY}/me/`;try{const n=yield fetch(t,{method:"GET",headers:this.headers});if(!n.ok)throw new Error("Failed to fetch data.");const s={version:(yield n.json()).version,actions:[{action:"setDateOfBirth",dateOfBirth:e}]};try{if(!(yield fetch(t,{method:"POST",headers:this.headers,body:JSON.stringify(s)})).ok)throw new Error("Failed to update birthday.");(0,o.createPopupWithText)("Birthday updated.")}catch(e){console.error("Error updating birthday:",e)}}catch(e){console.error("Error fetching data:",e)}}))}static updateCustomerPassword(e,t){return s(this,void 0,void 0,(function*(){try{const n=`${i.CTP_API_URL}/${i.CTP_PROJECT_KEY}/me/`,s=`${i.CTP_API_URL}/${i.CTP_PROJECT_KEY}/me/password/`,a=yield fetch(n,{method:"GET",headers:this.headers}),d=yield a.json(),l={version:d.version,currentPassword:t,newPassword:e},u=yield fetch(s,{method:"POST",headers:this.headers,body:JSON.stringify(l)});if(400===u.status){const e=yield u.json();(0,o.createPopupWithText)(`Error ${u.status}: ${e.message}`)}else yield r.AuthAPI.fetchPasswordToken(d.email,e),(0,o.createPopupWithText)("Password updated.")}catch(e){this.handleFetchError(e)}}))}static handleFetchError(e){throw e instanceof Error?(0,o.createPopupWithText)(`Error: ${e.message}`):(0,o.createPopupWithText)(`Unknown error: ${e}`),e}}t.CustomerAPI=d,d.headers={Authorization:`Bearer ${localStorage.getItem(i.TOKEN_STORAGE_KEY)}`,"Content-Type":"application/json"}},942:function(e,t,n){var s=this&&this.__awaiter||function(e,t,n,s){return new(n||(n=Promise))((function(i,r){function a(e){try{d(s.next(e))}catch(e){r(e)}}function o(e){try{d(s.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}d((s=s.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.ProductAPI=void 0;const i=n(430);class r{static getAllProducts(e=0,t=4){return s(this,void 0,void 0,(function*(){const n=t*e,s=`${i.CTP_API_URL}/${i.CTP_PROJECT_KEY}/products?limit=${t}&offset=${n}`,r=yield fetch(s,{method:"GET",headers:{Authorization:`Bearer ${localStorage.getItem(i.TOKEN_STORAGE_KEY)}`}});return yield r.json()}))}static getProduct(e){return s(this,void 0,void 0,(function*(){const t=`${i.CTP_API_URL}/${i.CTP_PROJECT_KEY}/products/${e}`,n=yield fetch(t,{method:"GET",headers:{Authorization:`Bearer ${localStorage.getItem(i.TOKEN_STORAGE_KEY)}`}});return yield n.json()}))}static getNumberOfPages(){return s(this,void 0,void 0,(function*(){const e=yield r.getAllProducts();return Math.ceil(e.total/e.limit)}))}static getFilteredProducts(e,t=0,n=4){return s(this,void 0,void 0,(function*(){const s=this.getQueryParamsForFiltering(e),r=n*t,a=`${i.CTP_API_URL}/${i.CTP_PROJECT_KEY}/product-projections/search?${s}&limit=${n}&offset=${r}`,o=yield fetch(a,{method:"GET",headers:{Authorization:`Bearer ${localStorage.getItem(i.TOKEN_STORAGE_KEY)}`}}),d=yield o.json(),l=new CustomEvent("myCustomEvent",{detail:{message:"Custom event dispatched",data:d.results,currentPage:t,totalPages:Math.ceil(d.total/n),query:e}});document.dispatchEvent(l)}))}static getQueryParamsForFiltering(e){const{categoryId:t,sort:n,search:s,minPriceValue:i,maxPriceValue:r,brands:a,sockets:o,coresAmount:d,chipset:l,vramAmount:u}=e;return`${t?`filter=categories.id:"${t}"`:""}&${a?`filter.query=variants.attributes.manufacturer:${a}`:""}&${a?`facet=variants.attributes.manufacturer:${a}`:""}&${o?`filter.query=variants.attributes.socket:${o}`:""}&${o?`facet=variants.attributes.socket:${o}`:""}&${d?`filter.query=variants.attributes.cores-amount:${d}`:""}&${d?`facet=variants.attributes.cores-amount:${d}`:""}&${i||r?`filter=variants.price.centAmount:range (${i} to ${r})`:""}&${n?`sort=${n}`:""}&${s?`text.en=${s}`:""}&${l?`filter.query=variants.attributes.chipset:${l}`:""}&${l?`facet=variants.attributes.chipset:${l}`:""}&${u?`filter.query=variants.attributes.vram-amount:${u}`:""}&${u?`facet=variants.attributes.vram-amount:${u}`:""}`}static getFiltersData(e){return s(this,void 0,void 0,(function*(){const t=`${e?`filter.query=categories.id:subtree("${e}")`:""}&facet=variants.attributes.manufacturer&facet=variants.attributes.socket&facet=variants.attributes.cores-amount&facet=variants.attributes.chipset&facet=variants.attributes.vram-amount`,n=`${i.CTP_API_URL}/${i.CTP_PROJECT_KEY}/product-projections/search?${t}`,s=yield fetch(n,{method:"GET",headers:{Authorization:`Bearer ${localStorage.getItem(i.TOKEN_STORAGE_KEY)}`}}),r=yield s.json();return{manufacturers:r.facets["variants.attributes.manufacturer"].terms,sockets:r.facets["variants.attributes.socket"].terms,coresAmount:r.facets["variants.attributes.cores-amount"].terms,chipset:r.facets["variants.attributes.chipset"].terms,vramAmount:r.facets["variants.attributes.vram-amount"].terms}}))}}t.ProductAPI=r},477:function(e,t,n){var s=this&&this.__createBinding||(Object.create?function(e,t,n,s){void 0===s&&(s=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,s,i)}:function(e,t,n,s){void 0===s&&(s=n),e[s]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&s(t,e,n);return i(t,e),t},a=this&&this.__awaiter||function(e,t,n,s){return new(n||(n=Promise))((function(i,r){function a(e){try{d(s.next(e))}catch(e){r(e)}}function o(e){try{d(s.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}d((s=s.apply(e,t||[])).next())}))},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const d=n(903),l=o(n(754)),u=o(n(271)),c=o(n(707)),E=o(n(83)),h=n(413),m=o(n(22)),I=n(770),_=o(n(831));t.default=class{constructor(){I.AuthAPI.setAccessToken(),this.header=null,this.main=null;const e=new m.default,t=this.createRoutes(e);this.router=new d.Router(t,e),this.observer=new _.default,this.createView(e)}createView(e){const t=new E.default;this.header=new u.default(this.router,e),this.observer.setHeader(this.header),this.main=new c.default;const n=new l.default;t.getHTMLElement().append(this.header.getHTMLElement(),this.main.getHTMLElement(),n.getHTMLElement()),document.body.append(t.getHTMLElement())}createRoutes(e){return[{path:"",callback:()=>a(this,void 0,void 0,(function*(){const{default:e}=yield Promise.resolve().then((()=>r(n(578))));this.setContent(h.Pages.INDEX,new e(this.router))}))},{path:`${h.Pages.INDEX}`,callback:()=>a(this,void 0,void 0,(function*(){const{default:e}=yield Promise.resolve().then((()=>r(n(578))));this.setContent(h.Pages.INDEX,new e(this.router))}))},{path:`${h.Pages.LOGIN}`,callback:()=>a(this,void 0,void 0,(function*(){const{default:t}=yield Promise.resolve().then((()=>r(n(291))));this.setContent(h.Pages.LOGIN,new t(this.router,this.observer,e))}))},{path:`${h.Pages.USER_PROFILE}`,callback:()=>a(this,void 0,void 0,(function*(){const{default:e}=yield Promise.resolve().then((()=>r(n(844))));this.setContent(h.Pages.USER_PROFILE,new e)}))},{path:`${h.Pages.REGISTRATION}`,callback:()=>a(this,void 0,void 0,(function*(){const{default:t}=yield Promise.resolve().then((()=>r(n(156))));this.setContent(h.Pages.REGISTRATION,new t(this.router,this.observer,e))}))},{path:`${h.Pages.CATALOG}`,callback:()=>a(this,void 0,void 0,(function*(){const{default:e}=yield Promise.resolve().then((()=>r(n(799))));this.setContent(h.Pages.CATALOG,new e(this.router))}))},{path:`${h.Pages.PROCESSORS}`,callback:()=>a(this,void 0,void 0,(function*(){const{default:e}=yield Promise.resolve().then((()=>r(n(7))));this.setContent(h.Pages.CATALOG,new e(this.router))}))},{path:`${h.Pages.GRAPHIC_CARDS}`,callback:()=>a(this,void 0,void 0,(function*(){const{default:e}=yield Promise.resolve().then((()=>r(n(906))));this.setContent(h.Pages.GRAPHIC_CARDS,new e(this.router))}))},{path:`${h.Pages.CATALOG}/${h.ID}`,callback:e=>a(this,void 0,void 0,(function*(){const{default:t}=yield Promise.resolve().then((()=>r(n(392))));void 0!==e&&this.setContent(h.Pages.CATALOG,new t(e))}))},{path:`${h.Pages.NOT_FOUND}`,callback:()=>a(this,void 0,void 0,(function*(){const{default:e}=yield Promise.resolve().then((()=>r(n(15))));this.setContent(h.Pages.NOT_FOUND,new e(this.router))}))}]}setContent(e,t){var n,s;null===(n=this.header)||void 0===n||n.setSelectedItem(e),null===(s=this.main)||void 0===s||s.setContent(t)}}},831:function(e,t){Object.defineProperty(t,"__esModule",{value:!0});t.default=class{constructor(){this.header=null}setHeader(e){this.header=e}userIsLoggedIn(e){var t;null===(t=this.header)||void 0===t||t.userIsLoggedIn(e)}}},586:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.HistoryRouterHandler=void 0;t.HistoryRouterHandler=class{constructor(e){this.callback=e,this.handler=this.navigate.bind(this),window.addEventListener("popstate",this.handler)}navigate(e){"string"==typeof e&&this.setHistory(e);const t={path:"",resource:""},n=window.location.pathname.slice(1).split("/");[t.path="",t.resource=""]=n,this.callback(t)}setHistory(e){window.history.pushState(null,"",`/${e}`)}}},413:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.ID=t.Pages=void 0;t.Pages={INDEX:"main",LOGIN:"login",REGISTRATION:"registration",USER_PROFILE:"profile",CATALOG:"catalog",PROCESSORS:"processors",GRAPHIC_CARDS:"graphic-cards",NOT_FOUND:"not-found"};t.ID="{id}"},903:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Router=void 0;const s=n(413),i=n(586),r="login-status";t.Router=class{constructor(e,t){this.routes=e,this.handler=new i.HistoryRouterHandler(this.urlChangedHandler.bind(this)),this.state=t,document.addEventListener("DOMContentLoaded",(()=>{this.handler.navigate("")}))}navigate(e){this.handler.navigate(e)}urlChangedHandler(e){const t=this.state.getValue(r);if((e.path===s.Pages.REGISTRATION||e.path===s.Pages.LOGIN)&&"true"===t)return void this.redirectToMain();const n=""===e.resource?e.path:`${e.path}/${s.ID}`,i=this.routes.find((e=>e.path===n));i?i.callback(e.resource):this.redirectToNotFoundPage()}redirectToMain(){const e=this.routes.find((e=>e.path===s.Pages.INDEX));e&&this.navigate(e.path)}redirectToNotFoundPage(){const e=this.routes.find((e=>e.path===s.Pages.NOT_FOUND));e&&this.navigate(e.path)}}},22:function(e,t){Object.defineProperty(t,"__esModule",{value:!0});const n="spaApp";t.default=class{constructor(){this.fields=this.loadState(),window.addEventListener("beforeunload",this.saveState.bind(this))}setValue(e,t){this.fields.set(e,t)}getValue(e){const t=this.fields.get(e);return t||""}saveState(){const e=Object.fromEntries(this.fields.entries());localStorage.setItem(n,JSON.stringify(e))}loadState(){const e=localStorage.getItem(n);if(e){const t=JSON.parse(e);return new Map(Object.entries(t))}return new Map}}},97:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.BreadCrumbsCreator=t.BREAD_CRUMBS_CLASSES=void 0;const s=n(111);t.BREAD_CRUMBS_CLASSES={BREAD_CRUMBS:"bread-crumbs",BREAD_CRUMBS_ELEMENT:"bread-crumbs__element",BREAD_CRUMBS_LINK:"bread-crumbs__link",BREAD_CRUMBS_LINK_ACTIVE:"bread-crumbs__link--active"};t.BreadCrumbsCreator=class{constructor(e,n){this.router=n,this.element=new s.ElementCreator("ul",t.BREAD_CRUMBS_CLASSES.BREAD_CRUMBS),this.createBreadCrumbs(e)}createBreadCrumbs(e){e.forEach((e=>{const n=new s.ElementCreator("li",t.BREAD_CRUMBS_CLASSES.BREAD_CRUMBS_ELEMENT),i=e.isCurrent?[t.BREAD_CRUMBS_CLASSES.BREAD_CRUMBS_LINK,t.BREAD_CRUMBS_CLASSES.BREAD_CRUMBS_LINK_ACTIVE]:t.BREAD_CRUMBS_CLASSES.BREAD_CRUMBS_LINK,r=new s.ElementCreator("a",i,e.text);r.getElement().addEventListener("click",(()=>this.router.navigate(e.pagePath))),n.addInnerElement(r),this.element.addInnerElement(n)}))}getElement(){return this.element.getElement()}}},852:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.clearElement=void 0,t.clearElement=function(e){if(e)for(;e.firstChild;)e.removeChild(e.firstChild)}},387:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.createPopupWithText=void 0;const s=n(111);t.createPopupWithText=function(e){const t=new s.ElementCreator("div","popup",e),n=new s.ElementCreator("button","primary-button","Close");n.getElement().addEventListener("click",(()=>{document.body.removeChild(t.getElement())})),t.addInnerElement(n),document.body.appendChild(t.getElement());const i=setTimeout((()=>{document.body.removeChild(t.getElement())}),2e3);n.getElement().addEventListener("click",(()=>{clearTimeout(i)}))}},111:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.ElementCreator=void 0;class n{constructor(e,t,n){this.element=document.createElement(e),this.setElement(t,n)}setElement(e,t){this.setCssClasses(e),t&&this.setTextContent(t)}getElement(){return this.element}setCssClasses(e){Array.isArray(e)?this.element.classList.add(...e):this.element.classList.add(e)}setTextContent(e){this.element.textContent=e}addInnerElement(e){e instanceof n?this.element.append(e.getElement()):this.element.append(e)}}t.ElementCreator=n},507:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});const s=n(111),i="primary-wrapper",r="primary-input",a="primary-label",o="primary-error-line";t.default=class{constructor(e,t,n,s,i="text",r=""){this.element=document.createElement("div"),this.inputElement=document.createElement("input"),this.labelElement=document.createElement("label"),this.errorLineElement=document.createElement("div"),this.setElement(e,t,n,i),this.setValue(s),this.setPlaceholder(r)}setElement(e,t,n,s){this.setLabelTextContent(n),this.setCssClasses(e,t),this.labelElement.prepend(this.inputElement),this.element.append(this.labelElement),this.element.append(this.errorLineElement),this.setType(s)}getElement(){return this.element}getInputElement(){return this.inputElement}getErrorLine(){return this.errorLineElement}setValue(e){this.inputElement.value=e}setCssClasses(e,t){this.element.classList.add(`${e}__${t}-input-wrapper`,i),this.inputElement.classList.add(`${e}__${t}-input`,r),this.labelElement.classList.add(`${e}__${t}-label`,a),this.errorLineElement.classList.add(o)}setLabelTextContent(e){this.labelElement&&(this.labelElement.textContent=e)}setType(e){this.inputElement.setAttribute("type",e)}setPlaceholder(e){this.inputElement.setAttribute("placeholder",e)}addInnerElement(e){e instanceof s.ElementCreator?this.element.append(e.getElement()):this.element.append(e)}}},442:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.Validator=void 0;t.Validator=class{static nameField(e){let t="";return e?/^[a-zA-Z-\s]+$/.test(e)||(t="Name must contain only letters and spaces."):t="Name is empty.",t}static emailField(e){let t="";return e?/^[\w-.]+@([\w-]+\.)+[\w-]{2,4}$/g.test(e)||(t="Please enter a valid email address in the format: name@example.com"):t="Email is empty.",t}static passwordField(e){let t="";return e.length<8&&(t+="Password must be at least 8 characters long.\n"),/[A-Z]/.test(e)||(t+="Password must contain at least one uppercase letter (A-Z).\n"),/[a-z]/.test(e)||(t+="Password must contain at least one lowercase letter (a-z).\n"),/\d/.test(e)||(t+="Password must contain at least one digit (0-9).\n"),/\s/.test(e)&&(t+="Password must not contain leading or trailing whitespace.\n"),t}static confirmPasswordField(e,t){let n="";return e?e!==t&&(n="Passwords do not match."):n="Password is empty.",n}static birthField(e){let t="";if(e){const n=new Date(e),s=new Date;let i=s.getFullYear()-n.getFullYear();(s.getMonth()<n.getMonth()||s.getMonth()===n.getMonth()&&s.getDate()<n.getDate())&&(i-=1),i<13&&(t="You must be at least 13 years old.")}else t="Date of birth is empty.";return t}static streetField(e){let t="";return e.trim()||(t="Street is empty."),t}static cityField(e){let t="";return e?/^[a-zA-Z-\s]+$/.test(e)||(t="City must contain only letters and spaces."):t="City is empty.",t}static postalCodeField(e,t){let n="";if(e){("US"===t?/^\d{5}(-\d{4})?$/:/^[0-9]{6}$/).test(e)||(n="US"===t?"Please enter a valid USA postal code in the format: 12345 or 12345-1234":"Please enter a valid russian postal code in the format: 123456")}else n="Postal code is empty.";return n}}},754:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});const s=n(111),i=n(644);class r extends i.View{constructor(){super("footer","footer"),this.configView()}configView(){const e=new s.ElementCreator("a","footer__link","");e.getElement().setAttribute("href","https://rs.school/js/"),e.getElement().setAttribute("target","_blank"),e.getElement().setAttribute("rel","noopener noreferrer"),this.viewElementCreator.addInnerElement(e);const t=new s.ElementCreator("img","footer__link-image","");t.getElement().setAttribute("src","./assets/images/rs_school_js.svg"),e.addInnerElement(t);const n=new s.ElementCreator("div","footer__text-team","Developed by New World Disorder");this.viewElementCreator.addInnerElement(n);const i=new s.ElementCreator("div","footer__text-year","2023");this.viewElementCreator.addInnerElement(i)}}t.default=r},271:function(e,t,n){var s=this&&this.__awaiter||function(e,t,n,s){return new(n||(n=Promise))((function(i,r){function a(e){try{d(s.next(e))}catch(e){r(e)}}function o(e){try{d(s.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}d((s=s.apply(e,t||[])).next())}))},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=n(111),a=n(644),o=i(n(563)),d=n(413),l=n(770),u="header",c=["header__nav","nav"],E=["header__user-menu","user-menu"],h=["user-menu__logout-button"],m={INDEX:"Main",CATALOG:"Catalog"},I={REGISTRATION:"Registration",LOGIN:"Login",USER_PROFILE:"Your profile"},_="Logout",C="login-status";class p extends a.View{constructor(e,t){super("header",u),this.headerLinkElements=new Map,this.logoutButton=this.crateLogoutButton(),this.configView(e,t)}configView(e,t){this.addNavigation(e),this.addUserMenu(e),this.logoutButton.getElement().addEventListener("click",this.logoutButtonHandler.bind(this,t)),this.userIsLoggedIn(t)}setSelectedItem(e){const t=this.headerLinkElements.get(e.toUpperCase());t instanceof o.default&&t.setSelectedStatus()}addNavigation(e){const t=new r.ElementCreator("nav",c);Object.keys(m).forEach((n=>{const s={name:m[n],callback:()=>e.navigate(d.Pages[n])},i=new o.default(s.name,s.callback,this.headerLinkElements);t.addInnerElement(i.getHTMLElement()),this.headerLinkElements.set(d.Pages[n].toUpperCase(),i)})),this.viewElementCreator.addInnerElement(t)}addUserMenu(e){const t=new r.ElementCreator("div",E);Object.keys(I).forEach((n=>{const s={name:I[n],callback:()=>e.navigate(d.Pages[n])},i=new o.default(s.name,s.callback,this.headerLinkElements);t.addInnerElement(i.getHTMLElement()),this.headerLinkElements.set(d.Pages[n].toUpperCase(),i)})),t.addInnerElement(this.logoutButton),this.viewElementCreator.addInnerElement(t)}crateLogoutButton(){return new r.ElementCreator("a",h,_)}logoutButtonHandler(e){return s(this,void 0,void 0,(function*(){yield l.AuthAPI.fetchAnonymousToken(),e.setValue(C,"false"),this.userIsLoggedIn(e)}))}userIsLoggedIn(e){const t=[this.headerLinkElements.get("REGISTRATION").getHTMLElement(),this.headerLinkElements.get("LOGIN").getHTMLElement(),this.headerLinkElements.get("PROFILE").getHTMLElement(),this.logoutButton.getElement()],n="true"===e.getValue(C)?[0,1]:[2,3];t.forEach(((e,t)=>{e.classList.remove("hide"),n.includes(t)&&e.classList.add("hide")}))}}t.default=p},563:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});const s=n(644),i="nav__item",r="nav__item_selected";class a extends s.View{constructor(e,t,n){super("a",i,e),this.linkElements=n,this.pageCallback=t,this.configView()}setSelectedStatus(){this.linkElements.forEach((e=>e.setNotSelectedStatus()));this.viewElementCreator.getElement().classList.add(r)}setNotSelectedStatus(){this.viewElementCreator.getElement().classList.remove(r)}configView(){this.viewElementCreator.getElement().addEventListener("click",(()=>{this.setSelectedStatus.bind(this),this.pageCallback()}))}}t.default=a},861:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.BREAD_CRUMBS_INFO=t.CATALOG_TEXT=t.CATALOG_CLASSES=void 0;const s=n(413);t.CATALOG_CLASSES={CATALOG:"catalog",LINKS_WRAPPER:"catalog__links-wrapper",LINK:"catalog__link",LINK_IMG:"catalog__link-img",LINK_TEXT:"catalog__link-text"},t.CATALOG_TEXT={PROCESSORS_LINK:"Processors",GRAPHIC_CARDS_LINK:"Graphic cards"},t.BREAD_CRUMBS_INFO=[{text:"PC-Components",isCurrent:!0,pagePath:s.Pages.CATALOG}]},799:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});const s=n(111),i=n(644),r=n(861),a=n(413),o=n(97);class d extends i.View{constructor(e){super("section",r.CATALOG_CLASSES.CATALOG),this.router=e,this.configureView()}configureView(){this.addBreadCrumbs(),this.addCategoryLinks()}addBreadCrumbs(){const e=new o.BreadCrumbsCreator(r.BREAD_CRUMBS_INFO,this.router);this.viewElementCreator.addInnerElement(e.getElement())}addCategoryLinks(){const e=new s.ElementCreator("div",r.CATALOG_CLASSES.LINKS_WRAPPER),t=this.getProcessorsLink({src:"./assets/images/cpu.svg",text:r.CATALOG_TEXT.PROCESSORS_LINK,callback:()=>this.router.navigate(a.Pages.PROCESSORS)}),n=this.getProcessorsLink({src:"./assets/images/graphic-card.svg",text:r.CATALOG_TEXT.GRAPHIC_CARDS_LINK,callback:()=>this.router.navigate(a.Pages.GRAPHIC_CARDS)});e.addInnerElement(t),e.addInnerElement(n),this.viewElementCreator.addInnerElement(e)}getProcessorsLink(e){const t=new s.ElementCreator("a",r.CATALOG_CLASSES.LINK),n=new s.ElementCreator("img",r.CATALOG_CLASSES.LINK_IMG);n.getElement().setAttribute("src",e.src),t.addInnerElement(n);const i=new s.ElementCreator("div",r.CATALOG_CLASSES.LINK_TEXT,e.text);return t.getElement().addEventListener("click",e.callback),t.addInnerElement(i),t.getElement()}}t.default=d},526:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.CATEGORY_ID=t.SORT_OPTIONS=t.TEXT=t.INPUT_TYPE=t.INPUT_LABEL=t.INITIAL_VALUE=t.PLACEHOLDER=t.CssClasses=void 0,t.CssClasses={FILTERS:"filters",SEARCH_INPUT:"search",SORT:"filters__sort-bar",SORT_OPTION:"filters__sort-option",FILTERS_BLOCK:"filters__block",FILTERS_HEADER:"filters__header",PRICE_LINE:"filters__price-line",PRICE_SPLITTER:"filters__price-splitter",PRICE_INPUT:"price",BRANDS_LIST:"filters__brands-list",BRANDS_LINE:"filters__brands-line",CHECKBOX_INPUT:"checkbox",RESET_BUTTON:"filters__reset-button",ACCORDION_BUTTON:"filters__accordion-button",ACCORDION_BUTTON_ACTIVE:"filters__accordion-button--active",ACCORDION_MENU:"filters__accordion-menu",ACCORDION_MENU_ACTIVE:"filters__accordion-menu--active",NAVIGATION_CATEGORY:"filters__navigation-category",NAVIGATION_SUBCATEGORY:"filters__navigation-subcategory",NAVIGATION_SUBCATEGORY_ACTIVE:"filters__navigation-subcategory--active",CURRENT_FILTER:"filters__current-filter"},t.PLACEHOLDER={SEARCH_INPUT:"",PRICE_INPUT:"",BRANDS_INPUT:""},t.INITIAL_VALUE={INPUT:"",SORT_BAR:"price desc"},t.INPUT_LABEL={SEARCH_INPUT:"Search...",PRICE_MIN_INPUT:"from",PRICE_MAX_INPUT:"to"},t.INPUT_TYPE={SEARCH_INPUT:"text",PRICE_INPUT:"number",BRANDS_INPUT:"checkbox"},t.TEXT={PRICE_HEADER:"Price(USD)",BRANDS_HEADER:"Brands",CHIPSETS_HEADER:"Chipsets",VRAM_AMOUNT_HEADER:"Vram amount",RESET_BUTTON:"reset",NAVIGATION_BUTTON:"Navigation",PC_COMPONENTS_CATEGORY:"PC-Components",PROCESSORS_SUBCATEGORY:"Processors",GRAPHIC_CARDS_SUBCATEGORY:"Graphic cards",CURRENT_FILTERS:"Current filters"},t.SORT_OPTIONS=[{TEXT:"Price: height to low",VALUE:"price desc"},{TEXT:"Price: low to height",VALUE:"price asc"},{TEXT:"Name: A-Z",VALUE:"name.en asc"},{TEXT:"Name: Z-A",VALUE:"name.en desc"}],t.CATEGORY_ID="0b0e9d3c-edea-4285-a921-4346b70db822"},40:function(e,t,n){var s=this&&this.__awaiter||function(e,t,n,s){return new(n||(n=Promise))((function(i,r){function a(e){try{d(s.next(e))}catch(e){r(e)}}function o(e){try{d(s.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}d((s=s.apply(e,t||[])).next())}))},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.FiltersView=void 0;const r=n(942),a=n(413),o=n(111),d=i(n(507)),l=n(644),u=n(526);class c extends l.View{constructor(e){super("section",u.CssClasses.FILTERS),this.router=e,this.brands=new Set,this.chipsets=new Set,this.vramAmounts=new Set,this.searchInput=null,this.sortBar=null,this.minPriceInput=null,this.maxPriceInput=null,this.currentFiltersView=null,this.configureView()}configureView(){return s(this,void 0,void 0,(function*(){this.addCatalogNavigation(),this.addActiveFiltersBlock(),this.addSearchBar(),this.addSortBar(),this.addPriceBlock(),yield this.addBrandsList(),yield this.addChipsetList(),yield this.addVramAmountList(),this.addResetButton()}))}addCatalogNavigation(){const e=new o.ElementCreator("div",u.CssClasses.FILTERS_BLOCK),t=new o.ElementCreator("button",u.CssClasses.ACCORDION_BUTTON,u.TEXT.NAVIGATION_BUTTON),n=new o.ElementCreator("div",u.CssClasses.ACCORDION_MENU),s=new o.ElementCreator("a",u.CssClasses.NAVIGATION_CATEGORY,u.TEXT.PC_COMPONENTS_CATEGORY),i=new o.ElementCreator("a",u.CssClasses.NAVIGATION_SUBCATEGORY,u.TEXT.PROCESSORS_SUBCATEGORY),r=new o.ElementCreator("a",[u.CssClasses.NAVIGATION_SUBCATEGORY,u.CssClasses.NAVIGATION_SUBCATEGORY_ACTIVE],u.TEXT.GRAPHIC_CARDS_SUBCATEGORY);e.getElement().addEventListener("click",(e=>{e.target===t.getElement()&&(t.getElement().classList.toggle(u.CssClasses.ACCORDION_BUTTON_ACTIVE),n.getElement().classList.toggle(u.CssClasses.ACCORDION_MENU_ACTIVE)),e.target===s.getElement()&&this.router.navigate(a.Pages.CATALOG),e.target===i.getElement()&&this.router.navigate(a.Pages.PROCESSORS),e.target===r.getElement()&&this.router.navigate(a.Pages.GRAPHIC_CARDS)})),n.addInnerElement(s),n.addInnerElement(i),n.addInnerElement(r),e.addInnerElement(t),e.addInnerElement(n),this.viewElementCreator.addInnerElement(e)}addActiveFiltersBlock(){const e=new o.ElementCreator("div",u.CssClasses.FILTERS_BLOCK),t=new o.ElementCreator("button",u.CssClasses.ACCORDION_BUTTON,u.TEXT.CURRENT_FILTERS),n=new o.ElementCreator("div",u.CssClasses.ACCORDION_MENU);t.getElement().addEventListener("click",(e=>{e.target===t.getElement()&&(t.getElement().classList.toggle(u.CssClasses.ACCORDION_BUTTON_ACTIVE),n.getElement().classList.toggle(u.CssClasses.ACCORDION_MENU_ACTIVE))})),this.currentFiltersView=n,e.addInnerElement(t),e.addInnerElement(n),this.viewElementCreator.addInnerElement(e)}addActiveFilters(e){e.forEach((e=>{var t;const n=new o.ElementCreator("div",u.CssClasses.CURRENT_FILTER,e);null===(t=this.currentFiltersView)||void 0===t||t.addInnerElement(n)}))}updateCurrentFiltersView(){for(var e,t,n,s,i,r,a,o,d;null===(e=this.currentFiltersView)||void 0===e?void 0:e.getElement().firstChild;)null===(n=null===(t=this.currentFiltersView)||void 0===t?void 0:t.getElement().firstChild)||void 0===n||n.remove();const l=[];if((null===(s=this.searchInput)||void 0===s?void 0:s.value)&&l.push(`Search: ${null===(i=this.searchInput)||void 0===i?void 0:i.value}`),((null===(r=this.minPriceInput)||void 0===r?void 0:r.value)||(null===(a=this.maxPriceInput)||void 0===a?void 0:a.value))&&l.push(`Price(USD): ${(null===(o=this.minPriceInput)||void 0===o?void 0:o.value)||"0"} - ${(null===(d=this.maxPriceInput)||void 0===d?void 0:d.value)||"∞"}`),this.brands.size){const e=[...this.brands].map((e=>`"${e.value}"`)).join(", ");l.push(`Brands: ${e}`)}if(this.chipsets.size){const e=[...this.chipsets].map((e=>`"${e.value}"`)).join(", ");l.push(`Chipsets: ${e}`)}if(this.vramAmounts.size){const e=[...this.vramAmounts].map((e=>`"${e.value}"`)).join(", ");l.push(`VRam amount: ${e}`)}this.addActiveFilters(l)}addSearchBar(){const e=new d.default(u.CssClasses.FILTERS,u.CssClasses.SEARCH_INPUT,u.INPUT_LABEL.SEARCH_INPUT,u.INITIAL_VALUE.INPUT,u.INPUT_TYPE.SEARCH_INPUT,u.PLACEHOLDER.SEARCH_INPUT),t=e.getInputElement();this.searchInput=t,t.addEventListener("keydown",this.searchBarCallback.bind(this)),this.viewElementCreator.addInnerElement(e.getElement())}searchBarCallback(e){return s(this,void 0,void 0,(function*(){if(!this.searchInput)throw new Error;"Enter"!==e.code&&"Enter"!==e.key||(yield this.getFilteredProducts(),this.updateCurrentFiltersView())}))}addSortBar(){const e=new o.ElementCreator("select",u.CssClasses.SORT);u.SORT_OPTIONS.forEach((t=>{const n=new o.ElementCreator("option",u.CssClasses.SORT_OPTION,t.TEXT).getElement();n instanceof HTMLOptionElement&&(n.value=t.VALUE),e.addInnerElement(n)}));const t=e.getElement();t instanceof HTMLSelectElement&&(this.sortBar=t,t.value=u.INITIAL_VALUE.SORT_BAR),t.addEventListener("change",this.sortBarCallback.bind(this)),this.viewElementCreator.addInnerElement(t)}sortBarCallback(){return s(this,void 0,void 0,(function*(){yield this.getFilteredProducts()}))}addPriceBlock(){const e=new o.ElementCreator("div",u.CssClasses.FILTERS_BLOCK),t=new o.ElementCreator("header",u.CssClasses.FILTERS_HEADER,u.TEXT.PRICE_HEADER),n=new o.ElementCreator("div",u.CssClasses.PRICE_LINE);this.addPriceLine(n),e.addInnerElement(t.getElement()),e.addInnerElement(n.getElement()),this.viewElementCreator.addInnerElement(e.getElement())}addPriceLine(e){const t=new d.default(u.CssClasses.FILTERS,u.CssClasses.PRICE_INPUT,u.INPUT_LABEL.PRICE_MIN_INPUT,u.INITIAL_VALUE.INPUT,u.INPUT_TYPE.PRICE_INPUT,u.PLACEHOLDER.PRICE_INPUT);this.minPriceInput=t.getInputElement(),t.getInputElement().addEventListener("keydown",this.priceKeyDownCallback.bind(this)),t.getInputElement().addEventListener("input",this.priceInputCallback.bind(this));const n=new o.ElementCreator("div",u.CssClasses.PRICE_SPLITTER),s=new d.default(u.CssClasses.FILTERS,u.CssClasses.PRICE_INPUT,u.INPUT_LABEL.PRICE_MAX_INPUT,u.INITIAL_VALUE.INPUT,u.INPUT_TYPE.PRICE_INPUT,u.PLACEHOLDER.PRICE_INPUT);this.maxPriceInput=s.getInputElement(),s.getInputElement().addEventListener("keydown",this.priceKeyDownCallback.bind(this)),s.getInputElement().addEventListener("input",this.priceInputCallback.bind(this)),e.addInnerElement(t.getElement()),e.addInnerElement(n.getElement()),e.addInnerElement(s.getElement())}priceKeyDownCallback(e){"KeyE"!==e.code&&"e"!==e.key||e.preventDefault()}priceInputCallback(){return s(this,void 0,void 0,(function*(){yield this.getFilteredProducts.call(this),this.updateCurrentFiltersView()}))}addBrandsList(){return s(this,void 0,void 0,(function*(){const e=new o.ElementCreator("div",u.CssClasses.FILTERS_BLOCK),t=new o.ElementCreator("header",u.CssClasses.FILTERS_HEADER,u.TEXT.BRANDS_HEADER),n=new o.ElementCreator("ul",u.CssClasses.BRANDS_LIST);try{const{manufacturers:e}=yield r.ProductAPI.getFiltersData(u.CATEGORY_ID);e.forEach((e=>{const t=new o.ElementCreator("li",u.CssClasses.BRANDS_LINE),s=new d.default(u.CssClasses.FILTERS,u.CssClasses.CHECKBOX_INPUT,`${e.term} (${e.count})`,`${e.term}`,u.INPUT_TYPE.BRANDS_INPUT,u.PLACEHOLDER.BRANDS_INPUT);t.addInnerElement(s.getElement()),n.addInnerElement(t)}))}catch(e){console.log(e)}n.getElement().addEventListener("change",this.brandsListCallback.bind(this)),e.addInnerElement(t),e.addInnerElement(n),this.viewElementCreator.addInnerElement(e)}))}addChipsetList(){return s(this,void 0,void 0,(function*(){const e=new o.ElementCreator("div",u.CssClasses.FILTERS_BLOCK),t=new o.ElementCreator("header",u.CssClasses.FILTERS_HEADER,u.TEXT.CHIPSETS_HEADER),n=new o.ElementCreator("ul",u.CssClasses.BRANDS_LIST);try{const{chipset:e}=yield r.ProductAPI.getFiltersData(u.CATEGORY_ID);e.forEach((e=>{const t=new o.ElementCreator("li",u.CssClasses.BRANDS_LINE),s=new d.default(u.CssClasses.FILTERS,u.CssClasses.CHECKBOX_INPUT,`${e.term} (${e.count})`,`${e.term}`,u.INPUT_TYPE.BRANDS_INPUT,u.PLACEHOLDER.BRANDS_INPUT);t.addInnerElement(s.getElement()),n.addInnerElement(t)}))}catch(e){console.log(e)}n.getElement().addEventListener("change",this.chipsetListCallback.bind(this)),e.addInnerElement(t),e.addInnerElement(n),this.viewElementCreator.addInnerElement(e)}))}addVramAmountList(){return s(this,void 0,void 0,(function*(){const e=new o.ElementCreator("div",u.CssClasses.FILTERS_BLOCK),t=new o.ElementCreator("header",u.CssClasses.FILTERS_HEADER,u.TEXT.VRAM_AMOUNT_HEADER),n=new o.ElementCreator("ul",u.CssClasses.BRANDS_LIST);try{const{vramAmount:e}=yield r.ProductAPI.getFiltersData(u.CATEGORY_ID);e.forEach((e=>{const t=new o.ElementCreator("li",u.CssClasses.BRANDS_LINE),s=new d.default(u.CssClasses.FILTERS,u.CssClasses.CHECKBOX_INPUT,`${e.term} (${e.count})`,`${e.term}`,u.INPUT_TYPE.BRANDS_INPUT,u.PLACEHOLDER.BRANDS_INPUT);t.addInnerElement(s.getElement()),n.addInnerElement(t)}))}catch(e){console.log(e)}n.getElement().addEventListener("change",this.vramAmountListCallback.bind(this)),e.addInnerElement(t),e.addInnerElement(n),this.viewElementCreator.addInnerElement(e)}))}brandsListCallback(e){return s(this,void 0,void 0,(function*(){e.target instanceof HTMLInputElement&&e.target.closest("input")&&(!0===e.target.checked&&(this.brands.add(e.target),this.getFilteredProducts.call(this)),!1===e.target.checked&&(this.brands.delete(e.target),this.getFilteredProducts.call(this)),this.updateCurrentFiltersView())}))}chipsetListCallback(e){return s(this,void 0,void 0,(function*(){e.target instanceof HTMLInputElement&&e.target.closest("input")&&(!0===e.target.checked&&(this.chipsets.add(e.target),this.getFilteredProducts.call(this)),!1===e.target.checked&&(this.chipsets.delete(e.target),this.getFilteredProducts.call(this)),this.updateCurrentFiltersView())}))}vramAmountListCallback(e){return s(this,void 0,void 0,(function*(){e.target instanceof HTMLInputElement&&e.target.closest("input")&&(!0===e.target.checked&&(this.vramAmounts.add(e.target),this.getFilteredProducts.call(this)),!1===e.target.checked&&(this.vramAmounts.delete(e.target),this.getFilteredProducts.call(this)),this.updateCurrentFiltersView())}))}addResetButton(){const e=new o.ElementCreator("button",u.CssClasses.RESET_BUTTON,u.TEXT.RESET_BUTTON);e.getElement().addEventListener("click",this.resetButtonCallback.bind(this)),this.viewElementCreator.addInnerElement(e)}resetButtonCallback(){return s(this,void 0,void 0,(function*(){[this.searchInput,this.minPriceInput,this.maxPriceInput].forEach((e=>{const t=e;t&&(t.value=u.INITIAL_VALUE.INPUT,t.focus(),t.blur())})),this.sortBar&&(this.sortBar.value=u.INITIAL_VALUE.SORT_BAR),this.resetCheckboxElements(this.brands),this.resetCheckboxElements(this.chipsets),this.resetCheckboxElements(this.vramAmounts),this.updateCurrentFiltersView(),yield this.getFilteredProducts()}))}resetCheckboxElements(e){[...e].forEach((t=>{const n=t;n.checked=!1,e.delete(n)}))}getFilteredProducts(){var e,t;return s(this,void 0,void 0,(function*(){const n=null===(e=this.searchInput)||void 0===e?void 0:e.value,s=null===(t=this.sortBar)||void 0===t?void 0:t.value;if(!this.minPriceInput||!this.maxPriceInput)throw new Error;const i=Number(this.minPriceInput.value||"0"),a=Number(this.maxPriceInput.value||"*"),o=String(100*i||"0"),d=String(100*a||"*"),l=[...this.brands].map((e=>`"${e.value}"`)).join(","),c=[...this.chipsets].map((e=>`"${e.value}"`)).join(","),E=[...this.vramAmounts].map((e=>`"${e.value}"`)).join(",");yield r.ProductAPI.getFilteredProducts({categoryId:u.CATEGORY_ID,search:n,sort:s,minPriceValue:o,maxPriceValue:d,brands:l,chipset:c,vramAmount:E})}))}}t.FiltersView=c},951:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.BREAD_CRUMBS_INFO=t.CATEGORY_TEXT=t.CATEGORY_CLASSES=void 0;const s=n(413);t.CATEGORY_CLASSES={CATALOG:"category",TITLE:"category__title",CONTENT:"category__content",ASIDE:"category__content-aside",PRODUCTS:"category__content-products"},t.CATEGORY_TEXT={TITLE:"Catalog",CONTENT:"",ASIDE:"",PRODUCTS:""},t.BREAD_CRUMBS_INFO=[{text:"PC-Components",isCurrent:!1,pagePath:s.Pages.CATALOG},{text:"Video cards",isCurrent:!0,pagePath:s.Pages.GRAPHIC_CARDS}]},906:function(e,t,n){var s=this&&this.__awaiter||function(e,t,n,s){return new(n||(n=Promise))((function(i,r){function a(e){try{d(s.next(e))}catch(e){r(e)}}function o(e){try{d(s.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}d((s=s.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const i=n(644),r=n(111),a=n(951),o=n(942),d=n(852),l=n(40),u=n(97);class c extends i.View{constructor(e){super("section",a.CATEGORY_CLASSES.CATALOG),this.router=e,this.currentPage=0,this.totalPages=0,this.content=null,this.contentProducts=null,this.cardsWrapper=null,this.query={categoryId:"0b0e9d3c-edea-4285-a921-4346b70db822",search:"",sort:"price desc",minPriceValue:"0",maxPriceValue:"*",brands:""},this.configView()}configView(){var e;this.addTitle(),this.addContent(),this.addAside(),this.addProductsWrapper(),null===(e=this.content)||void 0===e||e.getElement().addEventListener("click",this.cardWrapperClickHandler.bind(this))}addTitle(){const e=new r.ElementCreator("h1",a.CATEGORY_CLASSES.TITLE,a.CATEGORY_TEXT.TITLE);this.viewElementCreator.addInnerElement(e)}addContent(){const e=new r.ElementCreator("div",a.CATEGORY_CLASSES.CONTENT,a.CATEGORY_TEXT.CONTENT);this.content=e,this.viewElementCreator.addInnerElement(e)}addAside(){var e;const t=new r.ElementCreator("aside",a.CATEGORY_CLASSES.ASIDE,a.CATEGORY_TEXT.ASIDE),n=new l.FiltersView(this.router);t.addInnerElement(n.getHTMLElement()),null===(e=this.content)||void 0===e||e.addInnerElement(t),document.addEventListener("myCustomEvent",(e=>{var t;(0,d.clearElement)(null===(t=this.contentProducts)||void 0===t?void 0:t.getElement());const n=e.detail.data;this.currentPage=e.detail.currentPage,this.totalPages=e.detail.totalPages,this.query=e.detail.query;const s=n.map((e=>{var t,n,s;const i=e.name.en;let r="";e.metaDescription&&(r=e.metaDescription.en);const a=e.masterVariant.prices[0].value.centAmount/100,o=null===(s=null===(n=null===(t=e.masterVariant.prices[0])||void 0===t?void 0:t.discounted)||void 0===n?void 0:n.value)||void 0===s?void 0:s.centAmount;let d;o&&(d=o/100);const l=e.masterVariant.images[0].url,{id:u}=e;return{name:i,description:r,price:a,image:l,discount:d,id:u}}));this.addBreadCrumbs(),this.createProductsWrapper(),this.createAllProductCards(s),this.createPaginator()}))}createPaginator(){var e;const t=new r.ElementCreator("div","paginator",""),n=new r.ElementCreator("button","paginator__btn","<");0===this.currentPage&&n.getElement().setAttribute("disabled",""),n.getElement().addEventListener("click",(()=>{this.currentPage>0&&(this.currentPage-=1,this.fetchFilteredProducts())})),t.addInnerElement(n);for(let e=0;e<this.totalPages;e+=1){const n=new r.ElementCreator("button","paginator__btn",`${e+1}`);this.currentPage===e&&n.getElement().classList.add("active"),n.getElement().addEventListener("click",(()=>{this.currentPage=e,this.fetchFilteredProducts()})),t.addInnerElement(n)}const s=new r.ElementCreator("button","paginator__btn",">");this.currentPage===this.totalPages-1&&s.getElement().setAttribute("disabled",""),s.getElement().addEventListener("click",(()=>{this.currentPage<this.totalPages-1&&(this.currentPage+=1,this.fetchFilteredProducts())})),t.addInnerElement(s),null===(e=this.contentProducts)||void 0===e||e.addInnerElement(t)}fetchFilteredProducts(){return s(this,void 0,void 0,(function*(){const e=this.query;yield o.ProductAPI.getFilteredProducts(e,this.currentPage)}))}addProductsWrapper(){var e;return s(this,void 0,void 0,(function*(){const t=new r.ElementCreator("div",a.CATEGORY_CLASSES.PRODUCTS,"");this.contentProducts=t,null===(e=this.content)||void 0===e||e.addInnerElement(t),this.addBreadCrumbs(),this.createProductsWrapper(),this.fetchFilteredProducts(),this.createPaginator()}))}addBreadCrumbs(){var e;const t=new u.BreadCrumbsCreator(a.BREAD_CRUMBS_INFO,this.router);null===(e=this.contentProducts)||void 0===e||e.addInnerElement(t.getElement())}createProductsWrapper(){var e;const t=new r.ElementCreator("div","cards-wrapper","");this.cardsWrapper=t,null===(e=this.contentProducts)||void 0===e||e.addInnerElement(t)}createAllProductCards(e){return s(this,void 0,void 0,(function*(){e.forEach((e=>{var t;null===(t=this.cardsWrapper)||void 0===t||t.addInnerElement(this.createProductCard(e))}))}))}createProductCard(e){const{name:t}=e,{description:n}=e,{price:s}=e,{image:i}=e,{discount:a}=e,{id:o}=e,d=new r.ElementCreator("div","product-card",""),l=new r.ElementCreator("h2","product-card__name",`${t}`),u=new r.ElementCreator("img","product-card__image",""),c=new r.ElementCreator("div","product-card__price",`$${s}`),E=new r.ElementCreator("div","product-card__discount",`$${a}`),h=new r.ElementCreator("div","product-card__description",`${n}`);return u.getElement().setAttribute("src",`${i}`),d.addInnerElement(l),d.addInnerElement(u),d.addInnerElement(c),d.addInnerElement(E),d.addInnerElement(h),d.getElement().dataset.id=o,d}cardWrapperClickHandler(e){const t=e.target;if(t instanceof HTMLElement){const e=t.closest(".product-card");if(e){const t=e.getAttribute("data-id");this.router.navigate(`catalog/${t}`)}}}}t.default=c},370:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.CATEGORY_ID=t.SORT_OPTIONS=t.TEXT=t.INPUT_TYPE=t.INPUT_LABEL=t.INITIAL_VALUE=t.PLACEHOLDER=t.CssClasses=void 0,t.CssClasses={FILTERS:"filters",SEARCH_INPUT:"search",SORT:"filters__sort-bar",SORT_OPTION:"filters__sort-option",FILTERS_BLOCK:"filters__block",FILTERS_HEADER:"filters__header",PRICE_LINE:"filters__price-line",PRICE_SPLITTER:"filters__price-splitter",PRICE_INPUT:"price",BRANDS_LIST:"filters__brands-list",BRANDS_LINE:"filters__brands-line",CHECKBOX_INPUT:"checkbox",RESET_BUTTON:"filters__reset-button",ACCORDION_BUTTON:"filters__accordion-button",ACCORDION_BUTTON_ACTIVE:"filters__accordion-button--active",ACCORDION_MENU:"filters__accordion-menu",ACCORDION_MENU_ACTIVE:"filters__accordion-menu--active",NAVIGATION_CATEGORY:"filters__navigation-category",NAVIGATION_SUBCATEGORY:"filters__navigation-subcategory",NAVIGATION_SUBCATEGORY_ACTIVE:"filters__navigation-subcategory--active",CURRENT_FILTER:"filters__current-filter"},t.PLACEHOLDER={SEARCH_INPUT:"",PRICE_INPUT:"",BRANDS_INPUT:""},t.INITIAL_VALUE={INPUT:"",SORT_BAR:"price desc"},t.INPUT_LABEL={SEARCH_INPUT:"Search...",PRICE_MIN_INPUT:"from",PRICE_MAX_INPUT:"to"},t.INPUT_TYPE={SEARCH_INPUT:"text",PRICE_INPUT:"number",BRANDS_INPUT:"checkbox"},t.TEXT={PRICE_HEADER:"Price(USD)",BRANDS_HEADER:"Brands",SOCKETS_HEADER:"Socket",CORES_AMOUNT_HEADER:"Cores amount",RESET_BUTTON:"reset",NAVIGATION_BUTTON:"Navigation",PC_COMPONENTS_CATEGORY:"PC-Components",PROCESSORS_SUBCATEGORY:"Processors",GRAPHIC_CARDS_SUBCATEGORY:"Graphic cards",CURRENT_FILTERS:"Current filters"},t.SORT_OPTIONS=[{TEXT:"Price: height to low",VALUE:"price desc"},{TEXT:"Price: low to height",VALUE:"price asc"},{TEXT:"Name: A-Z",VALUE:"name.en asc"},{TEXT:"Name: Z-A",VALUE:"name.en desc"}],t.CATEGORY_ID="0c1874b3-f13a-4879-ae0c-4cc69c02d71c"},493:function(e,t,n){var s=this&&this.__awaiter||function(e,t,n,s){return new(n||(n=Promise))((function(i,r){function a(e){try{d(s.next(e))}catch(e){r(e)}}function o(e){try{d(s.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}d((s=s.apply(e,t||[])).next())}))},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.FiltersView=void 0;const r=n(942),a=n(413),o=n(111),d=i(n(507)),l=n(644),u=n(370);class c extends l.View{constructor(e){super("section",u.CssClasses.FILTERS),this.router=e,this.brands=new Set,this.sockets=new Set,this.coresAmount=new Set,this.searchInput=null,this.sortBar=null,this.minPriceInput=null,this.maxPriceInput=null,this.currentFiltersView=null,this.configureView()}configureView(){return s(this,void 0,void 0,(function*(){this.addCatalogNavigation(),this.addActiveFiltersBlock(),this.addSearchBar(),this.addSortBar(),this.addPriceBlock(),yield this.addBrandsList(),yield this.addSocketsList(),yield this.addCoresAmountList(),this.addResetButton()}))}addCatalogNavigation(){const e=new o.ElementCreator("div",u.CssClasses.FILTERS_BLOCK),t=new o.ElementCreator("button",u.CssClasses.ACCORDION_BUTTON,u.TEXT.NAVIGATION_BUTTON),n=new o.ElementCreator("div",u.CssClasses.ACCORDION_MENU),s=new o.ElementCreator("a",u.CssClasses.NAVIGATION_CATEGORY,u.TEXT.PC_COMPONENTS_CATEGORY),i=new o.ElementCreator("a",[u.CssClasses.NAVIGATION_SUBCATEGORY,u.CssClasses.NAVIGATION_SUBCATEGORY_ACTIVE],u.TEXT.PROCESSORS_SUBCATEGORY),r=new o.ElementCreator("a",[u.CssClasses.NAVIGATION_SUBCATEGORY],u.TEXT.GRAPHIC_CARDS_SUBCATEGORY);e.getElement().addEventListener("click",(e=>{e.target===t.getElement()&&(t.getElement().classList.toggle(u.CssClasses.ACCORDION_BUTTON_ACTIVE),n.getElement().classList.toggle(u.CssClasses.ACCORDION_MENU_ACTIVE)),e.target===s.getElement()&&this.router.navigate(a.Pages.CATALOG),e.target===i.getElement()&&this.router.navigate(a.Pages.PROCESSORS),e.target===r.getElement()&&this.router.navigate(a.Pages.GRAPHIC_CARDS)})),n.addInnerElement(s),n.addInnerElement(i),n.addInnerElement(r),e.addInnerElement(t),e.addInnerElement(n),this.viewElementCreator.addInnerElement(e)}addActiveFiltersBlock(){const e=new o.ElementCreator("div",u.CssClasses.FILTERS_BLOCK),t=new o.ElementCreator("button",u.CssClasses.ACCORDION_BUTTON,u.TEXT.CURRENT_FILTERS),n=new o.ElementCreator("div",u.CssClasses.ACCORDION_MENU);t.getElement().addEventListener("click",(e=>{e.target===t.getElement()&&(t.getElement().classList.toggle(u.CssClasses.ACCORDION_BUTTON_ACTIVE),n.getElement().classList.toggle(u.CssClasses.ACCORDION_MENU_ACTIVE))})),this.currentFiltersView=n,e.addInnerElement(t),e.addInnerElement(n),this.viewElementCreator.addInnerElement(e)}addActiveFilters(e){e.forEach((e=>{var t;const n=new o.ElementCreator("div",u.CssClasses.CURRENT_FILTER,e);null===(t=this.currentFiltersView)||void 0===t||t.addInnerElement(n)}))}updateCurrentFiltersView(){for(var e,t,n,s,i,r,a,o,d;null===(e=this.currentFiltersView)||void 0===e?void 0:e.getElement().firstChild;)null===(n=null===(t=this.currentFiltersView)||void 0===t?void 0:t.getElement().firstChild)||void 0===n||n.remove();const l=[];if((null===(s=this.searchInput)||void 0===s?void 0:s.value)&&l.push(`Search: ${null===(i=this.searchInput)||void 0===i?void 0:i.value}`),((null===(r=this.minPriceInput)||void 0===r?void 0:r.value)||(null===(a=this.maxPriceInput)||void 0===a?void 0:a.value))&&l.push(`Price(USD): ${(null===(o=this.minPriceInput)||void 0===o?void 0:o.value)||"0"} - ${(null===(d=this.maxPriceInput)||void 0===d?void 0:d.value)||"∞"}`),this.brands.size){const e=[...this.brands].map((e=>`"${e.value}"`)).join(", ");l.push(`Brands: ${e}`)}if(this.sockets.size){const e=[...this.sockets].map((e=>`"${e.value}"`)).join(", ");l.push(`Sockets: ${e}`)}if(this.coresAmount.size){const e=[...this.coresAmount].map((e=>`"${e.value}"`)).join(", ");l.push(`Cores amount: ${e}`)}this.addActiveFilters(l)}addSearchBar(){const e=new d.default(u.CssClasses.FILTERS,u.CssClasses.SEARCH_INPUT,u.INPUT_LABEL.SEARCH_INPUT,u.INITIAL_VALUE.INPUT,u.INPUT_TYPE.SEARCH_INPUT,u.PLACEHOLDER.SEARCH_INPUT),t=e.getInputElement();this.searchInput=t,t.addEventListener("keydown",this.searchBarCallback.bind(this)),this.viewElementCreator.addInnerElement(e.getElement())}searchBarCallback(e){return s(this,void 0,void 0,(function*(){if(!this.searchInput)throw new Error;"Enter"!==e.code&&"Enter"!==e.key||(yield this.getFilteredProducts(),this.updateCurrentFiltersView())}))}addSortBar(){const e=new o.ElementCreator("select",u.CssClasses.SORT);u.SORT_OPTIONS.forEach((t=>{const n=new o.ElementCreator("option",u.CssClasses.SORT_OPTION,t.TEXT).getElement();n instanceof HTMLOptionElement&&(n.value=t.VALUE),e.addInnerElement(n)}));const t=e.getElement();t instanceof HTMLSelectElement&&(this.sortBar=t,t.value=u.INITIAL_VALUE.SORT_BAR),t.addEventListener("change",this.sortBarCallback.bind(this)),this.viewElementCreator.addInnerElement(t)}sortBarCallback(){return s(this,void 0,void 0,(function*(){yield this.getFilteredProducts()}))}addPriceBlock(){const e=new o.ElementCreator("div",u.CssClasses.FILTERS_BLOCK),t=new o.ElementCreator("header",u.CssClasses.FILTERS_HEADER,u.TEXT.PRICE_HEADER),n=new o.ElementCreator("div",u.CssClasses.PRICE_LINE);this.addPriceLine(n),e.addInnerElement(t.getElement()),e.addInnerElement(n.getElement()),this.viewElementCreator.addInnerElement(e.getElement())}addPriceLine(e){const t=new d.default(u.CssClasses.FILTERS,u.CssClasses.PRICE_INPUT,u.INPUT_LABEL.PRICE_MIN_INPUT,u.INITIAL_VALUE.INPUT,u.INPUT_TYPE.PRICE_INPUT,u.PLACEHOLDER.PRICE_INPUT);this.minPriceInput=t.getInputElement(),t.getInputElement().addEventListener("keydown",this.priceKeyDownCallback.bind(this)),t.getInputElement().addEventListener("input",this.priceInputCallback.bind(this));const n=new o.ElementCreator("div",u.CssClasses.PRICE_SPLITTER),s=new d.default(u.CssClasses.FILTERS,u.CssClasses.PRICE_INPUT,u.INPUT_LABEL.PRICE_MAX_INPUT,u.INITIAL_VALUE.INPUT,u.INPUT_TYPE.PRICE_INPUT,u.PLACEHOLDER.PRICE_INPUT);this.maxPriceInput=s.getInputElement(),s.getInputElement().addEventListener("keydown",this.priceKeyDownCallback.bind(this)),s.getInputElement().addEventListener("input",this.priceInputCallback.bind(this)),e.addInnerElement(t.getElement()),e.addInnerElement(n.getElement()),e.addInnerElement(s.getElement())}priceKeyDownCallback(e){"KeyE"!==e.code&&"e"!==e.key||e.preventDefault()}priceInputCallback(){return s(this,void 0,void 0,(function*(){yield this.getFilteredProducts.call(this),this.updateCurrentFiltersView()}))}addBrandsList(){return s(this,void 0,void 0,(function*(){const e=new o.ElementCreator("div",u.CssClasses.FILTERS_BLOCK),t=new o.ElementCreator("header",u.CssClasses.FILTERS_HEADER,u.TEXT.BRANDS_HEADER),n=new o.ElementCreator("ul",u.CssClasses.BRANDS_LIST);try{const{manufacturers:e}=yield r.ProductAPI.getFiltersData(u.CATEGORY_ID);e.forEach((e=>{const t=new o.ElementCreator("li",u.CssClasses.BRANDS_LINE),s=new d.default(u.CssClasses.FILTERS,u.CssClasses.CHECKBOX_INPUT,`${e.term} (${e.count})`,`${e.term}`,u.INPUT_TYPE.BRANDS_INPUT,u.PLACEHOLDER.BRANDS_INPUT);t.addInnerElement(s.getElement()),n.addInnerElement(t)}))}catch(e){console.log(e)}n.getElement().addEventListener("change",this.brandsListCallback.bind(this)),e.addInnerElement(t),e.addInnerElement(n),this.viewElementCreator.addInnerElement(e)}))}addSocketsList(){return s(this,void 0,void 0,(function*(){const e=new o.ElementCreator("div",u.CssClasses.FILTERS_BLOCK),t=new o.ElementCreator("header",u.CssClasses.FILTERS_HEADER,u.TEXT.SOCKETS_HEADER),n=new o.ElementCreator("ul",u.CssClasses.BRANDS_LIST);try{const{sockets:e}=yield r.ProductAPI.getFiltersData(u.CATEGORY_ID);e.forEach((e=>{const t=new o.ElementCreator("li",u.CssClasses.BRANDS_LINE),s=new d.default(u.CssClasses.FILTERS,u.CssClasses.CHECKBOX_INPUT,`${e.term} (${e.count})`,`${e.term}`,u.INPUT_TYPE.BRANDS_INPUT,u.PLACEHOLDER.BRANDS_INPUT);t.addInnerElement(s.getElement()),n.addInnerElement(t)}))}catch(e){console.log(e)}n.getElement().addEventListener("change",this.socketsListCallback.bind(this)),e.addInnerElement(t),e.addInnerElement(n),this.viewElementCreator.addInnerElement(e)}))}addCoresAmountList(){return s(this,void 0,void 0,(function*(){const e=new o.ElementCreator("div",u.CssClasses.FILTERS_BLOCK),t=new o.ElementCreator("header",u.CssClasses.FILTERS_HEADER,u.TEXT.CORES_AMOUNT_HEADER),n=new o.ElementCreator("ul",u.CssClasses.BRANDS_LIST);try{const{coresAmount:e}=yield r.ProductAPI.getFiltersData(u.CATEGORY_ID);e.forEach((e=>{const t=new o.ElementCreator("li",u.CssClasses.BRANDS_LINE),s=new d.default(u.CssClasses.FILTERS,u.CssClasses.CHECKBOX_INPUT,`${e.term} (${e.count})`,`${e.term}`,u.INPUT_TYPE.BRANDS_INPUT,u.PLACEHOLDER.BRANDS_INPUT);t.addInnerElement(s.getElement()),n.addInnerElement(t)}))}catch(e){console.log(e)}n.getElement().addEventListener("change",this.coresAmountListCallback.bind(this)),e.addInnerElement(t),e.addInnerElement(n),this.viewElementCreator.addInnerElement(e)}))}brandsListCallback(e){return s(this,void 0,void 0,(function*(){e.target instanceof HTMLInputElement&&e.target.closest("input")&&(!0===e.target.checked&&(this.brands.add(e.target),this.getFilteredProducts.call(this)),!1===e.target.checked&&(this.brands.delete(e.target),this.getFilteredProducts.call(this)),this.updateCurrentFiltersView())}))}socketsListCallback(e){return s(this,void 0,void 0,(function*(){e.target instanceof HTMLInputElement&&e.target.closest("input")&&(!0===e.target.checked&&(this.sockets.add(e.target),this.getFilteredProducts.call(this)),!1===e.target.checked&&(this.sockets.delete(e.target),this.getFilteredProducts.call(this)),this.updateCurrentFiltersView())}))}coresAmountListCallback(e){return s(this,void 0,void 0,(function*(){e.target instanceof HTMLInputElement&&e.target.closest("input")&&(!0===e.target.checked&&(this.coresAmount.add(e.target),this.getFilteredProducts.call(this)),!1===e.target.checked&&(this.coresAmount.delete(e.target),this.getFilteredProducts.call(this)),this.updateCurrentFiltersView())}))}addResetButton(){const e=new o.ElementCreator("button",u.CssClasses.RESET_BUTTON,u.TEXT.RESET_BUTTON);e.getElement().addEventListener("click",this.resetButtonCallback.bind(this)),this.viewElementCreator.addInnerElement(e)}resetButtonCallback(){return s(this,void 0,void 0,(function*(){[this.searchInput,this.minPriceInput,this.maxPriceInput].forEach((e=>{const t=e;t&&(t.value=u.INITIAL_VALUE.INPUT,t.focus(),t.blur())})),this.sortBar&&(this.sortBar.value=u.INITIAL_VALUE.SORT_BAR),this.resetCheckboxElements(this.brands),this.resetCheckboxElements(this.sockets),this.resetCheckboxElements(this.coresAmount),this.updateCurrentFiltersView(),yield this.getFilteredProducts()}))}resetCheckboxElements(e){[...e].forEach((t=>{const n=t;n.checked=!1,e.delete(n)}))}getFilteredProducts(){var e,t;return s(this,void 0,void 0,(function*(){const n=null===(e=this.searchInput)||void 0===e?void 0:e.value,s=null===(t=this.sortBar)||void 0===t?void 0:t.value;if(!this.minPriceInput||!this.maxPriceInput)throw new Error;const i=Number(this.minPriceInput.value||"0"),a=Number(this.maxPriceInput.value||"*"),o=String(100*i||"0"),d=String(100*a||"*"),l=[...this.brands].map((e=>`"${e.value}"`)).join(","),c=[...this.sockets].map((e=>`"${e.value}"`)).join(","),E=[...this.coresAmount].map((e=>`"${e.value}"`)).join(",");console.log(E),yield r.ProductAPI.getFilteredProducts({categoryId:u.CATEGORY_ID,search:n,sort:s,minPriceValue:o,maxPriceValue:d,brands:l,sockets:c,coresAmount:E})}))}}t.FiltersView=c},453:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.BREAD_CRUMBS_INFO=t.CATEGORY_TEXT=t.CATEGORY_CLASSES=void 0;const s=n(413);t.CATEGORY_CLASSES={CATALOG:"category",TITLE:"category__title",CONTENT:"category__content",ASIDE:"category__content-aside",PRODUCTS:"category__content-products"},t.CATEGORY_TEXT={TITLE:"Catalog",CONTENT:"",ASIDE:"",PRODUCTS:""},t.BREAD_CRUMBS_INFO=[{text:"PC-Components",isCurrent:!1,pagePath:s.Pages.CATALOG},{text:"Processors",isCurrent:!0,pagePath:s.Pages.PROCESSORS}]},7:function(e,t,n){var s=this&&this.__awaiter||function(e,t,n,s){return new(n||(n=Promise))((function(i,r){function a(e){try{d(s.next(e))}catch(e){r(e)}}function o(e){try{d(s.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}d((s=s.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const i=n(644),r=n(111),a=n(453),o=n(942),d=n(852),l=n(493),u=n(97);class c extends i.View{constructor(e){super("section",a.CATEGORY_CLASSES.CATALOG),this.router=e,this.currentPage=0,this.totalPages=0,this.content=null,this.contentProducts=null,this.cardsWrapper=null,this.query={categoryId:"0c1874b3-f13a-4879-ae0c-4cc69c02d71c",search:"",sort:"price desc",minPriceValue:"0",maxPriceValue:"*",brands:""},this.configView()}configView(){var e;this.addTitle(),this.addContent(),this.addAside(),this.addProductsWrapper(),null===(e=this.content)||void 0===e||e.getElement().addEventListener("click",this.cardWrapperClickHandler.bind(this))}addTitle(){const e=new r.ElementCreator("h1",a.CATEGORY_CLASSES.TITLE,a.CATEGORY_TEXT.TITLE);this.viewElementCreator.addInnerElement(e)}addContent(){const e=new r.ElementCreator("div",a.CATEGORY_CLASSES.CONTENT,a.CATEGORY_TEXT.CONTENT);this.content=e,this.viewElementCreator.addInnerElement(e)}addAside(){var e;const t=new r.ElementCreator("aside",a.CATEGORY_CLASSES.ASIDE,a.CATEGORY_TEXT.ASIDE),n=new l.FiltersView(this.router);t.addInnerElement(n.getHTMLElement()),null===(e=this.content)||void 0===e||e.addInnerElement(t),document.addEventListener("myCustomEvent",(e=>{var t;(0,d.clearElement)(null===(t=this.contentProducts)||void 0===t?void 0:t.getElement());const n=e.detail.data;this.currentPage=e.detail.currentPage,this.totalPages=e.detail.totalPages,this.query=e.detail.query;const s=n.map((e=>{var t,n,s;const i=e.name.en;let r="";e.metaDescription&&(r=e.metaDescription.en);const a=e.masterVariant.prices[0].value.centAmount/100,o=null===(s=null===(n=null===(t=e.masterVariant.prices[0])||void 0===t?void 0:t.discounted)||void 0===n?void 0:n.value)||void 0===s?void 0:s.centAmount;let d;o&&(d=o/100);const l=e.masterVariant.images[0].url,{id:u}=e;return{name:i,description:r,price:a,image:l,discount:d,id:u}}));this.addBreadCrumbs(),this.createProductsWrapper(),this.createAllProductCards(s),this.createPaginator()}))}createPaginator(){var e;const t=new r.ElementCreator("div","paginator",""),n=new r.ElementCreator("button","paginator__btn","<");0===this.currentPage&&n.getElement().setAttribute("disabled",""),n.getElement().addEventListener("click",(()=>{this.currentPage>0&&(this.currentPage-=1,this.fetchFilteredProducts())})),t.addInnerElement(n);for(let e=0;e<this.totalPages;e+=1){const n=new r.ElementCreator("button","paginator__btn",`${e+1}`);this.currentPage===e&&n.getElement().classList.add("active"),n.getElement().addEventListener("click",(()=>{this.currentPage=e,this.fetchFilteredProducts()})),t.addInnerElement(n)}const s=new r.ElementCreator("button","paginator__btn",">");this.currentPage===this.totalPages-1&&s.getElement().setAttribute("disabled",""),s.getElement().addEventListener("click",(()=>{this.currentPage<this.totalPages-1&&(this.currentPage+=1,this.fetchFilteredProducts())})),t.addInnerElement(s),null===(e=this.contentProducts)||void 0===e||e.addInnerElement(t)}fetchFilteredProducts(){return s(this,void 0,void 0,(function*(){const e=this.query;yield o.ProductAPI.getFilteredProducts(e,this.currentPage)}))}addProductsWrapper(){var e;return s(this,void 0,void 0,(function*(){const t=new r.ElementCreator("div",a.CATEGORY_CLASSES.PRODUCTS,"");this.contentProducts=t,null===(e=this.content)||void 0===e||e.addInnerElement(t),this.addBreadCrumbs(),this.createProductsWrapper(),this.fetchFilteredProducts(),this.createPaginator()}))}addBreadCrumbs(){var e;const t=new u.BreadCrumbsCreator(a.BREAD_CRUMBS_INFO,this.router);null===(e=this.contentProducts)||void 0===e||e.addInnerElement(t.getElement())}createProductsWrapper(){var e;const t=new r.ElementCreator("div","cards-wrapper","");this.cardsWrapper=t,null===(e=this.contentProducts)||void 0===e||e.addInnerElement(t)}createAllProductCards(e){return s(this,void 0,void 0,(function*(){e.forEach((e=>{var t;null===(t=this.cardsWrapper)||void 0===t||t.addInnerElement(this.createProductCard(e))}))}))}createProductCard(e){const{name:t}=e,{description:n}=e,{price:s}=e,{image:i}=e,{discount:a}=e,{id:o}=e,d=new r.ElementCreator("div","product-card",""),l=new r.ElementCreator("h2","product-card__name",`${t}`),u=new r.ElementCreator("img","product-card__image",""),c=new r.ElementCreator("div","product-card__price",`$${s}`),E=new r.ElementCreator("div","product-card__discount",`$${a}`),h=new r.ElementCreator("div","product-card__description",`${n}`);return u.getElement().setAttribute("src",`${i}`),d.addInnerElement(l),d.addInnerElement(u),d.addInnerElement(c),d.addInnerElement(E),d.addInnerElement(h),d.getElement().dataset.id=o,d}cardWrapperClickHandler(e){const t=e.target;if(t instanceof HTMLElement){const e=t.closest(".product-card");if(e){const t=e.getAttribute("data-id");this.router.navigate(`catalog/${t}`)}}}}t.default=c},578:function(e,t,n){var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=n(111),r=n(644),a=s(n(563)),o=n(413),d="index",l="index__title",u="index__wrapper",c="index__btn",E="primary-button",h={LOGIN:"Login",REGISTRATION:"Registration"};class m extends r.View{constructor(e){super("section",d),this.headerLinkElements=new Map,this.configView(e)}configView(e){const t=new i.ElementCreator("h1",l);this.viewElementCreator.addInnerElement(t);const n=new i.ElementCreator("div",u);this.viewElementCreator.addInnerElement(n),Object.keys(h).forEach((t=>{const s={name:h[t],callback:()=>e.navigate(o.Pages[t])},i=new a.default(s.name,s.callback,this.headerLinkElements);i.getHTMLElement().classList.add(c,E),n.addInnerElement(i.getHTMLElement()),this.headerLinkElements.set(o.Pages[t].toUpperCase(),i)}))}}t.default=m},684:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.KEY_FOR_SAVE=t.INITIAL_VALUE=t.TYPE=t.TEXT=t.CssClasses=void 0,t.CssClasses={TITLE:"login__title",LOGIN:"login",ERROR_LINE:"login_error-line",ERROR_LINE_SHOW:"show",FORM:"login__form",EMAIL_INPUT:"email",PASSWORD_INPUT:"password",INPUT_INVALID:"invalid",LOGIN_BUTTON:["login__button","primary-button"],SHOW_HIDE_ICON:["material-symbols-outlined","login__show-hide-icon"],REGISTRATION_LINK:["login__registration-link"]},t.TEXT={TITLE:"LOGIN",ERROR_LINE:"Incorrect username or password",FORM:"",EMAIL_INPUT:"Email",PASSWORD_INPUT:"Password",BUTTON:"Login",SHOW_HIDE_ICON:{VISIBLE:"visibility",VISIBLE_OFF:"visibility_off"},REGISTRATION_LINK:"Sign Up"},t.TYPE={INPUT_TYPE:{EMAIL:"text",PASSWORD:"password",TEXT:"text"},BUTTON_TYPE:"submit"},t.INITIAL_VALUE={INPUT_VALUE:{EMAIL:"",PASSWORD:""},PLACEHOLDER:{EMAIL:"",PASSWORD:""},ERROR_LINE:""},t.KEY_FOR_SAVE={LOGIN_STATUS:"login-status"}},291:function(e,t,n){var s=this&&this.__awaiter||function(e,t,n,s){return new(n||(n=Promise))((function(i,r){function a(e){try{d(s.next(e))}catch(e){r(e)}}function o(e){try{d(s.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}d((s=s.apply(e,t||[])).next())}))},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=n(155),a=n(770),o=n(413),d=n(111),l=i(n(507)),u=n(644),c=n(684),E=n(442);class h extends u.View{constructor(e,t,n){super("section",c.CssClasses.LOGIN),this.router=e,this.observer=t,this.state=n,this.form=null,this.errorLine=null,this.emailInput=null,this.passwordInput=null,this.configView()}configView(){this.addTitle(),this.addErrorLine(),this.addForm(),this.configForm(),this.addRegistrationLink()}configForm(){this.addEmailInput(),this.addPasswordInput(),this.addLoginButton()}addTitle(){const e=new d.ElementCreator("h1",c.CssClasses.TITLE,c.TEXT.TITLE);this.viewElementCreator.addInnerElement(e)}addErrorLine(){const e=new d.ElementCreator("div",c.CssClasses.ERROR_LINE,c.TEXT.ERROR_LINE).getElement();this.errorLine=e,this.viewElementCreator.addInnerElement(e)}addForm(){const e=new d.ElementCreator("form",c.CssClasses.FORM,c.TEXT.FORM);this.form=e,this.viewElementCreator.addInnerElement(e.getElement())}addEmailInput(){var e;const t=new l.default(c.CssClasses.LOGIN,c.CssClasses.EMAIL_INPUT,c.TEXT.EMAIL_INPUT,c.INITIAL_VALUE.INPUT_VALUE.EMAIL,c.TYPE.INPUT_TYPE.EMAIL,c.INITIAL_VALUE.PLACEHOLDER.EMAIL),n=t.getInputElement();this.emailInput=t,n.addEventListener("input",(()=>{this.inputValidation(t,(()=>E.Validator.emailField(n.value))),this.inputKeydownFn()})),null===(e=this.form)||void 0===e||e.addInnerElement(t.getElement())}addPasswordInput(){var e;const t=new l.default(c.CssClasses.LOGIN,c.CssClasses.PASSWORD_INPUT,c.TEXT.PASSWORD_INPUT,c.INITIAL_VALUE.INPUT_VALUE.PASSWORD,c.TYPE.INPUT_TYPE.PASSWORD,c.INITIAL_VALUE.PLACEHOLDER.PASSWORD);this.addShowHidePasswordIcon(t);const n=t.getInputElement();this.passwordInput=t,n.addEventListener("input",(()=>{this.inputValidation(t,(()=>E.Validator.passwordField(n.value))),this.inputKeydownFn()})),null===(e=this.form)||void 0===e||e.addInnerElement(t.getElement())}addShowHidePasswordIcon(e){const t=new d.ElementCreator("span",c.CssClasses.SHOW_HIDE_ICON,c.TEXT.SHOW_HIDE_ICON.VISIBLE);t.getElement().addEventListener("click",this.showHidePasswordFn.bind(this,t)),e.addInnerElement(t)}addLoginButton(){var e;const t=new d.ElementCreator("button",c.CssClasses.LOGIN_BUTTON,c.TEXT.BUTTON).getElement();t.setAttribute("type",c.TYPE.BUTTON_TYPE),t.addEventListener("click",(e=>this.loginButtonClickFn.call(this,e))),null===(e=this.form)||void 0===e||e.addInnerElement(t)}addRegistrationLink(){const e=new d.ElementCreator("a",c.CssClasses.REGISTRATION_LINK,c.TEXT.REGISTRATION_LINK).getElement();e.addEventListener("click",(e=>this.registrationLinkClickFn.call(this,e))),this.viewElementCreator.addInnerElement(e)}inputKeydownFn(){var e;null===(e=this.errorLine)||void 0===e||e.classList.remove(c.CssClasses.ERROR_LINE_SHOW)}inputValidation(e,t){const n=e.getInputElement(),s=e.getErrorLine(),i=t();return i?(n.classList.add(c.CssClasses.INPUT_INVALID),s.textContent=`${i}`,!1):(n.classList.remove(c.CssClasses.INPUT_INVALID),s.textContent=c.INITIAL_VALUE.ERROR_LINE,!0)}loginButtonClickFn(e){var t;return s(this,void 0,void 0,(function*(){if(!this.emailInput||!this.passwordInput)throw new Error;e.preventDefault();if(!this.isFormsValid.call(this,this.emailInput,this.passwordInput))return;const n=this.emailInput.getInputElement().value,s=this.passwordInput.getInputElement().value;(yield r.CustomerAPI.loginCustomer(n,s))===a.AuthStatusCodes.successfulPasswordTokenFetch?(this.state.setValue(c.KEY_FOR_SAVE.LOGIN_STATUS,"true"),this.observer.userIsLoggedIn(this.state),this.router.navigate(o.Pages.INDEX)):null===(t=this.errorLine)||void 0===t||t.classList.add(c.CssClasses.ERROR_LINE_SHOW)}))}isFormsValid(e,t){const n=this.inputValidation.call(this,e,(()=>E.Validator.emailField(e.getInputElement().value))),s=this.inputValidation.call(this,t,(()=>E.Validator.passwordField(t.getInputElement().value)));return!(!n||!s)}showHidePasswordFn(e){var t,n;const s=e.getElement();(null===(t=this.passwordInput)||void 0===t?void 0:t.getInputElement().getAttribute("type"))===c.TYPE.INPUT_TYPE.PASSWORD?(this.passwordInput.getInputElement().setAttribute("type",c.TYPE.INPUT_TYPE.TEXT),s.textContent=c.TEXT.SHOW_HIDE_ICON.VISIBLE_OFF):(null===(n=this.passwordInput)||void 0===n||n.getInputElement().setAttribute("type",c.TYPE.INPUT_TYPE.PASSWORD),s.textContent=c.TEXT.SHOW_HIDE_ICON.VISIBLE)}registrationLinkClickFn(e){e.preventDefault(),this.router.navigate(o.Pages.REGISTRATION)}}t.default=h},707:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});const s=n(644);class i extends s.View{constructor(){super("main","main")}}t.default=i},15:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});const s=n(644),i=n(111),r=n(413);class a extends s.View{constructor(e){super("section","not-found"),this.router=e,this.configView()}configView(){this.addImageBlock(),this.addTextBlock()}addImageBlock(){const e=new i.ElementCreator("div","not-found__image-block","");this.viewElementCreator.addInnerElement(e);const t=new i.ElementCreator("img","not-found__image-block-img","");t.getElement().setAttribute("src","./assets/images/error-404.png"),e.addInnerElement(t)}addTextBlock(){const e=new i.ElementCreator("div","not-found__text","");this.viewElementCreator.addInnerElement(e);const t=new i.ElementCreator("h1","not-found__text__head","Error 404");e.addInnerElement(t);const n=new i.ElementCreator("div","not-found__text-l","Page Not Found");e.addInnerElement(n);const s=new i.ElementCreator("div","not-found__text-m","We broke something!");e.addInnerElement(s);const r=new i.ElementCreator("div","not-found__text-s","Or you did...");e.addInnerElement(r);const a=new i.ElementCreator("a","not-found__text-link","Back to main").getElement();a.addEventListener("click",(e=>this.registrationLinkClickFn.call(this,e))),e.addInnerElement(a)}registrationLinkClickFn(e){e.preventDefault(),this.router.navigate(r.Pages.INDEX)}}t.default=a},392:function(e,t,n){var s=this&&this.__awaiter||function(e,t,n,s){return new(n||(n=Promise))((function(i,r){function a(e){try{d(s.next(e))}catch(e){r(e)}}function o(e){try{d(s.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}d((s=s.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const i=n(111),r=n(644),a=n(942),o="product",d="product__title",l="product__top",u=["product__slider","slider"],c="slider__nav",E="slider__item",h="slider__main-item",m="slider__image",I=["product__buy","buy"],_="buy__price",C="buy__discount-price",p="buy__price_disable",T="buy__button",v="product__bot",A=["product__atributes","atributes"],g=["product__subtitle","atributes__title"],S="atributes__row",P="atributes__key",L="atributes__value",f=["product__description","description"],R=["product__subtitle","description__title"],O="description__text";class N extends r.View{constructor(e){super("section",o),this.sliderMainItem=new i.ElementCreator("div",h,""),this.currentProductName="",this.picturesPaths=[],this.curentIndex=null,this.papaSliderMainItem=null,this.papaSliderNav=null,this.configView(e)}configView(e){return s(this,void 0,void 0,(function*(){const t=yield this.getData(e);this.createTitle(t.name),this.createTop(t.imageArr,t.price,t.discount),this.createBot(t.atributesArr,t.descriptions)}))}createTitle(e){const t=new i.ElementCreator("h1",d,e);this.currentProductName=e,this.viewElementCreator.addInnerElement(t)}createTop(e,t,n){const s=new i.ElementCreator("div",l,""),r=this.createSlider(e);s.addInnerElement(r);const a=this.createBuy(t,n);s.addInnerElement(a),this.viewElementCreator.addInnerElement(s)}createSlider(e){const t=new i.ElementCreator("div",u,"");t.getElement().addEventListener("click",this.clickSliderHandler.bind(this));const n=new i.ElementCreator("div",c,"");n.getElement().addEventListener("mouseover",this.sliderNavHoverHandler.bind(this)),t.addInnerElement(n),e.forEach((e=>{const t=this.createImage(e.url,E,m);this.picturesPaths.push(e.url),n.addInnerElement(t)}));const s=this.sliderMainItem,r=e[0].url;return this.setSliderMainItem(r),t.addInnerElement(s),t}setSliderMainItem(e){const t=new i.ElementCreator("img",m,"");t.getElement().setAttribute("src",e),this.sliderMainItem.getElement().innerHTML="",this.sliderMainItem.addInnerElement(t)}createImage(e,t,n){const s=new i.ElementCreator("div",t,""),r=new i.ElementCreator("img",n,"");return r.getElement().setAttribute("src",e),s.addInnerElement(r),s.getElement()}createBuy(e,t){const n=new i.ElementCreator("div",I,""),s=new i.ElementCreator("div",_,`${e} $`);if(n.addInnerElement(s),void 0!==t){const e=new i.ElementCreator("div",C,`${t} $`);s.getElement().classList.add(p),n.addInnerElement(e)}const r=new i.ElementCreator("button",T,"Add to cart");return n.addInnerElement(r),n}createBot(e,t){const n=new i.ElementCreator("div",v,""),s=this.createAtributes(e);n.addInnerElement(s);const r=this.createDescription(t);n.addInnerElement(r),this.viewElementCreator.addInnerElement(n)}createAtributes(e){const t=new i.ElementCreator("div",A,""),n=new i.ElementCreator("h2",g,"Specifications:");return t.addInnerElement(n),e.forEach((e=>{const n=e.name,s=e.value,r=new i.ElementCreator("div",S,""),a=new i.ElementCreator("div",P,`${n}:  `);r.addInnerElement(a);const o=new i.ElementCreator("div",L,s.toString());r.addInnerElement(o),t.addInnerElement(r)})),t}createDescription(e){const t=new i.ElementCreator("div",f,""),n=new i.ElementCreator("h2",R,"Description:");t.addInnerElement(n);const s=new i.ElementCreator("p",O,e);return t.addInnerElement(s),t}getData(e){var t,n,i,r,o,d;return s(this,void 0,void 0,(function*(){const s=yield a.ProductAPI.getProduct(e),l=s.masterData.current.name.en,u=s.masterData.current.description.en,c=s.masterData.current.masterVariant.prices[0].value.centAmount/100,E=null===(d=null===(o=null===(r=null===(i=null===(n=null===(t=s.masterData)||void 0===t?void 0:t.current)||void 0===n?void 0:n.masterVariant)||void 0===i?void 0:i.prices[0])||void 0===r?void 0:r.discounted)||void 0===o?void 0:o.value)||void 0===d?void 0:d.centAmount;let h;E&&(h=E/100);return{name:l,descriptions:u,price:c,discount:h,imageArr:s.masterData.current.masterVariant.images,atributesArr:s.masterData.current.masterVariant.attributes}}))}sliderNavHoverHandler(e){const t=e.target;if(t instanceof HTMLElement){const e=t.closest(".slider__image");if(e){const t=e.getAttribute("src");null!==t&&this.setSliderMainItem(t)}}}clickSliderHandler(e){const t=e.target;if(t instanceof HTMLElement){const e=t.closest(".slider__image");if(e){const t=e.getAttribute("src");null!==t&&this.createPapaSlider(this.currentProductName,t,this.picturesPaths)}}}createPapaSlider(e,t,n){this.setCurrentIndex(t),window.scrollTo(0,0),document.body.classList.add("scroll-lock");const s=new i.ElementCreator("div","papa-slider",""),r=new i.ElementCreator("h2","papa-slider__title",e);s.addInnerElement(r);const a=new i.ElementCreator("h3","papa-slider__counter",`Photo: ${n.length}`);s.addInnerElement(a);const o=new i.ElementCreator("h3","papa-slider__wrapper",""),d=new i.ElementCreator("button","papa-slider__prev-btn","<");d.getElement().addEventListener("click",this.papaSliderPrevBtnClickHandler.bind(this)),o.addInnerElement(d);const l=new i.ElementCreator("div","papa-slider__main-elem","");this.papaSliderMainItem=l,o.addInnerElement(l);const u=new i.ElementCreator("button","papa-slider__next-btn",">");u.getElement().addEventListener("click",this.papaSliderNextBtnClickHandler.bind(this)),o.addInnerElement(u),s.addInnerElement(o);const c=new i.ElementCreator("div","papa-slider__nav","");n.forEach((e=>{const t=this.createImage(e,"papa-slider__nav-item","papa-slider__nav-image");c.addInnerElement(t)})),this.papaSliderNav=c,s.addInnerElement(c),this.setPapaSliderMainItem();const E=new i.ElementCreator("button","papa-slider__close-btn","✖");E.getElement().addEventListener("click",this.papaSliderCloseBtnClickHandler.bind(this)),s.addInnerElement(E),document.body.append(s.getElement())}setPapaSliderMainItem(){const e=new i.ElementCreator("img","papa-slider__main-image","");e.getElement().setAttribute("src",this.picturesPaths[Number(this.curentIndex)]),this.papaSliderMainItem.getElement().innerHTML="",this.papaSliderMainItem.addInnerElement(e);[...this.papaSliderNav.getElement().childNodes].forEach(((e,t)=>{const n=e;n.classList.remove("papa-slider__nav-item_active"),t===this.curentIndex&&n.classList.add("papa-slider__nav-item_active")}))}papaSliderPrevBtnClickHandler(){this.curentIndex-=1,this.curentIndex<0&&(this.curentIndex=this.picturesPaths.length-1),this.setPapaSliderMainItem()}papaSliderNextBtnClickHandler(){this.curentIndex+=1,this.curentIndex>this.picturesPaths.length-1&&(this.curentIndex=0),this.setPapaSliderMainItem()}setCurrentIndex(e){const t=this.picturesPaths.findIndex((t=>t===e));this.curentIndex=t}papaSliderCloseBtnClickHandler(){var e;document.body.classList.remove("scroll-lock"),null===(e=document.body.lastElementChild)||void 0===e||e.remove()}}t.default=N},627:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.KEY_FOR_SAVE=t.INITIAL_VALUE=t.TYPE=t.SIGN_UP_TEXT=t.SIGN_UP_CLASSES=void 0,t.SIGN_UP_CLASSES={REGISTRATION:"registration",TITLE:"registration__title",EMAIL:"email",PASSWORD:"password",CONFIRM_PASSWORD:"confirm-password",FIRST_NAME:"first-name",LAST_NAME:"last-name",DATE_OF_BIRTH:"date-of-birth",CITY:"city",STREET:"street",POSTAL_CODE:"postal-code",COUNTRY:"country",ERROR_LINE:"error",REGISTER_BTN:"primary-button",LOGIN_BTN:"login__registration-link",SHOW_HIDE_ICON:["material-symbols-outlined","registration__show-hide-icon"],SET_DEFAULT_ADDRESS:"set-default",INPUT_INVALID:"invalid",ERROR_LINE_SHOW:"show"},t.SIGN_UP_TEXT={EMAIL:"Email",PASSWORD:"Password",CONFIRM_PASSWORD:"Confirm Password",FIRST_NAME:"First Name",LAST_NAME:"Last Name",DATE_OF_BIRTH:"Date of Birth",CITY:"City",STREET:"Street",POSTAL_CODE:"Postal Code",COUNTRY:"Country",TITLE:"Sign Up",REGISTER_BTN:"Create Account",LOGIN_BTN:"Login",ERROR_LINE:"",SET_DEFAULT_ADDRESS:"Set Default Address",SHOW_HIDE_ICON:{VISIBLE:"visibility",VISIBLE_OFF:"visibility_off"}},t.TYPE={INPUT_TYPE:{EMAIL:"email",PASSWORD:"password",TEXT:"text"},BUTTON_TYPE:"submit"},t.INITIAL_VALUE={INPUT_VALUE:{EMAIL:"",PASSWORD:""},PLACEHOLDER:{EMAIL:"",PASSWORD:""},ERROR_LINE:""},t.KEY_FOR_SAVE={LOGIN_STATUS:"login-status"}},156:function(e,t,n){var s=this&&this.__awaiter||function(e,t,n,s){return new(n||(n=Promise))((function(i,r){function a(e){try{d(s.next(e))}catch(e){r(e)}}function o(e){try{d(s.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}d((s=s.apply(e,t||[])).next())}))},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=n(155),a=n(413),o=n(111),d=i(n(507)),l=n(442),u=n(644),c=n(627),E=n(387);class h extends u.View{constructor(e,t,n){super("section",c.SIGN_UP_CLASSES.REGISTRATION),this.router=e,this.observer=t,this.state=n,this.form=null,this.btnsWrapper=null,this.firstNameInput=null,this.lastNameInput=null,this.dateOfBirthInput=null,this.emailInput=null,this.passwordInput=null,this.confirmPasswordInput=null,this.shippingAddressFieldSet=null,this.billingAddressFieldSet=null,this.cityShippingAddressInput=null,this.streetShippingAddressInput=null,this.postalCodeShippingAddressInput=null,this.countryShippingAddressInput=null,this.defaultShippingAddressInput=null,this.cityBillingAddressInput=null,this.streetBillingAddressInput=null,this.postalCodeBillingAddressInput=null,this.countryBillingAddressInput=null,this.defaultBillingAddressInput=null,this.errorLine=null,this.configView()}configView(){this.addTitle(),this.addForm(),this.configForm()}addTitle(){const e=new o.ElementCreator("h1",c.SIGN_UP_CLASSES.TITLE,c.SIGN_UP_TEXT.TITLE);this.viewElementCreator.addInnerElement(e)}addForm(){var e;this.form=new o.ElementCreator("form","registration__form"),null===(e=this.form)||void 0===e||e.getElement().addEventListener("submit",(e=>this.handleSubmit(e))),this.viewElementCreator.addInnerElement(this.form.getElement())}configForm(){this.addFirstNameInput(),this.addLastNameInput(),this.addDateOfBirthInput(),this.addEmailInput(),this.addPasswordInput(),this.addConfirmPasswordInput(),this.addShippingFieldSet(),this.addAddressInput(this.shippingAddressFieldSet,"shipping"),this.addCopyButton(),this.addBillingFieldSet(),this.addAddressInput(this.billingAddressFieldSet,"billing"),this.addErrorLine(),this.addControlButtons()}addFirstNameInput(){var e;const t=new d.default(c.SIGN_UP_CLASSES.REGISTRATION,c.SIGN_UP_CLASSES.FIRST_NAME,c.SIGN_UP_TEXT.FIRST_NAME,"","text",""),n=t.getInputElement();t.getInputElement().setAttribute("required",""),this.firstNameInput=n;const s=()=>{this.inputValidation(t,(()=>l.Validator.nameField(n.value))),this.inputKeydownFn()};n.addEventListener("input",s),n.addEventListener("focusin",s),null===(e=this.form)||void 0===e||e.addInnerElement(t.getElement())}addLastNameInput(){var e;const t=new d.default(c.SIGN_UP_CLASSES.REGISTRATION,c.SIGN_UP_CLASSES.LAST_NAME,c.SIGN_UP_TEXT.LAST_NAME,"","text",""),n=t.getInputElement();t.getInputElement().setAttribute("required",""),this.lastNameInput=n;const s=()=>{this.inputValidation(t,(()=>l.Validator.nameField(n.value))),this.inputKeydownFn()};n.addEventListener("input",s),n.addEventListener("focusin",s),null===(e=this.form)||void 0===e||e.addInnerElement(t.getElement())}addDateOfBirthInput(){var e;const t=new d.default(c.SIGN_UP_CLASSES.REGISTRATION,c.SIGN_UP_CLASSES.DATE_OF_BIRTH,c.SIGN_UP_TEXT.DATE_OF_BIRTH,"","date",""),n=t.getInputElement();t.getInputElement().setAttribute("required",""),this.dateOfBirthInput=n;const s=()=>{this.inputValidation(t,(()=>l.Validator.birthField(n.value))),this.inputKeydownFn()};n.addEventListener("input",s),n.addEventListener("focusin",s),null===(e=this.form)||void 0===e||e.addInnerElement(t.getElement())}addEmailInput(){var e;const t=new d.default(c.SIGN_UP_CLASSES.REGISTRATION,c.SIGN_UP_CLASSES.EMAIL,c.SIGN_UP_TEXT.EMAIL,"","email",""),n=t.getInputElement();t.getInputElement().setAttribute("required",""),this.emailInput=n;const s=()=>{this.inputValidation(t,(()=>l.Validator.emailField(n.value))),this.inputKeydownFn()};n.addEventListener("input",s),n.addEventListener("focusin",s),null===(e=this.form)||void 0===e||e.addInnerElement(t.getElement())}addPasswordInput(){var e;const t=new d.default(c.SIGN_UP_CLASSES.REGISTRATION,c.SIGN_UP_CLASSES.PASSWORD,c.SIGN_UP_TEXT.PASSWORD,"","password",""),n=t.getInputElement();t.getInputElement().setAttribute("required",""),this.passwordInput=n,this.addShowHidePasswordIcon(this.passwordInput,t);const s=()=>{var e;this.inputValidation(t,(()=>l.Validator.passwordField(n.value))),this.inputKeydownFn(),null===(e=this.confirmPasswordInput)||void 0===e||e.dispatchEvent(new Event("input"))};n.addEventListener("input",s),n.addEventListener("focusin",s),null===(e=this.form)||void 0===e||e.addInnerElement(t.getElement())}addConfirmPasswordInput(){var e;const t=new d.default(c.SIGN_UP_CLASSES.REGISTRATION,c.SIGN_UP_CLASSES.CONFIRM_PASSWORD,c.SIGN_UP_TEXT.CONFIRM_PASSWORD,"","password",""),n=t.getInputElement();t.getInputElement().setAttribute("required",""),this.confirmPasswordInput=n,this.addShowHidePasswordIcon(this.confirmPasswordInput,t);const s=()=>{var e;const s=null===(e=this.passwordInput)||void 0===e?void 0:e.value;void 0!==s&&(this.inputValidation(t,(()=>l.Validator.confirmPasswordField(n.value,s))),this.inputKeydownFn())};n.addEventListener("input",s),n.addEventListener("focusin",s),null===(e=this.form)||void 0===e||e.addInnerElement(t.getElement())}addShowHidePasswordIcon(e,t){const n=new o.ElementCreator("span",c.SIGN_UP_CLASSES.SHOW_HIDE_ICON,c.SIGN_UP_TEXT.SHOW_HIDE_ICON.VISIBLE);n.getElement().addEventListener("click",this.showHidePasswordFn.bind(this,e,n)),t.addInnerElement(n)}addAddressInput(e,t){e&&(this.addCityAddressInput(e,t),this.addStreetAddressInput(e,t),this.addPostalCodeAddressInput(e,t),this.addCountryAddressInput(e,t),this.addDefaultCheckbox(e,t))}addShippingFieldSet(){var e;const t=new o.ElementCreator("fieldset","fieldset");this.shippingAddressFieldSet=t;const n=new o.ElementCreator("legend","legend");n.getElement().textContent="Shipping Address",t.addInnerElement(n),null===(e=this.form)||void 0===e||e.addInnerElement(t)}addBillingFieldSet(){var e;const t=new o.ElementCreator("fieldset","fieldset");this.billingAddressFieldSet=t;const n=new o.ElementCreator("legend","legend");n.getElement().textContent="Billing Address",t.addInnerElement(n),null===(e=this.form)||void 0===e||e.addInnerElement(t)}addCityAddressInput(e,t){const n=new d.default(c.SIGN_UP_CLASSES.REGISTRATION,c.SIGN_UP_CLASSES.CITY,c.SIGN_UP_TEXT.CITY,"","text",""),s=n.getInputElement();"shipping"===t?this.cityShippingAddressInput=s:"billing"===t&&(this.cityBillingAddressInput=s);const i=()=>{this.inputValidation(n,(()=>l.Validator.cityField(s.value))),this.inputKeydownFn()};s.addEventListener("input",i),s.addEventListener("focusin",i),null==e||e.addInnerElement(n.getElement())}addStreetAddressInput(e,t){const n=new d.default(c.SIGN_UP_CLASSES.REGISTRATION,c.SIGN_UP_CLASSES.STREET,c.SIGN_UP_TEXT.STREET,"","text",""),s=n.getInputElement();"shipping"===t?this.streetShippingAddressInput=s:"billing"===t&&(this.streetBillingAddressInput=s);const i=()=>{this.inputValidation(n,(()=>l.Validator.streetField(s.value))),this.inputKeydownFn()};s.addEventListener("input",i),s.addEventListener("focusin",i),null==e||e.addInnerElement(n.getElement())}addPostalCodeAddressInput(e,t){const n=new d.default(c.SIGN_UP_CLASSES.REGISTRATION,c.SIGN_UP_CLASSES.POSTAL_CODE,c.SIGN_UP_TEXT.POSTAL_CODE,"","text",""),s=n.getInputElement();"shipping"===t?this.postalCodeShippingAddressInput=s:"billing"===t&&(this.postalCodeBillingAddressInput=s);const i=()=>{let e="";this.inputValidation(n,(()=>{var n,i,r,a;return"shipping"===t?e=null!==(i=null===(n=this.countryShippingAddressInput)||void 0===n?void 0:n.value)&&void 0!==i?i:"":"billing"===t&&(e=null!==(a=null===(r=this.countryBillingAddressInput)||void 0===r?void 0:r.value)&&void 0!==a?a:""),l.Validator.postalCodeField(s.value,e)})),this.inputKeydownFn()};s.addEventListener("input",(()=>i())),s.addEventListener("focusin",(()=>i())),null==e||e.addInnerElement(n.getElement())}addCountryAddressInput(e,t){const n=["USA","Russia"],s=["US","RU"],i=new o.ElementCreator("div",["registration__country-input-wrapper","primary-wrapper"]),r=new o.ElementCreator("label",["registration__country-label","primary-label"]);r.getElement().textContent="Country";const a=new o.ElementCreator("select",["registration__country-input","primary-input"]);for(let e=0;e<n.length;e+=1){const t=document.createElement("option");t.setAttribute("value",s[e]),t.textContent=n[e],a.getElement().appendChild(t)}i.addInnerElement(r.getElement()),r.addInnerElement(a.getElement());const d=a.getElement();"shipping"===t?(this.countryShippingAddressInput=d,this.countryShippingAddressInput.addEventListener("change",(()=>{var e;return null===(e=this.postalCodeShippingAddressInput)||void 0===e?void 0:e.dispatchEvent(new Event("input"))}))):"billing"===t&&(this.countryBillingAddressInput=d,this.countryBillingAddressInput.addEventListener("change",(()=>{var e;return null===(e=this.postalCodeBillingAddressInput)||void 0===e?void 0:e.dispatchEvent(new Event("input"))}))),null==e||e.addInnerElement(i.getElement())}addDefaultCheckbox(e,t){var n;const s=new d.default(c.SIGN_UP_CLASSES.REGISTRATION,c.SIGN_UP_CLASSES.SET_DEFAULT_ADDRESS,c.SIGN_UP_TEXT.SET_DEFAULT_ADDRESS,"","checkbox",""),i=s.getInputElement();"shipping"===t?this.defaultShippingAddressInput=i:"billing"===t&&(this.defaultBillingAddressInput=i),null==e||e.addInnerElement(s.getElement());(null===(n=s.getElement().firstChild)||void 0===n?void 0:n.firstChild).classList.remove("primary-input")}addErrorLine(){var e;const t=new o.ElementCreator("div",c.SIGN_UP_CLASSES.ERROR_LINE,c.SIGN_UP_TEXT.ERROR_LINE).getElement();this.errorLine=t,null===(e=this.form)||void 0===e||e.addInnerElement(t)}addControlButtons(){var e,t,n;this.btnsWrapper=new o.ElementCreator("div","form-buttons"),null===(e=this.btnsWrapper)||void 0===e||e.addInnerElement(this.addRegisterButton()),null===(t=this.btnsWrapper)||void 0===t||t.addInnerElement(this.addLoginButton()),null===(n=this.form)||void 0===n||n.addInnerElement(this.btnsWrapper.getElement())}addRegisterButton(){const e=new o.ElementCreator("button",c.SIGN_UP_CLASSES.REGISTER_BTN,c.SIGN_UP_TEXT.REGISTER_BTN);return e.getElement().setAttribute("type","submit"),e}addLoginButton(){const e=new o.ElementCreator("a",c.SIGN_UP_CLASSES.LOGIN_BTN,c.SIGN_UP_TEXT.LOGIN_BTN);return e.getElement().addEventListener("click",(()=>this.router.navigate(a.Pages.LOGIN))),e}addCopyButton(){var e;const t=new o.ElementCreator("button","primary-button","Set as Billing Address");t.getElement().setAttribute("type","button"),t.getElement().addEventListener("click",this.copyShippingAddressToBillingAddress.bind(this)),null===(e=this.form)||void 0===e||e.addInnerElement(t)}handleSubmit(e){var t,n;return s(this,void 0,void 0,(function*(){e.preventDefault();const s=this.getFormData(),i=document.querySelectorAll(".primary-error-line");let o=!0;if(i.forEach((e=>{var t;return""!==(null===(t=e.textContent)||void 0===t?void 0:t.trim())?(o=!1,""):""})),this.errorLine)if(o&&""!==(null===(t=this.emailInput)||void 0===t?void 0:t.value))try{const e=yield r.CustomerAPI.registerCustomer(s);201===e?(this.state.setValue(c.KEY_FOR_SAVE.LOGIN_STATUS,"true"),this.observer.userIsLoggedIn(this.state),this.router.navigate(a.Pages.INDEX),yield r.CustomerAPI.getCustomerInfo(),(0,E.createPopupWithText)("Registration successful, automatically logged in!")):this.errorLine.textContent=400===e?"The user with that email already exists!":"Something went wrong!"}catch(e){this.errorLine.textContent=`${e}`}else this.errorLine.textContent="Fix all errors.",null===(n=this.errorLine)||void 0===n||n.classList.add(c.SIGN_UP_CLASSES.ERROR_LINE_SHOW)}))}copyShippingAddressToBillingAddress(){var e,t,n,s;const i=null===(e=this.cityShippingAddressInput)||void 0===e?void 0:e.value,r=null===(t=this.streetShippingAddressInput)||void 0===t?void 0:t.value,a=null===(n=this.postalCodeShippingAddressInput)||void 0===n?void 0:n.value,o=null===(s=this.countryShippingAddressInput)||void 0===s?void 0:s.value;void 0!==i&&null!==this.cityBillingAddressInput&&(this.cityBillingAddressInput.value=i,this.cityBillingAddressInput.focus(),this.cityBillingAddressInput.blur()),void 0!==r&&null!==this.streetBillingAddressInput&&(this.streetBillingAddressInput.value=r,this.streetBillingAddressInput.focus(),this.streetBillingAddressInput.blur()),void 0!==a&&null!==this.postalCodeBillingAddressInput&&(this.postalCodeBillingAddressInput.value=a,this.postalCodeBillingAddressInput.focus(),this.postalCodeBillingAddressInput.blur()),void 0!==o&&null!==this.countryBillingAddressInput&&(this.countryBillingAddressInput.value=o)}showHidePasswordFn(e,t){const n=t.getElement();e.getAttribute("type")===c.TYPE.INPUT_TYPE.PASSWORD?(e.setAttribute("type",c.TYPE.INPUT_TYPE.TEXT),n.textContent=c.SIGN_UP_TEXT.SHOW_HIDE_ICON.VISIBLE_OFF):(e.setAttribute("type",c.TYPE.INPUT_TYPE.PASSWORD),n.textContent=c.SIGN_UP_TEXT.SHOW_HIDE_ICON.VISIBLE)}getAddressFormData(e){var t,n,s,i;let r,a,o,d;return"Shipping"===e?(r=this.cityShippingAddressInput,a=this.streetShippingAddressInput,o=this.postalCodeShippingAddressInput,d=this.countryShippingAddressInput):"Billing"===e&&(r=this.cityBillingAddressInput,a=this.streetBillingAddressInput,o=this.postalCodeBillingAddressInput,d=this.countryBillingAddressInput),{country:null!==(t=null==d?void 0:d.value)&&void 0!==t?t:"",streetName:null!==(n=null==a?void 0:a.value)&&void 0!==n?n:"",postalCode:null!==(s=null==o?void 0:o.value)&&void 0!==s?s:"",city:null!==(i=null==r?void 0:r.value)&&void 0!==i?i:""}}getShippingAddressFormData(){return this.getAddressFormData("Shipping")}getBillingAddressFormData(){return this.getAddressFormData("Billing")}getFormData(){var e,t,n,s,i,r,a,o,d,l,u,c;const E={email:null!==(t=null===(e=this.emailInput)||void 0===e?void 0:e.value)&&void 0!==t?t:"",password:null!==(s=null===(n=this.passwordInput)||void 0===n?void 0:n.value)&&void 0!==s?s:"",firstName:null!==(r=null===(i=this.firstNameInput)||void 0===i?void 0:i.value)&&void 0!==r?r:"",lastName:null!==(o=null===(a=this.lastNameInput)||void 0===a?void 0:a.value)&&void 0!==o?o:"",dateOfBirth:null!==(l=null===(d=this.dateOfBirthInput)||void 0===d?void 0:d.value)&&void 0!==l?l:"",addresses:[this.getShippingAddressFormData(),this.getBillingAddressFormData()]};return(null===(u=this.defaultShippingAddressInput)||void 0===u?void 0:u.checked)&&(E.defaultShippingAddress=0),(null===(c=this.defaultBillingAddressInput)||void 0===c?void 0:c.checked)&&(E.defaultBillingAddress=1),E}inputValidation(e,t){const n=e.getInputElement(),s=e.getErrorLine(),i=t();return i?(n.classList.add(c.SIGN_UP_CLASSES.INPUT_INVALID),s.textContent=`${i}`,!1):(n.classList.remove(c.SIGN_UP_CLASSES.INPUT_INVALID),s.textContent=c.INITIAL_VALUE.ERROR_LINE,!0)}inputKeydownFn(){var e;null===(e=this.errorLine)||void 0===e||e.classList.remove(c.SIGN_UP_CLASSES.ERROR_LINE_SHOW)}}t.default=h},201:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.INITIAL_VALUE=t.TYPE=t.PROFILE_TEXT=t.PROFILE_CLASSES=void 0,t.PROFILE_CLASSES={PROFILE:"user-profile",TITLE:"user-profile__title",EMAIL:"email",PASSWORD:"password",CURRENT_PASSWORD:"current-password",FIRST_NAME:"first-name",LAST_NAME:"last-name",DATE_OF_BIRTH:"date-of-birth",CITY:"city",STREET:"street",POSTAL_CODE:"postal-code",COUNTRY:"country",ERROR_LINE:"error",REGISTER_BTN:"primary-button",LOGIN_BTN:"login__user-profile-link",SHOW_HIDE_ICON:["material-symbols-outlined","user-profile__show-hide-icon"],SET_DEFAULT_ADDRESS:"set-default",INPUT_INVALID:"invalid",ERROR_LINE_SHOW:"show"},t.PROFILE_TEXT={EMAIL:"Email",PASSWORD:"Password",CURRENT_PASSWORD:"Current Password",FIRST_NAME:"First Name",LAST_NAME:"Last Name",DATE_OF_BIRTH:"Date of Birth",CITY:"City",STREET:"Street",POSTAL_CODE:"Postal Code",COUNTRY:"Country",TITLE:"Sign Up",REGISTER_BTN:"Create Account",LOGIN_BTN:"Login",ERROR_LINE:"",SET_DEFAULT_ADDRESS:"Set Default Address",SHOW_HIDE_ICON:{VISIBLE:"visibility",VISIBLE_OFF:"visibility_off"}},t.TYPE={INPUT_TYPE:{EMAIL:"email",PASSWORD:"password",TEXT:"text"},BUTTON_TYPE:"submit"},t.INITIAL_VALUE={INPUT_VALUE:{EMAIL:"",PASSWORD:""},PLACEHOLDER:{EMAIL:"",PASSWORD:""},ERROR_LINE:""}},844:function(e,t,n){var s=this&&this.__awaiter||function(e,t,n,s){return new(n||(n=Promise))((function(i,r){function a(e){try{d(s.next(e))}catch(e){r(e)}}function o(e){try{d(s.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}d((s=s.apply(e,t||[])).next())}))},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=n(155),a=n(387),o=n(111),d=i(n(507)),l=n(442),u=n(644),c=n(201);class E extends u.View{constructor(){super("section",c.PROFILE_CLASSES.PROFILE),this.form=null,this.data=null,this.firstNameInput=null,this.lastNameInput=null,this.emailInput=null,this.dateOfBirthInput=null,this.passwordInput=null,this.currentPasswordInput=null,this.passwordWrapper=null,this.shippingAddressFieldSet=null,this.billingAddressFieldSet=null,this.cityShippingAddressInput=null,this.cityBillingAddressInput=null,this.streetShippingAddressInput=null,this.streetBillingAddressInput=null,this.postalCodeShippingAddressInput=null,this.postalCodeBillingAddressInput=null,this.countryShippingAddressInput=null,this.countryBillingAddressInput=null,this.errorLine=null,this.configView()}configView(){return s(this,void 0,void 0,(function*(){yield this.getCustomerData(),this.addTitle(),this.addForm()}))}addTitle(){const e=new o.ElementCreator("h1",c.PROFILE_CLASSES.TITLE,c.PROFILE_TEXT.TITLE);this.viewElementCreator.addInnerElement(e)}addForm(){this.form=new o.ElementCreator("form","user-profile__form"),this.viewElementCreator.addInnerElement(this.form.getElement()),this.addFirstNameInput(),this.addLastNameInput(),this.addDateOfBirthInput(),this.addEmailInput(),this.addPasswordInput(),this.addShippingFieldSet(),this.addAddressInput(this.shippingAddressFieldSet,"shipping"),this.addBillingFieldSet(),this.addAddressInput(this.billingAddressFieldSet,"billing")}getCustomerData(){return s(this,void 0,void 0,(function*(){return this.data=yield r.CustomerAPI.getCustomerInfo(),console.log(this.data),this.data}))}addFirstNameInput(){var e,t,n;const s=new d.default(c.PROFILE_CLASSES.PROFILE,c.PROFILE_CLASSES.FIRST_NAME,c.PROFILE_TEXT.FIRST_NAME,null!==(t=null===(e=this.data)||void 0===e?void 0:e.firstName)&&void 0!==t?t:"","text",""),i=s.getInputElement();s.getInputElement().setAttribute("required",""),s.getInputElement().setAttribute("disabled",""),this.firstNameInput=i;const r=()=>{this.inputValidation(s,(()=>l.Validator.nameField(i.value))),this.inputKeydownFn()};i.addEventListener("input",r),i.addEventListener("focusin",r),s.addInnerElement(this.addControlButtons("firstName")),null===(n=this.form)||void 0===n||n.addInnerElement(s.getElement())}addControlButtons(e){const t=new o.ElementCreator("div","controls");return t.addInnerElement(this.addEditButton(e)),t.addInnerElement(this.addSaveButton(e)),t}addLastNameInput(){var e,t,n;const s=new d.default(c.PROFILE_CLASSES.PROFILE,c.PROFILE_CLASSES.LAST_NAME,c.PROFILE_TEXT.LAST_NAME,null!==(t=null===(e=this.data)||void 0===e?void 0:e.lastName)&&void 0!==t?t:"","text",""),i=s.getInputElement();s.getInputElement().setAttribute("required",""),s.getInputElement().setAttribute("disabled",""),this.lastNameInput=i;const r=()=>{this.inputValidation(s,(()=>l.Validator.nameField(i.value))),this.inputKeydownFn()};i.addEventListener("input",r),i.addEventListener("focusin",r),s.addInnerElement(this.addControlButtons("lastName")),null===(n=this.form)||void 0===n||n.addInnerElement(s.getElement())}addDateOfBirthInput(){var e,t,n;const s=new d.default(c.PROFILE_CLASSES.PROFILE,c.PROFILE_CLASSES.DATE_OF_BIRTH,c.PROFILE_TEXT.DATE_OF_BIRTH,null!==(t=null===(e=this.data)||void 0===e?void 0:e.dateOfBirth)&&void 0!==t?t:"","date",""),i=s.getInputElement();s.getInputElement().setAttribute("required",""),s.getInputElement().setAttribute("disabled",""),this.dateOfBirthInput=i;const r=()=>{this.inputValidation(s,(()=>l.Validator.birthField(i.value))),this.inputKeydownFn()};i.addEventListener("input",r),i.addEventListener("focusin",r),s.addInnerElement(this.addControlButtons("birthDay")),null===(n=this.form)||void 0===n||n.addInnerElement(s.getElement())}addEmailInput(){var e,t,n;const s=new d.default(c.PROFILE_CLASSES.PROFILE,c.PROFILE_CLASSES.EMAIL,c.PROFILE_TEXT.EMAIL,null!==(t=null===(e=this.data)||void 0===e?void 0:e.email)&&void 0!==t?t:"","email",""),i=s.getInputElement();s.getInputElement().setAttribute("required",""),s.getInputElement().setAttribute("disabled",""),this.emailInput=i;const r=()=>{this.inputValidation(s,(()=>l.Validator.emailField(i.value))),this.inputKeydownFn()};i.addEventListener("input",r),i.addEventListener("focusin",r),s.addInnerElement(this.addControlButtons("email")),null===(n=this.form)||void 0===n||n.addInnerElement(s.getElement())}addPasswordInput(){var e;const t=new d.default(c.PROFILE_CLASSES.PROFILE,c.PROFILE_CLASSES.PASSWORD,c.PROFILE_TEXT.PASSWORD,"","password","");this.passwordWrapper=t;const n=t.getInputElement();t.getInputElement().setAttribute("required",""),n.setAttribute("disabled",""),this.passwordInput=n,this.addShowHidePasswordIcon(this.passwordInput,t);const s=()=>{this.inputValidation(t,(()=>l.Validator.passwordField(n.value))),this.inputKeydownFn()};n.addEventListener("input",s),n.addEventListener("focusin",s),this.addCurrentPasswordInput(),t.addInnerElement(this.addControlButtons("password").getElement()),null===(e=this.form)||void 0===e||e.addInnerElement(t.getElement())}addCurrentPasswordInput(){var e;const t=new d.default(c.PROFILE_CLASSES.PROFILE,c.PROFILE_CLASSES.CURRENT_PASSWORD,c.PROFILE_TEXT.CURRENT_PASSWORD,"","password",""),n=t.getInputElement();t.getInputElement().setAttribute("required",""),n.setAttribute("disabled",""),this.currentPasswordInput=n,this.addShowHidePasswordIcon(this.currentPasswordInput,t);const s=()=>{var e;void 0!==(null===(e=this.passwordInput)||void 0===e?void 0:e.value)&&(this.inputValidation(t,(()=>l.Validator.passwordField(n.value))),this.inputKeydownFn())};n.addEventListener("input",s),n.addEventListener("focusin",s),null===(e=this.passwordWrapper)||void 0===e||e.addInnerElement(t.getElement())}addShowHidePasswordIcon(e,t){const n=new o.ElementCreator("span",c.PROFILE_CLASSES.SHOW_HIDE_ICON,c.PROFILE_TEXT.SHOW_HIDE_ICON.VISIBLE);n.getElement().addEventListener("click",this.showHidePasswordFn.bind(this,e,n)),t.addInnerElement(n)}showHidePasswordFn(e,t){const n=t.getElement();e.getAttribute("type")===c.TYPE.INPUT_TYPE.PASSWORD?(e.setAttribute("type",c.TYPE.INPUT_TYPE.TEXT),n.textContent=c.PROFILE_TEXT.SHOW_HIDE_ICON.VISIBLE_OFF):(e.setAttribute("type",c.TYPE.INPUT_TYPE.PASSWORD),n.textContent=c.PROFILE_TEXT.SHOW_HIDE_ICON.VISIBLE)}addShippingFieldSet(){var e;const t=new o.ElementCreator("fieldset","fieldset");this.shippingAddressFieldSet=t;const n=new o.ElementCreator("legend","legend");n.getElement().textContent="Shipping Addresses",t.addInnerElement(n),null===(e=this.form)||void 0===e||e.addInnerElement(t)}addBillingFieldSet(){var e;const t=new o.ElementCreator("fieldset","fieldset");this.billingAddressFieldSet=t;const n=new o.ElementCreator("legend","legend");n.getElement().textContent="Billing Addresses",t.addInnerElement(n),null===(e=this.form)||void 0===e||e.addInnerElement(t)}addAddressInput(e,t){e&&(this.addCityAddressInput(e,t),this.addStreetAddressInput(e,t),this.addPostalCodeAddressInput(e,t),this.addCountryAddressInput(e,t))}addCityAddressInput(e,t){var n,s;const i=new d.default(c.PROFILE_CLASSES.PROFILE,c.PROFILE_CLASSES.CITY,c.PROFILE_TEXT.CITY,null!==(s=null===(n=this.data)||void 0===n?void 0:n.addresses[0].city)&&void 0!==s?s:"","text",""),r=i.getInputElement();r.setAttribute("disabled",""),"shipping"===t?this.cityShippingAddressInput=r:"billing"===t&&(this.cityBillingAddressInput=r);const a=()=>{this.inputValidation(i,(()=>l.Validator.cityField(r.value))),this.inputKeydownFn()};r.addEventListener("input",a),r.addEventListener("focusin",a),null==e||e.addInnerElement(i.getElement())}addStreetAddressInput(e,t){var n,s;const i=new d.default(c.PROFILE_CLASSES.PROFILE,c.PROFILE_CLASSES.STREET,c.PROFILE_TEXT.STREET,null!==(s=null===(n=this.data)||void 0===n?void 0:n.addresses[0].streetName)&&void 0!==s?s:"","text",""),r=i.getInputElement();r.setAttribute("disabled",""),"shipping"===t?this.streetShippingAddressInput=r:"billing"===t&&(this.streetBillingAddressInput=r);const a=()=>{this.inputValidation(i,(()=>l.Validator.streetField(r.value))),this.inputKeydownFn()};r.addEventListener("input",a),r.addEventListener("focusin",a),null==e||e.addInnerElement(i.getElement())}addPostalCodeAddressInput(e,t){var n,s;const i=new d.default(c.PROFILE_CLASSES.PROFILE,c.PROFILE_CLASSES.POSTAL_CODE,c.PROFILE_TEXT.POSTAL_CODE,null!==(s=null===(n=this.data)||void 0===n?void 0:n.addresses[0].postalCode)&&void 0!==s?s:"","text",""),r=i.getInputElement();r.setAttribute("disabled",""),"shipping"===t?this.postalCodeShippingAddressInput=r:"billing"===t&&(this.postalCodeBillingAddressInput=r);const a=()=>{let e="";this.inputValidation(i,(()=>{var n,s,i,a;return"shipping"===t?e=null!==(s=null===(n=this.countryShippingAddressInput)||void 0===n?void 0:n.value)&&void 0!==s?s:"":"billing"===t&&(e=null!==(a=null===(i=this.countryBillingAddressInput)||void 0===i?void 0:i.value)&&void 0!==a?a:""),l.Validator.postalCodeField(r.value,e)})),this.inputKeydownFn()};r.addEventListener("input",(()=>a())),r.addEventListener("focusin",(()=>a())),null==e||e.addInnerElement(i.getElement())}addCountryAddressInput(e,t){const n=["USA","Russia"],s=["US","RU"],i=new o.ElementCreator("div",["user-profile__country-input-wrapper","primary-wrapper"]),r=new o.ElementCreator("label",["user-profile__country-label","primary-label"]);r.getElement().textContent="Country";const a=new o.ElementCreator("select",["user-profile__country-input","primary-input"]);for(let e=0;e<n.length;e+=1){const t=document.createElement("option");t.setAttribute("value",s[e]),t.textContent=n[e],a.getElement().appendChild(t)}i.addInnerElement(r.getElement()),r.addInnerElement(a.getElement());const d=a.getElement();d.setAttribute("disabled",""),"shipping"===t?this.countryShippingAddressInput=d:"billing"===t&&(this.countryBillingAddressInput=d),null==e||e.addInnerElement(i.getElement())}addEditButton(e){const t=new o.ElementCreator("button","edit");return t.getElement().textContent="Edit",t.getElement().setAttribute("type","button"),t.getElement().addEventListener("click",(e=>this.editButtonCallback(e))),t.getElement().dataset.btnType=e,t}addSaveButton(e){const t=new o.ElementCreator("button","save");return t.getElement().textContent="Save",t.getElement().setAttribute("type","button"),t.getElement().setAttribute("disabled",""),t.getElement().addEventListener("click",(e=>this.saveButtonCallback(e))),t.getElement().dataset.btnType=e,t}editButtonCallback(e){var t,n;const s=e.target;s.nextSibling.disabled=!1,s.disabled=!0;(null===(n=null===(t=s.parentElement)||void 0===t?void 0:t.parentElement)||void 0===n?void 0:n.querySelectorAll(".primary-input")).forEach((e=>{e.disabled=!1}))}saveButtonCallback(e){var t,n,s,i,o,d,l;const u=e.target,c=null===(t=null==u?void 0:u.dataset)||void 0===t?void 0:t.btnType,E=u.previousSibling,h=null===(s=null===(n=u.parentElement)||void 0===n?void 0:n.parentElement)||void 0===s?void 0:s.querySelectorAll(".primary-input"),m=null!==(o=null===(i=h[0])||void 0===i?void 0:i.value)&&void 0!==o?o:"";console.log(m);const I=null!==(l=null===(d=h[1])||void 0===d?void 0:d.value)&&void 0!==l?l:"";let _=!0;if(h.forEach((e=>{e.classList.contains("invalid")&&(_=!1)})),_){switch(c){case"firstName":r.CustomerAPI.updateCustomerFirstName(m);break;case"lastName":r.CustomerAPI.updateCustomerLastName(m);break;case"birthDay":r.CustomerAPI.updateCustomerBirthDay(m);break;case"email":r.CustomerAPI.updateCustomerEmail(m);break;case"password":r.CustomerAPI.updateCustomerPassword(m,I)}h.forEach((e=>{const t=e;t.disabled=!0,t.focus(),t.blur()})),E.disabled=!1,u.disabled=!0}else switch(c){case"firstName":(0,a.createPopupWithText)("Wrong format of first name.");break;case"lastName":(0,a.createPopupWithText)("Wrong format of last name.");break;case"birthDay":(0,a.createPopupWithText)("Wrong format of birthday.");break;case"email":(0,a.createPopupWithText)("Wrong format of email.");break;case"password":(0,a.createPopupWithText)("Wrong format of password.")}}inputValidation(e,t){const n=e.getInputElement(),s=e.getErrorLine(),i=t();return i?(n.classList.add(c.PROFILE_CLASSES.INPUT_INVALID),s.textContent=`${i}`,!1):(n.classList.remove(c.PROFILE_CLASSES.INPUT_INVALID),s.textContent=c.INITIAL_VALUE.ERROR_LINE,!0)}inputKeydownFn(){var e;null===(e=this.errorLine)||void 0===e||e.classList.remove(c.PROFILE_CLASSES.ERROR_LINE_SHOW)}}t.default=E},644:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.View=void 0;const s=n(111);t.View=class{constructor(e,t,n){this.viewElementCreator=this.createView(e,t,n)}createView(e,t,n){return new s.ElementCreator(e,t,n)}getHTMLElement(){return this.viewElementCreator.getElement()}setContent(e){const t=this.viewElementCreator.getElement(),n=e.getHTMLElement();this.removeContent(t),this.viewElementCreator.addInnerElement(n)}removeContent(e){for(;e.firstChild;)e.firstChild.remove()}}},83:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});const s=n(644),i=["wrapper"];class r extends s.View{constructor(){super("div",i)}}t.default=r},303:function(e,t,n){var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),n(183);new(s(n(477)).default)}},t={};function n(s){var i=t[s];if(void 0!==i)return i.exports;var r=t[s]={exports:{}};return e[s].call(r.exports,r,r.exports,n),r.exports}n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};n(303)}();