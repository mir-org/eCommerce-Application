!function(){"use strict";var e={183:function(e,t,n){n.r(t)},430:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.TOKEN_STORAGE_KEY=t.CTP_SCOPES=t.CTP_API_URL=t.CTP_AUTH_URL=t.CTP_CLIENT_ID=t.CTP_CLIENT_SECRET=t.CTP_PROJECT_KEY=void 0;t.CTP_PROJECT_KEY="beat-amazon";t.CTP_CLIENT_SECRET="Q-Re7QPpJHlYELukt_igPBIHx6mOx13q";t.CTP_CLIENT_ID="X5YO3W0sZrwcRNYQexE8np0q";t.CTP_AUTH_URL="https://auth.europe-west1.gcp.commercetools.com";t.CTP_API_URL="https://api.europe-west1.gcp.commercetools.com";t.CTP_SCOPES="manage_my_quote_requests:beat-amazon manage_my_orders:beat-amazon view_products:beat-amazon manage_my_quotes:beat-amazon view_categories:beat-amazon manage_my_shopping_lists:beat-amazon view_published_products:beat-amazon manage_my_business_units:beat-amazon manage_my_payments:beat-amazon create_anonymous_token:beat-amazon manage_my_profile:beat-amazon";t.TOKEN_STORAGE_KEY="access-token"},770:function(e,t,n){var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(s,r){function a(e){try{d(i.next(e))}catch(e){r(e)}}function o(e){try{d(i.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}d((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.AuthAPI=t.AuthStatusCodes=void 0;const s=n(430);var r;!function(e){e[e.successfulPasswordTokenFetch=200]="successfulPasswordTokenFetch"}(r||(t.AuthStatusCodes=r={}));t.AuthAPI=class{static setAccessToken(){return i(this,void 0,void 0,(function*(){localStorage.getItem(s.TOKEN_STORAGE_KEY)||(yield this.fetchAnonymousToken())}))}static fetchAnonymousToken(){return i(this,void 0,void 0,(function*(){const e=`${s.CTP_AUTH_URL}/oauth/${s.CTP_PROJECT_KEY}/anonymous/token?grant_type=client_credentials`,t=yield fetch(e,{method:"POST",headers:{Authorization:`Basic ${btoa(`${s.CTP_CLIENT_ID}:${s.CTP_CLIENT_SECRET}`)}`}}),n=(yield t.json()).refresh_token;this.fetchRefreshToken(n)}))}static fetchPasswordToken(e,t){return i(this,void 0,void 0,(function*(){const n=`${s.CTP_AUTH_URL}/oauth/${s.CTP_PROJECT_KEY}/customers/token?grant_type=password&username=${e}&password=${t}`,i=yield fetch(n,{method:"POST",headers:{Authorization:`Basic ${btoa(`${s.CTP_CLIENT_ID}:${s.CTP_CLIENT_SECRET}`)}`}});if(i.status!==r.successfulPasswordTokenFetch)return i.status;const a=(yield i.json()).refresh_token;return this.fetchRefreshToken(a),i.status}))}static fetchRefreshToken(e){return i(this,void 0,void 0,(function*(){const t=`${s.CTP_AUTH_URL}/oauth/token?grant_type=refresh_token&refresh_token=${e}`,n=yield fetch(t,{method:"POST",headers:{Authorization:`Basic ${btoa(`${s.CTP_CLIENT_ID}:${s.CTP_CLIENT_SECRET}`)}`}}),i=(yield n.json()).access_token;localStorage.setItem(s.TOKEN_STORAGE_KEY,i)}))}}},425:function(e,t,n){var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(s,r){function a(e){try{d(i.next(e))}catch(e){r(e)}}function o(e){try{d(i.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}d((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.CartAPI=void 0;const s=n(430);class r{static createCart(){return i(this,void 0,void 0,(function*(){const e=yield this.getActiveCart();if(e)return e;const t=`${s.CTP_API_URL}/${s.CTP_PROJECT_KEY}/me/carts`,n=yield fetch(t,{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem(s.TOKEN_STORAGE_KEY)}`,"Content-Type":"application/json"},body:JSON.stringify({currency:"USD"})});return yield n.json()}))}static getActiveCart(){return i(this,void 0,void 0,(function*(){const e=`${s.CTP_API_URL}/${s.CTP_PROJECT_KEY}/me/active-cart`,t=yield fetch(e,{method:"GET",headers:{Authorization:`Bearer ${localStorage.getItem(s.TOKEN_STORAGE_KEY)}`}}),n=yield t.json();return 404===n.statusCode?null:n}))}static getCart(){return i(this,void 0,void 0,(function*(){const e=(yield this.createCart()).id,t=`${s.CTP_API_URL}/${s.CTP_PROJECT_KEY}/me/carts/${e}`,n=yield fetch(t,{method:"GET",headers:{Authorization:`Bearer ${localStorage.getItem(s.TOKEN_STORAGE_KEY)}`}});return yield n.json()}))}static getCartVersion(e){return i(this,void 0,void 0,(function*(){const t=`${s.CTP_API_URL}/${s.CTP_PROJECT_KEY}/me/carts/${e}`,n=yield fetch(t,{method:"GET",headers:{Authorization:`Bearer ${localStorage.getItem(s.TOKEN_STORAGE_KEY)}`}});return(yield n.json()).version}))}static addProductToCart(e){return i(this,void 0,void 0,(function*(){const t=(yield this.createCart()).id,n=`${s.CTP_API_URL}/${s.CTP_PROJECT_KEY}/me/carts/${t}`,i=yield this.getCartVersion(t),r=yield fetch(n,{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem(s.TOKEN_STORAGE_KEY)}`,"Content-Type":"application/json"},body:JSON.stringify({version:i,actions:[{action:"addLineItem",productId:e,variantId:1,quantity:1}]})});return yield r.json()}))}static incrProductQuant(e,t){return i(this,void 0,void 0,(function*(){const n=(yield this.createCart()).id,i=`${s.CTP_API_URL}/${s.CTP_PROJECT_KEY}/me/carts/${n}`,r=yield this.getCartVersion(n),a=yield fetch(i,{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem(s.TOKEN_STORAGE_KEY)}`,"Content-Type":"application/json"},body:JSON.stringify({version:r,actions:[{action:"changeLineItemQuantity",lineItemId:e,quantity:t+1}]})});return yield a.json()}))}static decrProductQuant(e,t){return i(this,void 0,void 0,(function*(){const n=(yield this.createCart()).id,i=`${s.CTP_API_URL}/${s.CTP_PROJECT_KEY}/me/carts/${n}`,r=yield this.getCartVersion(n),a=yield fetch(i,{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem(s.TOKEN_STORAGE_KEY)}`,"Content-Type":"application/json"},body:JSON.stringify({version:r,actions:[{action:"changeLineItemQuantity",lineItemId:e,quantity:t-1}]})});return yield a.json()}))}static removeProduct(e){return i(this,void 0,void 0,(function*(){const t=(yield this.createCart()).id,n=`${s.CTP_API_URL}/${s.CTP_PROJECT_KEY}/me/carts/${t}`,i=yield this.getCartVersion(t),r=yield fetch(n,{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem(s.TOKEN_STORAGE_KEY)}`,"Content-Type":"application/json"},body:JSON.stringify({version:i,actions:[{action:"changeLineItemQuantity",lineItemId:e,quantity:0}]})});return yield r.json()}))}static deleteCart(e){return i(this,void 0,void 0,(function*(){const t=yield this.getCartVersion(e),n=`${s.CTP_API_URL}/${s.CTP_PROJECT_KEY}/me/carts/${e}?version=${t}`,i=yield fetch(n,{method:"DELETE",headers:{Authorization:`Bearer ${localStorage.getItem(s.TOKEN_STORAGE_KEY)}`}});return yield i.json()}))}static clearCart(){return i(this,void 0,void 0,(function*(){const e=yield this.getCart();for(let t=0;t<e.lineItems.length;t+=1){const n=e.lineItems[t];yield this.removeProduct(n.id)}return yield this.createCart()}))}static itemIsInCart(e){return i(this,void 0,void 0,(function*(){return!!(yield r.getCart()).lineItems.map((e=>e.productId)).includes(e)}))}static getDiscountCodes(){return i(this,void 0,void 0,(function*(){const e=`${s.CTP_API_URL}/${s.CTP_PROJECT_KEY}/discount-codes`;return yield fetch(e,{method:"GET",headers:{Authorization:`Bearer ${localStorage.getItem(s.TOKEN_STORAGE_KEY)}`}})}))}static applyDiscountCode(e){return i(this,void 0,void 0,(function*(){const t=(yield this.createCart()).id,n=`${s.CTP_API_URL}/${s.CTP_PROJECT_KEY}/me/carts/${t}`,i=yield this.getCartVersion(t);return yield fetch(n,{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem(s.TOKEN_STORAGE_KEY)}`,"Content-Type":"application/json"},body:JSON.stringify({version:i,actions:[{action:"addDiscountCode",code:e}]})})}))}static removeDiscountCode(e){return i(this,void 0,void 0,(function*(){const t=(yield this.createCart()).id,n=`${s.CTP_API_URL}/${s.CTP_PROJECT_KEY}/me/carts/${t}`,i=yield this.getCartVersion(t);return yield fetch(n,{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem(s.TOKEN_STORAGE_KEY)}`,"Content-Type":"application/json"},body:JSON.stringify({version:i,actions:[{action:"removeDiscountCode",discountCode:{typeId:"discount-code",id:e}}]})})}))}}t.CartAPI=r},437:function(e,t){var n;Object.defineProperty(t,"__esModule",{value:!0}),t.StatusCodes=void 0,function(e){e[e.successfulLogin=200]="successfulLogin",e[e.successfulRegistration=201]="successfulRegistration"}(n||(t.StatusCodes=n={}))},155:function(e,t,n){var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(s,r){function a(e){try{d(i.next(e))}catch(e){r(e)}}function o(e){try{d(i.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}d((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.CustomerAPI=void 0;const s=n(430),r=n(770),a=n(437),o=n(387);class d{static loginCustomer(e,t){return i(this,void 0,void 0,(function*(){const n=`${s.CTP_API_URL}/${s.CTP_PROJECT_KEY}/me/login`,i=yield r.AuthAPI.fetchPasswordToken(e,t);if(i!==r.AuthStatusCodes.successfulPasswordTokenFetch)return i;return(yield fetch(n,{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem(s.TOKEN_STORAGE_KEY)}`},body:JSON.stringify({email:e,password:t})})).status}))}static registerCustomer(e){return i(this,void 0,void 0,(function*(){const t=`${s.CTP_API_URL}/${s.CTP_PROJECT_KEY}/me/signup`,n=yield fetch(t,{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem(s.TOKEN_STORAGE_KEY)}`},body:JSON.stringify({email:e.email,password:e.password,firstName:e.firstName,lastName:e.lastName,dateOfBirth:e.dateOfBirth,addresses:e.addresses,defaultShippingAddress:e.defaultShippingAddress,shippingAddresses:e.shippingAddresses,defaultBillingAddress:e.defaultBillingAddress,billingAddresses:e.billingAddresses})});return n.status!==a.StatusCodes.successfulRegistration||(yield r.AuthAPI.fetchPasswordToken(e.email,e.password),yield this.loginCustomer(e.email,e.password)),n.status}))}static getCustomerInfo(){return i(this,void 0,void 0,(function*(){const e=`${s.CTP_API_URL}/${s.CTP_PROJECT_KEY}/me`,t=yield fetch(e,{method:"GET",headers:{Authorization:`Bearer ${localStorage.getItem(s.TOKEN_STORAGE_KEY)}`}});return yield t.json()}))}static updateCustomerFirstName(e){return i(this,void 0,void 0,(function*(){try{const t=`${s.CTP_API_URL}/${s.CTP_PROJECT_KEY}/me/`,n=yield fetch(t,{method:"GET",headers:{Authorization:`Bearer ${localStorage.getItem(s.TOKEN_STORAGE_KEY)}`}});if(400===n.status){const e=yield n.json();(0,o.createPopupWithText)(`Error ${n.status}: ${e.message}`)}else{const i={version:(yield n.json()).version,actions:[{action:"setFirstName",firstName:e}]},r=yield fetch(t,{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem(s.TOKEN_STORAGE_KEY)}`},body:JSON.stringify(i)});if(400===r.status){const e=yield r.json();(0,o.createPopupWithText)(`Error ${r.status}: ${e.message}`)}else(0,o.createPopupWithText)("First Name updated.")}}catch(e){this.handleFetchError(e)}}))}static updateCustomerLastName(e){return i(this,void 0,void 0,(function*(){const t=`${s.CTP_API_URL}/${s.CTP_PROJECT_KEY}/me/`,n=yield fetch(t,{method:"GET",headers:{Authorization:`Bearer ${localStorage.getItem(s.TOKEN_STORAGE_KEY)}`}}),i={version:(yield n.json()).version,actions:[{action:"setLastName",lastName:e}]};yield fetch(t,{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem(s.TOKEN_STORAGE_KEY)}`},body:JSON.stringify(i)}),(0,o.createPopupWithText)("Last Name updated.")}))}static updateCustomerEmail(e){return i(this,void 0,void 0,(function*(){const t=`${s.CTP_API_URL}/${s.CTP_PROJECT_KEY}/me/`,n=yield fetch(t,{method:"GET",headers:{Authorization:`Bearer ${localStorage.getItem(s.TOKEN_STORAGE_KEY)}`}}),i={version:(yield n.json()).version,actions:[{action:"changeEmail",email:e}]};yield fetch(t,{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem(s.TOKEN_STORAGE_KEY)}`},body:JSON.stringify(i)}),(0,o.createPopupWithText)("Email updated.")}))}static updateCustomerBirthDay(e){return i(this,void 0,void 0,(function*(){const t=`${s.CTP_API_URL}/${s.CTP_PROJECT_KEY}/me/`;try{const n=yield fetch(t,{method:"GET",headers:{Authorization:`Bearer ${localStorage.getItem(s.TOKEN_STORAGE_KEY)}`}});if(!n.ok)throw new Error("Failed to fetch data.");const i={version:(yield n.json()).version,actions:[{action:"setDateOfBirth",dateOfBirth:e}]};try{if(!(yield fetch(t,{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem(s.TOKEN_STORAGE_KEY)}`},body:JSON.stringify(i)})).ok)throw new Error("Failed to update birthday.");(0,o.createPopupWithText)("Birthday updated.")}catch(e){console.error("Error updating birthday:",e)}}catch(e){console.error("Error fetching data:",e)}}))}static updateCustomerPassword(e,t){return i(this,void 0,void 0,(function*(){try{const n=`${s.CTP_API_URL}/${s.CTP_PROJECT_KEY}/me/`,i=`${s.CTP_API_URL}/${s.CTP_PROJECT_KEY}/me/password/`,r=yield fetch(n,{method:"GET",headers:{Authorization:`Bearer ${localStorage.getItem(s.TOKEN_STORAGE_KEY)}`}}),a=yield r.json(),l={version:a.version,currentPassword:t,newPassword:e},c=yield fetch(i,{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem(s.TOKEN_STORAGE_KEY)}`},body:JSON.stringify(l)});if(400===c.status){const e=yield c.json();(0,o.createPopupWithText)(`Error ${c.status}: ${e.message}`)}else yield d.loginCustomer(a.email,e),(0,o.createPopupWithText)("Password updated.")}catch(e){this.handleFetchError(e)}}))}static handleFetchError(e){throw e instanceof Error?(0,o.createPopupWithText)(`Error: ${e.message}`):(0,o.createPopupWithText)(`Unknown error: ${e}`),e}}t.CustomerAPI=d},942:function(e,t,n){var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(s,r){function a(e){try{d(i.next(e))}catch(e){r(e)}}function o(e){try{d(i.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}d((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.ProductAPI=void 0;const s=n(430);class r{static getAllProducts(e=0,t=4){return i(this,void 0,void 0,(function*(){const n=t*e,i=`${s.CTP_API_URL}/${s.CTP_PROJECT_KEY}/products?limit=${t}&offset=${n}`,r=yield fetch(i,{method:"GET",headers:{Authorization:`Bearer ${localStorage.getItem(s.TOKEN_STORAGE_KEY)}`}});return yield r.json()}))}static getProduct(e){return i(this,void 0,void 0,(function*(){const t=`${s.CTP_API_URL}/${s.CTP_PROJECT_KEY}/products/${e}`,n=yield fetch(t,{method:"GET",headers:{Authorization:`Bearer ${localStorage.getItem(s.TOKEN_STORAGE_KEY)}`}});return yield n.json()}))}static getNumberOfPages(){return i(this,void 0,void 0,(function*(){const e=yield r.getAllProducts();return Math.ceil(e.total/e.limit)}))}static getFilteredProducts(e,t=0,n=4){return i(this,void 0,void 0,(function*(){const i=this.getQueryParamsForFiltering(e),r=n*t,a=`${s.CTP_API_URL}/${s.CTP_PROJECT_KEY}/product-projections/search?${i}&limit=${n}&offset=${r}`,o=yield fetch(a,{method:"GET",headers:{Authorization:`Bearer ${localStorage.getItem(s.TOKEN_STORAGE_KEY)}`}}),d=yield o.json(),l=new CustomEvent("myCustomEvent",{detail:{message:"Custom event dispatched",data:d.results,currentPage:t,totalPages:Math.ceil(d.total/n),query:e}});document.dispatchEvent(l)}))}static getQueryParamsForFiltering(e){const{categoryId:t,sort:n,search:i,minPriceValue:s,maxPriceValue:r,brands:a,sockets:o,coresAmount:d,chipset:l,vramAmount:c}=e;return`${t?`filter=categories.id:"${t}"`:""}&${a?`filter.query=variants.attributes.manufacturer:${a}`:""}&${a?`facet=variants.attributes.manufacturer:${a}`:""}&${o?`filter.query=variants.attributes.socket:${o}`:""}&${o?`facet=variants.attributes.socket:${o}`:""}&${d?`filter.query=variants.attributes.cores-amount:${d}`:""}&${d?`facet=variants.attributes.cores-amount:${d}`:""}&${s||r?`filter=variants.price.centAmount:range (${s} to ${r})`:""}&${n?`sort=${n}`:""}&${i?`text.en=${i}`:""}&${l?`filter.query=variants.attributes.chipset:${l}`:""}&${l?`facet=variants.attributes.chipset:${l}`:""}&${c?`filter.query=variants.attributes.vram-amount:${c}`:""}&${c?`facet=variants.attributes.vram-amount:${c}`:""}`}static getFiltersData(e){return i(this,void 0,void 0,(function*(){const t=`${e?`filter.query=categories.id:subtree("${e}")`:""}&facet=variants.attributes.manufacturer&facet=variants.attributes.socket&facet=variants.attributes.cores-amount&facet=variants.attributes.chipset&facet=variants.attributes.vram-amount`,n=`${s.CTP_API_URL}/${s.CTP_PROJECT_KEY}/product-projections/search?${t}`,i=yield fetch(n,{method:"GET",headers:{Authorization:`Bearer ${localStorage.getItem(s.TOKEN_STORAGE_KEY)}`}}),r=yield i.json();return{manufacturers:r.facets["variants.attributes.manufacturer"].terms,sockets:r.facets["variants.attributes.socket"].terms,coresAmount:r.facets["variants.attributes.cores-amount"].terms,chipset:r.facets["variants.attributes.chipset"].terms,vramAmount:r.facets["variants.attributes.vram-amount"].terms}}))}}t.ProductAPI=r},477:function(e,t,n){var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n);var s=Object.getOwnPropertyDescriptor(t,n);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,s)}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return s(t,e),t},a=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(s,r){function a(e){try{d(i.next(e))}catch(e){r(e)}}function o(e){try{d(i.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}d((i=i.apply(e,t||[])).next())}))},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const d=n(903),l=o(n(754)),c=o(n(271)),u=o(n(707)),E=o(n(83)),h=n(413),m=o(n(22)),_=n(770),C=n(831);t.default=class{constructor(){_.AuthAPI.setAccessToken(),this.header=null,this.main=null;const e=new m.default,t=this.createRoutes(e);this.router=new d.Router(t,e),this.observer=new C.Observer(e),this.createView(e),window.addEventListener("not-found",(()=>a(this,void 0,void 0,(function*(){var e;const{default:t}=yield Promise.resolve().then((()=>r(n(15))));null===(e=this.main)||void 0===e||e.setContent(new t(this.router)),document.title="Not Found"}))))}createView(e){const t=new E.default;this.header=new c.default(this.router,e),this.observer.setHeader(this.header),this.observer.setCartState(),this.main=new u.default;const n=new l.default;t.getHTMLElement().append(this.header.getHTMLElement(),this.main.getHTMLElement(),n.getHTMLElement()),document.body.append(t.getHTMLElement())}createRoutes(e){return[{path:"",callback:()=>a(this,void 0,void 0,(function*(){const{default:e}=yield Promise.resolve().then((()=>r(n(578))));this.setContent(h.Pages.INDEX,new e(this.router))}))},{path:`${h.Pages.INDEX}`,callback:()=>a(this,void 0,void 0,(function*(){const{default:e}=yield Promise.resolve().then((()=>r(n(578))));this.setContent(h.Pages.INDEX,new e(this.router)),document.title="Main"}))},{path:`${h.Pages.LOGIN}`,callback:()=>a(this,void 0,void 0,(function*(){const{default:t}=yield Promise.resolve().then((()=>r(n(291))));this.setContent(h.Pages.LOGIN,new t(this.router,this.observer,e)),document.title="Login"}))},{path:`${h.Pages.USER_PROFILE}`,callback:()=>a(this,void 0,void 0,(function*(){const{default:e}=yield Promise.resolve().then((()=>r(n(844))));this.setContent(h.Pages.USER_PROFILE,new e),document.title="Profile"}))},{path:`${h.Pages.REGISTRATION}`,callback:()=>a(this,void 0,void 0,(function*(){const{default:t}=yield Promise.resolve().then((()=>r(n(156))));this.setContent(h.Pages.REGISTRATION,new t(this.router,this.observer,e)),document.title="Registration"}))},{path:`${h.Pages.CATALOG}`,callback:()=>a(this,void 0,void 0,(function*(){const{default:e}=yield Promise.resolve().then((()=>r(n(799))));this.setContent(h.Pages.CATALOG,new e(this.router)),document.title="Catalog"}))},{path:`${h.Pages.PROCESSORS}`,callback:()=>a(this,void 0,void 0,(function*(){const{default:e}=yield Promise.resolve().then((()=>r(n(7))));this.setContent(h.Pages.CATALOG,new e(this.router,this.observer)),document.title="Processors"}))},{path:`${h.Pages.GRAPHIC_CARDS}`,callback:()=>a(this,void 0,void 0,(function*(){const{default:e}=yield Promise.resolve().then((()=>r(n(906))));this.setContent(h.Pages.GRAPHIC_CARDS,new e(this.router,this.observer)),document.title="Graphic cards"}))},{path:`${h.Pages.CATALOG}/${h.ID}`,callback:e=>a(this,void 0,void 0,(function*(){const{default:t}=yield Promise.resolve().then((()=>r(n(392))));void 0!==e&&(this.setContent(h.Pages.CATALOG,new t(e,this.observer)),document.title="Catalog")}))},{path:`${h.Pages.NOT_FOUND}`,callback:()=>a(this,void 0,void 0,(function*(){const{default:e}=yield Promise.resolve().then((()=>r(n(15))));this.setContent(h.Pages.NOT_FOUND,new e(this.router)),document.title="Not Found"}))},{path:`${h.Pages.ABOUT_US}`,callback:()=>a(this,void 0,void 0,(function*(){const{default:e}=yield Promise.resolve().then((()=>r(n(501))));this.setContent(h.Pages.ABOUT_US,new e),document.title="About Us"}))},{path:`${h.Pages.CART}`,callback:()=>a(this,void 0,void 0,(function*(){const{default:e}=yield Promise.resolve().then((()=>r(n(250))));this.setContent(h.Pages.CART,new e(this.observer,this.router)),document.title="Cart"}))}]}setContent(e,t){var n,i;null===(n=this.header)||void 0===n||n.setSelectedItem(e),null===(i=this.main)||void 0===i||i.setContent(t)}}},831:function(e,t,n){var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(s,r){function a(e){try{d(i.next(e))}catch(e){r(e)}}function o(e){try{d(i.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}d((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.Observer=void 0;const s=n(425),r="cartItemsStateArray";t.Observer=class{constructor(e){this.header=null,this.state=e}setHeader(e){this.header=e}setLoginStatus(e){var t;null===(t=this.header)||void 0===t||t.setLoginStatus(e)}setCartState(e){var t;return i(this,void 0,void 0,(function*(){let n;n=e||(yield s.CartAPI.getCart());const i=[];n.lineItems.forEach((e=>{i.push({name:e.name.en,id:e.id,productId:e.productId})})),this.state.setValue(r,JSON.stringify(i));const a=`${n.lineItems.reduce(((e,t)=>t.quantity+e),0)}`,o=n.totalPrice.centAmount/100+" $";null===(t=this.header)||void 0===t||t.setCartState(a,o)}))}}},586:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.HistoryRouterHandler=void 0;t.HistoryRouterHandler=class{constructor(e){this.callback=e,this.handler=this.navigate.bind(this),window.addEventListener("popstate",this.handler)}navigate(e){"string"==typeof e&&this.setHistory(e);const t=window.location.hash.slice(1).split("/"),n={path:"",resource:""};[n.path="",n.resource=""]=t,this.callback(n)}setHistory(e){window.history.pushState(null,"",`#${e}`)}}},413:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.ID=t.Pages=void 0;t.Pages={INDEX:"main",LOGIN:"login",REGISTRATION:"registration",USER_PROFILE:"profile",CATALOG:"catalog",PROCESSORS:"processors",GRAPHIC_CARDS:"graphic-cards",NOT_FOUND:"not-found",ABOUT_US:"about-us",CART:"cart"};t.ID="{id}"},903:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Router=void 0;const i=n(413),s=n(586),r="login-status";t.Router=class{constructor(e,t){this.routes=e,this.handler=new s.HistoryRouterHandler(this.urlChangedHandler.bind(this)),this.state=t,document.addEventListener("DOMContentLoaded",(()=>{const e=window.location.hash.slice(1);this.navigate(e)}))}navigate(e){this.handler.navigate(e)}urlChangedHandler(e){const t=this.state.getValue(r);if((e.path===i.Pages.REGISTRATION||e.path===i.Pages.LOGIN)&&"true"===t)return void this.redirectToMain();if(e.path===i.Pages.USER_PROFILE&&"false"===t)return void this.redirectToMain();const n=""===e.resource?e.path:`${e.path}/${i.ID}`,s=this.routes.find((e=>e.path===n));if(s)s.callback(e.resource);else{const e=new CustomEvent("not-found");window.dispatchEvent(e)}}redirectToMain(){const e=this.routes.find((e=>e.path===i.Pages.INDEX));e&&this.navigate(e.path)}}},22:function(e,t){Object.defineProperty(t,"__esModule",{value:!0});const n="spaApp";t.default=class{constructor(){this.fields=this.loadState(),window.addEventListener("beforeunload",this.saveState.bind(this))}setValue(e,t){this.fields.set(e,t)}getValue(e){const t=this.fields.get(e);return t||""}saveState(){const e=Object.fromEntries(this.fields.entries());localStorage.setItem(n,JSON.stringify(e))}loadState(){const e=localStorage.getItem(n);if(e){const t=JSON.parse(e);return new Map(Object.entries(t))}return new Map}}},97:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.BreadCrumbsCreator=t.BREAD_CRUMBS_CLASSES=void 0;const i=n(111);t.BREAD_CRUMBS_CLASSES={BREAD_CRUMBS:"bread-crumbs",BREAD_CRUMBS_ELEMENT:"bread-crumbs__element",BREAD_CRUMBS_LINK:"bread-crumbs__link",BREAD_CRUMBS_LINK_ACTIVE:"bread-crumbs__link--active"};t.BreadCrumbsCreator=class{constructor(e,n){this.router=n,this.element=new i.ElementCreator("ul",t.BREAD_CRUMBS_CLASSES.BREAD_CRUMBS),this.createBreadCrumbs(e)}createBreadCrumbs(e){e.forEach((e=>{const n=new i.ElementCreator("li",t.BREAD_CRUMBS_CLASSES.BREAD_CRUMBS_ELEMENT),s=e.isCurrent?[t.BREAD_CRUMBS_CLASSES.BREAD_CRUMBS_LINK,t.BREAD_CRUMBS_CLASSES.BREAD_CRUMBS_LINK_ACTIVE]:t.BREAD_CRUMBS_CLASSES.BREAD_CRUMBS_LINK,r=new i.ElementCreator("a",s,e.text);r.getElement().addEventListener("click",(()=>this.router.navigate(e.pagePath))),n.addInnerElement(r),this.element.addInnerElement(n)}))}getElement(){return this.element.getElement()}}},852:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.clearElement=void 0,t.clearElement=function(e){if(e)for(;e.firstChild;)e.removeChild(e.firstChild)}},387:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.createPopupWithText=void 0;const i=n(111);t.createPopupWithText=function(e){const t=new i.ElementCreator("div","popup-with-text"),n=new i.ElementCreator("div","popup-text-block",e),s=new i.ElementCreator("button","primary-button","Close");s.getElement().addEventListener("click",(()=>{document.body.removeChild(t.getElement())})),t.addInnerElement(n),t.addInnerElement(s),document.body.appendChild(t.getElement());const r=setTimeout((()=>{document.body.removeChild(t.getElement())}),2e3);s.getElement().addEventListener("click",(()=>{clearTimeout(r)}))}},111:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.ElementCreator=void 0;class n{constructor(e,t,n){this.element=document.createElement(e),this.setElement(t,n)}setElement(e,t){this.setCssClasses(e),t&&this.setTextContent(t)}getElement(){return this.element}setCssClasses(e){Array.isArray(e)?this.element.classList.add(...e):this.element.classList.add(e)}setTextContent(e){this.element.textContent=e}addInnerElement(e){e instanceof n?this.element.append(e.getElement()):this.element.append(e)}}t.ElementCreator=n},507:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});const i=n(111),s="primary-wrapper",r="primary-input",a="primary-label",o="primary-error-line";t.default=class{constructor(e,t,n,i,s="text",r=""){this.element=document.createElement("div"),this.inputElement=document.createElement("input"),this.labelElement=document.createElement("label"),this.errorLineElement=document.createElement("div"),this.setElement(e,t,n,s),this.setValue(i),this.setPlaceholder(r)}setElement(e,t,n,i){this.setLabelTextContent(n),this.setCssClasses(e,t),this.labelElement.prepend(this.inputElement),this.element.append(this.labelElement),this.element.append(this.errorLineElement),this.setType(i)}getElement(){return this.element}getInputElement(){return this.inputElement}getErrorLine(){return this.errorLineElement}setValue(e){this.inputElement.value=e}setCssClasses(e,t){this.element.classList.add(`${e}__${t}-input-wrapper`,s),this.inputElement.classList.add(`${e}__${t}-input`,r),this.labelElement.classList.add(`${e}__${t}-label`,a),this.errorLineElement.classList.add(o)}setLabelTextContent(e){this.labelElement&&(this.labelElement.textContent=e)}setType(e){this.inputElement.setAttribute("type",e)}setPlaceholder(e){this.inputElement.setAttribute("placeholder",e)}addInnerElement(e){e instanceof i.ElementCreator?this.element.append(e.getElement()):this.element.append(e)}}},442:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.Validator=void 0;t.Validator=class{static nameField(e){let t="";return e?/^[a-zA-Z-\s]+$/.test(e)||(t="Name must contain only letters and spaces."):t="Name is empty.",t}static emailField(e){let t="";return e?/^[\w-.]+@([\w-]+\.)+[\w-]{2,4}$/g.test(e)||(t="Please enter a valid email address in the format: name@example.com"):t="Email is empty.",t}static passwordField(e){let t="";return e.length<8&&(t+="Password must be at least 8 characters long.\n"),/[A-Z]/.test(e)||(t+="Password must contain at least one uppercase letter (A-Z).\n"),/[a-z]/.test(e)||(t+="Password must contain at least one lowercase letter (a-z).\n"),/\d/.test(e)||(t+="Password must contain at least one digit (0-9).\n"),/\s/.test(e)&&(t+="Password must not contain leading or trailing whitespace.\n"),t}static confirmPasswordField(e,t){let n="";return e?e!==t&&(n="Passwords do not match."):n="Password is empty.",n}static birthField(e){let t="";if(e){const n=new Date(e),i=new Date;let s=i.getFullYear()-n.getFullYear();(i.getMonth()<n.getMonth()||i.getMonth()===n.getMonth()&&i.getDate()<n.getDate())&&(s-=1),s<13&&(t="You must be at least 13 years old.")}else t="Date of birth is empty.";return t}static streetField(e){let t="";return e.trim()||(t="Street is empty."),t}static cityField(e){let t="";return e?/^[a-zA-Z-\s]+$/.test(e)||(t="City must contain only letters and spaces."):t="City is empty.",t}static postalCodeField(e,t){let n="";if(e){("US"===t?/^\d{5}(-\d{4})?$/:/^[0-9]{6}$/).test(e)||(n="US"===t?"Please enter a valid USA postal code in the format: 12345 or 12345-1234":"Please enter a valid russian postal code in the format: 123456")}else n="Postal code is empty.";return n}}},754:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});const i=n(111),s=n(644);class r extends s.View{constructor(){super("footer","footer"),this.configView()}configView(){const e=new i.ElementCreator("a","footer__link","");e.getElement().setAttribute("href","https://rs.school/js/"),e.getElement().setAttribute("target","_blank"),e.getElement().setAttribute("rel","noopener noreferrer"),this.viewElementCreator.addInnerElement(e);const t=new i.ElementCreator("img","footer__link-image","");t.getElement().setAttribute("src","./assets/images/rs_school_js.svg"),e.addInnerElement(t);const n=new i.ElementCreator("div","footer__text-team","Developed by New World Disorder");this.viewElementCreator.addInnerElement(n);const s=new i.ElementCreator("div","footer__text-year","2023");this.viewElementCreator.addInnerElement(s)}}t.default=r},271:function(e,t,n){var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(s,r){function a(e){try{d(i.next(e))}catch(e){r(e)}}function o(e){try{d(i.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}d((i=i.apply(e,t||[])).next())}))},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=n(111),a=n(644),o=s(n(563)),d=n(413),l=n(770),c="header",u=["header__shop-name","shop-name"],E=["header__nav","nav"],h=["header__user-menu","user-menu"],m=["user-menu__logout-button"],_=["header__cart","cart"],C={INDEX:"Main",CATALOG:"Catalog",ABOUT_US:"About Us"},I={REGISTRATION:"Registration",LOGIN:"Login",USER_PROFILE:"Your profile"},T="Logout",p="GigaGoods",v="login-status";class S extends a.View{constructor(e,t){super("header",c),this.headerLinkElements=new Map,this.logoutButton=this.crateLogoutButton(),this.cartCounter=null,this.cartPrice=null,this.configView(e,t)}configView(e,t){this.addShopName(),this.addNavigation(e),this.addCart(e),this.addUserMenu(e),this.logoutButton.getElement().addEventListener("click",this.logoutButtonHandler.bind(this,t)),this.setLoginStatus(t)}setSelectedItem(e){const t=this.headerLinkElements.get(e.toUpperCase());t instanceof o.default&&t.setSelectedStatus()}addShopName(){const e=new r.ElementCreator("div",u);e.getElement().textContent=p,this.viewElementCreator.addInnerElement(e)}addNavigation(e){const t=new r.ElementCreator("nav",E);Object.keys(C).forEach((n=>{const i={name:C[n],callback:()=>e.navigate(d.Pages[n])},s=new o.default(i.name,i.callback,this.headerLinkElements);t.addInnerElement(s.getHTMLElement()),this.headerLinkElements.set(d.Pages[n].toUpperCase(),s)})),this.viewElementCreator.addInnerElement(t)}addUserMenu(e){const t=new r.ElementCreator("div",h);Object.keys(I).forEach((n=>{const i={name:I[n],callback:()=>e.navigate(d.Pages[n])},s=new o.default(i.name,i.callback,this.headerLinkElements);t.addInnerElement(s.getHTMLElement()),this.headerLinkElements.set(d.Pages[n].toUpperCase(),s)})),t.addInnerElement(this.logoutButton),this.viewElementCreator.addInnerElement(t)}crateLogoutButton(){return new r.ElementCreator("a",m,T)}logoutButtonHandler(e){return i(this,void 0,void 0,(function*(){yield l.AuthAPI.fetchAnonymousToken(),e.setValue(v,"false"),this.setLoginStatus(e)}))}addCart(e){const t=new r.ElementCreator("div",_),n=new r.ElementCreator("img","cart__image");n.getElement().setAttribute("src","./assets/images/cart.svg"),t.addInnerElement(n),this.cartCounter=new r.ElementCreator("div","cart__counter"),t.addInnerElement(this.cartCounter),this.cartPrice=new r.ElementCreator("div","cart__price"),t.addInnerElement(this.cartPrice),t.getElement().addEventListener("click",this.cartClickHandler.bind(this,e)),this.viewElementCreator.addInnerElement(t)}setCartState(e,t){this.cartCounter.getElement().textContent=e,this.cartPrice.getElement().textContent=t}cartClickHandler(e){e.navigate("cart"),this.headerLinkElements.forEach((e=>e.getHTMLElement().classList.remove("nav__item_selected")))}setLoginStatus(e){const t=[this.headerLinkElements.get("REGISTRATION").getHTMLElement(),this.headerLinkElements.get("LOGIN").getHTMLElement(),this.headerLinkElements.get("PROFILE").getHTMLElement(),this.logoutButton.getElement()],n="true"===e.getValue(v)?[0,1]:[2,3];t.forEach(((e,t)=>{e.classList.remove("hide"),n.includes(t)&&e.classList.add("hide")}))}}t.default=S},563:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});const i=n(644),s="nav__item",r="nav__item_selected";class a extends i.View{constructor(e,t,n){super("a",s,e),this.linkElements=n,this.pageCallback=t,this.configView()}setSelectedStatus(){this.linkElements.forEach((e=>e.setNotSelectedStatus()));this.viewElementCreator.getElement().classList.add(r)}setNotSelectedStatus(){this.viewElementCreator.getElement().classList.remove(r)}configView(){this.viewElementCreator.getElement().addEventListener("click",(()=>{this.setSelectedStatus.bind(this),this.pageCallback()}))}}t.default=a},582:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.DEVELOPERS_DATA=t.TEXT=t.ABOUT_US_TEXT=t.ABOUT_US_CLASSES=void 0,t.ABOUT_US_CLASSES={ABOUT:"about-us",TEXT_BLOCK:"about-us__text-block",TEXT_BLOCK_TITLE:"about-us__text-block-title",TEXT_BLOCK_TEXT:"about-us__text-block-text",TITLE_LINK:"about-us__title-link",TITLE_TEXT:"about-us__title-text",DEVELOPERS_BLOCK:"devs-block",DEVELOPERS_CONTENT:"devs-block__content",DEVELOPER_BLOCK:"dev-block",DEVELOPER_BLOCK_TOP_LINE:"dev-block__top-line",DEVELOPER_PHOTO_WRAPPER:"dev-block__photo-wrapper",DEVELOPER_PHOTO:"dev-block__photo",DEVELOPER_NAME_POS_WRAPPER:"dev-block__name-pos-wrap",DEVELOPER_BLOCK_BOTTOM_LINE:"dev-block__bottom-line",DEVELOPER_NAME:"dev-block__dev-name",DEVELOPER_POSITION:"dev-block__dev-position",DEVELOPER_BIO_BLOCK:"dev-block__bio-block",DEVELOPER_BIO_TEXT:"dev-block__bio-text",DEVELOPER_CONTRIB_GH_LINK_WRAPPER:"dev-block__contrib-gh-link-wrap",DEVELOPER_CONTRIB_BLOCK:"dev-block__contrib-block",DEVELOPER_CONTRIB_TITLE:"dev-block__contrib-title",DEVELOPER_CONTRIB_TEXT:"dev-block__contrib-text",DEVELOPER_GITHUB_LINK:"dev-block__gh-link",DEVELOPER_GITHUB_LOGO:"dev-block__gh-logo"},t.ABOUT_US_TEXT={ABOUT:"About Us"},t.TEXT={COLLAB_CONTRIB_BLOCK_TITLE:"Collaboration and contribution",COLLAB_CONTRIB_BLOCK_TEXT:"Our team's interaction was based on daily communication in the Discord channel, including voice communication, which allowed us to promptly resolve any issues that arose. The use of Trello board and regular communication allowed us to effectively distribute the sprint tasks equally among the participants, and daily progress reports allowed us to clearly track the sprint process.",GRATITUDE_BLOCK_TITLE:"Gratitude to",GRATITUDE_BLOCK_TEXT:"Special thanks to RSSchool and its creators for the wonderful opportunity to learn and change your life for free.",DEVELOPERS_TEAM_TITLE:"Development team",DEVELOPER_INFO_SHORT_BIO_TITLE:"Biography",DEVELOPER_INFO_DISTINCTIVE_CONTRIBUTION_TITLE:"Distinctive contribution"},t.DEVELOPERS_DATA=[{IMG_LINK:"./assets/images/ilya-photo.jpg",FIRST_NAME:"Ilya",POSITION:"Frontend developer",SHORT_BIO:"Worked in logistics for almost 2 years. Then I decided to change my life. That's how I came to RSSchool, and this is my second attempt to take this course.",DISTINCTIVE_CONTRIBUTION:"CommerceTools administration\nCatalog filters\nLogin page\n Work with API\nAbout us page",GITHUB_LINK:"https://github.com/toronto-tokyo"},{IMG_LINK:"./assets/images/vlad-photo.jpg",FIRST_NAME:"Vladislav",POSITION:"Team lead",SHORT_BIO:"I live by the principle: \"If they give you, take it, if they don't give you, take it.\" And I'm a genius at it!",DISTINCTIVE_CONTRIBUTION:"Application architecture\nRouting\nCart page\nProduct page\nDevelopment environment configurement",GITHUB_LINK:"https://github.com/GinezisNWD"},{IMG_LINK:"./assets/images/mira-photo.jpg",FIRST_NAME:"Miroslav",POSITION:"Frontend developer",SHORT_BIO:"I have been working as an IT Support Technician for a few years. Right now I'm studying frontend development to challenge myself and potentially open a new career path.",DISTINCTIVE_CONTRIBUTION:"Jest testing\nGitHub repository administration\nProject design & responsive layout\nCatalog page\nRegistration and profile page\n",GITHUB_LINK:"https://github.com/miroslav-zarenkov"}]},501:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});const i=n(111),s=n(644),r=n(582);class a extends s.View{constructor(){super("section",r.ABOUT_US_CLASSES.ABOUT),this.configureView()}configureView(){this.addCollabContribBlock(),this.addDevelopersBlock(),this.addGratitudeBlock()}addCollabContribBlock(){const e=new i.ElementCreator("div",r.ABOUT_US_CLASSES.TEXT_BLOCK),t=new i.ElementCreator("h2",r.ABOUT_US_CLASSES.TEXT_BLOCK_TITLE,r.TEXT.COLLAB_CONTRIB_BLOCK_TITLE),n=new i.ElementCreator("div",r.ABOUT_US_CLASSES.TEXT_BLOCK_TEXT,r.TEXT.COLLAB_CONTRIB_BLOCK_TEXT);e.addInnerElement(t),e.addInnerElement(n),this.viewElementCreator.addInnerElement(e)}addGratitudeBlock(){const e=new i.ElementCreator("div",r.ABOUT_US_CLASSES.TEXT_BLOCK),t=new i.ElementCreator("h2",r.ABOUT_US_CLASSES.TEXT_BLOCK_TITLE),n=new i.ElementCreator("span",r.ABOUT_US_CLASSES.TITLE_TEXT,r.TEXT.GRATITUDE_BLOCK_TITLE);t.addInnerElement(n);const s=new i.ElementCreator("a",r.ABOUT_US_CLASSES.TITLE_LINK);s.getElement().setAttribute("href","https://rs.school/js/");const a=new i.ElementCreator("img","mkl");a.getElement().setAttribute("src","./assets/images/rs_school_js.svg"),s.addInnerElement(a),t.addInnerElement(s);const o=new i.ElementCreator("div",r.ABOUT_US_CLASSES.TEXT_BLOCK_TEXT,r.TEXT.GRATITUDE_BLOCK_TEXT);e.addInnerElement(t),e.addInnerElement(o),this.viewElementCreator.addInnerElement(e)}addDevelopersBlock(){const e=new i.ElementCreator("div",r.ABOUT_US_CLASSES.DEVELOPERS_BLOCK),t=new i.ElementCreator("h2",r.ABOUT_US_CLASSES.TEXT_BLOCK_TITLE,r.TEXT.DEVELOPERS_TEAM_TITLE),n=new i.ElementCreator("div",r.ABOUT_US_CLASSES.DEVELOPERS_CONTENT);e.addInnerElement(t),e.addInnerElement(n),r.DEVELOPERS_DATA.forEach((e=>{const t=new i.ElementCreator("div",r.ABOUT_US_CLASSES.DEVELOPER_BLOCK),s=this.getDevBlockTopCreator({imgLink:e.IMG_LINK,firstName:e.FIRST_NAME,position:e.POSITION}),a=this.getDevBlockBottomCreator({biography:e.SHORT_BIO,contribution:e.DISTINCTIVE_CONTRIBUTION,gitHubLink:e.GITHUB_LINK});t.addInnerElement(s),t.addInnerElement(a),n.addInnerElement(t)})),this.viewElementCreator.addInnerElement(e)}getDevBlockTopCreator(e){const t=new i.ElementCreator("div",r.ABOUT_US_CLASSES.DEVELOPER_BLOCK_TOP_LINE),n=new i.ElementCreator("div",r.ABOUT_US_CLASSES.DEVELOPER_PHOTO_WRAPPER),s=new i.ElementCreator("img",r.ABOUT_US_CLASSES.DEVELOPER_PHOTO);s.getElement().setAttribute("src",`${e.imgLink}`),n.addInnerElement(s),t.addInnerElement(n);const a=new i.ElementCreator("div",r.ABOUT_US_CLASSES.DEVELOPER_NAME_POS_WRAPPER),o=new i.ElementCreator("div",r.ABOUT_US_CLASSES.DEVELOPER_NAME,`${e.firstName}`),d=new i.ElementCreator("div",r.ABOUT_US_CLASSES.DEVELOPER_POSITION,`${e.position}`);return a.addInnerElement(o),a.addInnerElement(d),t.addInnerElement(a),t}getDevBlockBottomCreator(e){const t=new i.ElementCreator("div",r.ABOUT_US_CLASSES.DEVELOPER_BLOCK_BOTTOM_LINE),n=new i.ElementCreator("div",r.ABOUT_US_CLASSES.DEVELOPER_BIO_TEXT,e.biography),s=new i.ElementCreator("div",r.ABOUT_US_CLASSES.DEVELOPER_CONTRIB_GH_LINK_WRAPPER),a=new i.ElementCreator("div",r.ABOUT_US_CLASSES.DEVELOPER_CONTRIB_BLOCK),o=new i.ElementCreator("div",r.ABOUT_US_CLASSES.DEVELOPER_CONTRIB_TITLE,r.TEXT.DEVELOPER_INFO_DISTINCTIVE_CONTRIBUTION_TITLE),d=new i.ElementCreator("div",r.ABOUT_US_CLASSES.DEVELOPER_CONTRIB_TEXT,e.contribution);a.addInnerElement(o),a.addInnerElement(d);const l=new i.ElementCreator("a",r.ABOUT_US_CLASSES.DEVELOPER_GITHUB_LINK);l.getElement().setAttribute("href",`${e.gitHubLink}`),l.getElement().setAttribute("target","_blanc");const c=new i.ElementCreator("img",r.ABOUT_US_CLASSES.DEVELOPER_GITHUB_LOGO);return c.getElement().setAttribute("src","./assets/images/github-logo.svg"),l.addInnerElement(c),s.addInnerElement(a),s.addInnerElement(l),t.addInnerElement(n),t.addInnerElement(s),t}}t.default=a},333:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.CART_TEXT=t.CART_CLASSES=void 0,t.CART_CLASSES={CART:"shopping-cart",HEADER:"shopping-cart__header",TITLE:"shopping-cart__title",CLEAR_CART_BUTTON:"shopping-cart__clear-button",LIST:"shopping-cart__list",BLOCK:"shopping-cart__block",BLOCK_TEXT:"shopping-cart__block-text",BLOCK_BUTTON:"shopping-cart__block-button",ITEM:["shopping-cart__item","shopping-cart-item"],ITEM_IMAGE:"shopping-cart-item__img",ITEM_MIDDLE_WRAPPER:"shopping-cart-item__middle-wrapper",ITEM_TITLE:"shopping-cart-item__title",ITEM_COUNT_WRAPPER:["shopping-cart-item__count","count"],COUNT_MINUS_BUTTON:["count__button","count__button_minus"],COUNT_VALUE:["count__value"],COUNT_PLUS_BUTTON:["count__button","count__button_plus"],ITEM_PRICE_WRAPPER:"shopping-cart-item__price-wrapper",ITEM_PRICE:"shopping-cart-item__price",ITEM_DISCOUNT_PRICE:"shopping-cart-item__discount-price",ITEM_PRICE_DISABLE:"shopping-cart-item__price_disable",ITEM_REMOVE_BUTTON:"shopping-cart-item__remove-button",PROMO_CODE_WRAPPER:"shopping-cart__promo-codes",PROMO_CODE:"promo-code",PROMO_CODE_BUTTON:"promo-code-submit",PRICES:"shopping-cart__prices",PRICES_TOTAL:"shopping-cart__prices-total",PRICES_DISCOUNT:"shopping-cart__prices-discounted"},t.CART_TEXT={TITLE:"Shopping Cart",CLEAR_CART_BUTTON:"Clear Cart",ITEM_REMOVE_BUTTON:"✖",COUNT_MINUS_BUTTON:" - ",COUNT_PLUS_BUTTON:" + ",PROMO_CODE:"Promo code",PROMO_CODE_ADD_BUTTON:"Add promo code",PROMO_CODE_REMOVE_BUTTON:"Remove promo code"}},250:function(e,t,n){var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(s,r){function a(e){try{d(i.next(e))}catch(e){r(e)}}function o(e){try{d(i.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}d((i=i.apply(e,t||[])).next())}))},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=n(644),a=n(333),o=n(425),d=n(111),l=s(n(507)),c=n(413);class u extends r.View{constructor(e,t){super("section",a.CART_CLASSES.CART),this.router=t,this.observer=e,this.cartList=new d.ElementCreator("div",a.CART_CLASSES.LIST),this.pricesWrapper=new d.ElementCreator("div",a.CART_CLASSES.PRICES),this.cartPriceTotalElement=null,this.cartPriceDiscountedElement=null,this.totalPrice=null,this.promoCodesWrapper=null,this.discountedPrice=null,this.configureView(),this.lineItems=null}configureView(){return i(this,void 0,void 0,(function*(){yield this.setLineItems(),this.createHeader(),this.createPromoCodes(),this.createCartList(),this.cartList.getElement().addEventListener("click",this.cartListClickHandler.bind(this)),this.createCartPrices()}))}setLineItems(){return i(this,void 0,void 0,(function*(){const e=yield o.CartAPI.getCart();this.totalPrice=e.discountCodes.length>0?e.totalPrice.centAmount/90:e.totalPrice.centAmount/100,this.discountedPrice=e.totalPrice.centAmount/100,this.lineItems=e.lineItems}))}createHeader(){const e=new d.ElementCreator("div",a.CART_CLASSES.HEADER),t=new d.ElementCreator("h2",a.CART_CLASSES.TITLE,a.CART_TEXT.TITLE);e.addInnerElement(t);const n=new d.ElementCreator("button",a.CART_CLASSES.CLEAR_CART_BUTTON,a.CART_TEXT.CLEAR_CART_BUTTON);n.getElement().addEventListener("click",this.clearCartButtonClickHandler.bind(this)),e.addInnerElement(n),this.viewElementCreator.addInnerElement(e)}createCartList(){var e;const t=this.cartList;this.lineItems.length<1?(this.promoCodesWrapper&&(this.promoCodesWrapper.getElement().innerHTML=""),this.createCartBlock()):null===(e=this.lineItems)||void 0===e||e.forEach((e=>{this.createCartItem(e)})),this.viewElementCreator.addInnerElement(t)}createPromoCodes(){this.promoCodesWrapper=new d.ElementCreator("div",a.CART_CLASSES.PROMO_CODE_WRAPPER);const e=new l.default(a.CART_CLASSES.CART,a.CART_CLASSES.PROMO_CODE,a.CART_TEXT.PROMO_CODE,"","text"),t=new d.ElementCreator("button",[a.CART_CLASSES.PROMO_CODE_BUTTON,"primary-button"],a.CART_TEXT.PROMO_CODE_ADD_BUTTON),n=new d.ElementCreator("button",[a.CART_CLASSES.PROMO_CODE_BUTTON,"primary-button"],a.CART_TEXT.PROMO_CODE_REMOVE_BUTTON);t.getElement().addEventListener("click",(()=>i(this,void 0,void 0,(function*(){try{const t=yield o.CartAPI.applyDiscountCode(e.getInputElement().value),n=yield t.json();if(console.log(n),this.observer.setCartState(n),this.totalPrice=n.discountCodes.length>0?n.totalPrice.centAmount/90:n.totalPrice.centAmount/100,this.discountedPrice=n.totalPrice.centAmount/100,this.updateCartPrice(`${this.totalPrice} $`,`${this.discountedPrice} $`),200!==t.status){e.getErrorLine().textContent="This promo code does not exists."}}catch(e){console.error(e)}})))),n.getElement().addEventListener("click",(()=>i(this,void 0,void 0,(function*(){const e=yield o.CartAPI.removeDiscountCode("52f00546-bfe7-4717-8683-a0351c0736f3"),t=yield e.json();console.log(t),this.observer.setCartState(t),this.totalPrice=t.discountCodes.length>0?t.totalPrice.centAmount/90:t.totalPrice.centAmount/100,this.discountedPrice=t.totalPrice.centAmount/100,this.updateCartPrice(`${this.totalPrice} $`,`${this.discountedPrice} $`),this.updateCartPrice(`${this.totalPrice} $`,`${this.discountedPrice} $`)})))),this.promoCodesWrapper.addInnerElement(e.getElement()),this.promoCodesWrapper.addInnerElement(t.getElement()),this.promoCodesWrapper.addInnerElement(n.getElement()),this.viewElementCreator.addInnerElement(this.promoCodesWrapper)}createCartPrices(){this.cartPriceTotalElement=new d.ElementCreator("div",a.CART_CLASSES.PRICES_TOTAL,""),this.cartPriceDiscountedElement=new d.ElementCreator("div",a.CART_CLASSES.PRICES_DISCOUNT,"Final price:"),this.pricesWrapper.addInnerElement(this.cartPriceTotalElement),this.pricesWrapper.addInnerElement(this.cartPriceDiscountedElement),this.viewElementCreator.addInnerElement(this.pricesWrapper),this.updateCartPrice(`${this.totalPrice} $`,`${this.discountedPrice} $`)}updateCartPrice(e,t){this.cartPriceTotalElement&&(this.cartPriceTotalElement.getElement().textContent=`Total price: ${e}`),this.cartPriceDiscountedElement&&(this.cartPriceDiscountedElement.getElement().textContent=`Final price: ${t}`)}createCartItem(e){const t=new d.ElementCreator("div",a.CART_CLASSES.ITEM),n=new d.ElementCreator("img",a.CART_CLASSES.ITEM_IMAGE);n.getElement().setAttribute("src",e.variant.images[0].url),t.addInnerElement(n);const i=this.createItemMiddleWrapper(e.name.en,e.quantity);t.addInnerElement(i);const s=e.price.value.centAmount/100,r=e.price.discounted.value.centAmount/100,o=this.createItemPriceWrapper(s,r);t.addInnerElement(o);const l=new d.ElementCreator("button",a.CART_CLASSES.ITEM_REMOVE_BUTTON,a.CART_TEXT.ITEM_REMOVE_BUTTON);t.addInnerElement(l),t.getElement().dataset.id=e.id,t.getElement().dataset.productId=e.productId,this.cartList.addInnerElement(t)}createItemMiddleWrapper(e,t){const n=new d.ElementCreator("div",a.CART_CLASSES.ITEM_MIDDLE_WRAPPER),i=new d.ElementCreator("h3",a.CART_CLASSES.ITEM_TITLE,e);n.addInnerElement(i);const s=new d.ElementCreator("div",a.CART_CLASSES.ITEM_COUNT_WRAPPER),r=new d.ElementCreator("button",a.CART_CLASSES.COUNT_MINUS_BUTTON,a.CART_TEXT.COUNT_MINUS_BUTTON);s.addInnerElement(r);const o=new d.ElementCreator("h3",a.CART_CLASSES.COUNT_VALUE,`${t.toString()}`);s.addInnerElement(o);const l=new d.ElementCreator("button",a.CART_CLASSES.COUNT_PLUS_BUTTON,a.CART_TEXT.COUNT_PLUS_BUTTON);return s.addInnerElement(l),n.addInnerElement(s),n}createItemPriceWrapper(e,t){const n=new d.ElementCreator("div",a.CART_CLASSES.ITEM_PRICE_WRAPPER),i=new d.ElementCreator("div",a.CART_CLASSES.ITEM_PRICE,`${e} $`);if(n.addInnerElement(i),void 0!==t){const e=new d.ElementCreator("div",a.CART_CLASSES.ITEM_DISCOUNT_PRICE,`${t} $`);i.getElement().classList.add(a.CART_CLASSES.ITEM_PRICE_DISABLE),n.addInnerElement(e)}return n}clearCartButtonClickHandler(){return i(this,void 0,void 0,(function*(){const e=yield o.CartAPI.clearCart();this.cartList.getElement().innerHTML="",this.pricesWrapper.getElement().innerHTML="",this.pricesWrapper.getElement().innerHTML="",this.lineItems=e.lineItems,this.observer.setCartState(e),this.totalPrice=e.discountCodes.length>0?e.totalPrice.centAmount/90:e.totalPrice.centAmount/100,this.discountedPrice=e.totalPrice.centAmount/100,this.createCartList(),this.pricesWrapper.getElement().innerHTML="",this.createCartPrices()}))}cartListClickHandler(e){return i(this,void 0,void 0,(function*(){const t=e.target;if(t.classList.contains("shopping-cart-item__img")||t.classList.contains("shopping-cart-item__title")){const e=t.closest(".shopping-cart-item"),n=null==e?void 0:e.dataset.id,i=e.dataset.productId;void 0!==n&&this.router.navigate(`catalog/${i}`)}if(t.classList.contains("shopping-cart-item__remove-button")){const e=t.closest(".shopping-cart-item"),n=null==e?void 0:e.dataset.id;yield this.removeItem(n,e)}if(t.classList.contains("count__button_minus")){const e=t.closest(".shopping-cart-item"),n=null==e?void 0:e.dataset.id,i=t.closest(".shopping-cart-item__count").children[1];if(Number(i.innerHTML)<=1){return void(0===(yield this.removeItem(n,e)).lineItems.length&&(this.promoCodesWrapper&&(this.promoCodesWrapper.getElement().innerHTML=""),this.createCartBlock()))}yield this.decrProductQuant(n,i)}if(t.classList.contains("count__button_plus")){const e=t.closest(".shopping-cart-item"),n=null==e?void 0:e.dataset.id,i=t.closest(".shopping-cart-item__count").children[1];yield this.incrProductQuant(n,i)}}))}removeItem(e,t){return i(this,void 0,void 0,(function*(){const n=yield o.CartAPI.removeProduct(e);return this.observer.setCartState(n),this.totalPrice=n.discountCodes.length>0?n.totalPrice.centAmount/90:n.totalPrice.centAmount/100,this.discountedPrice=n.totalPrice.centAmount/100,this.updateCartPrice(`${this.totalPrice} $`,`${this.discountedPrice} $`),t.remove(),n.lineItems.length<1&&(this.promoCodesWrapper&&(this.promoCodesWrapper.getElement().innerHTML=""),this.createCartBlock()),n}))}decrProductQuant(e,t){return i(this,void 0,void 0,(function*(){const n=t,i=Number(t.innerHTML),s=yield o.CartAPI.decrProductQuant(e,i);return n.innerHTML=""+(i-1),this.observer.setCartState(s),this.totalPrice=s.discountCodes.length>0?s.totalPrice.centAmount/90:s.totalPrice.centAmount/100,this.discountedPrice=s.totalPrice.centAmount/100,this.updateCartPrice(`${this.totalPrice} $`,`${this.discountedPrice} $`),s}))}incrProductQuant(e,t){return i(this,void 0,void 0,(function*(){const n=t,i=Number(t.innerHTML),s=yield o.CartAPI.incrProductQuant(e,i);return n.innerHTML=`${i+1}`,this.observer.setCartState(s),this.totalPrice=s.discountCodes.length>0?s.totalPrice.centAmount/90:s.totalPrice.centAmount/100,this.discountedPrice=s.totalPrice.centAmount/100,this.updateCartPrice(`${this.totalPrice} $`,`${this.discountedPrice} $`),s}))}createCartBlock(){this.cartList.getElement().innerHTML="";const e=new d.ElementCreator("div",a.CART_CLASSES.BLOCK,""),t=new d.ElementCreator("p",a.CART_CLASSES.BLOCK_TEXT,"Your Shopping Cart is empty");e.addInnerElement(t);const n=new d.ElementCreator("button",a.CART_CLASSES.BLOCK_BUTTON,"Start Shopping");n.getElement().addEventListener("click",(()=>{this.router.navigate(c.Pages.CATALOG)})),e.addInnerElement(n),this.cartList.addInnerElement(e)}}t.default=u},861:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.BREAD_CRUMBS_INFO=t.CATALOG_TEXT=t.CATALOG_CLASSES=void 0;const i=n(413);t.CATALOG_CLASSES={CATALOG:"catalog",LINKS_WRAPPER:"catalog__links-wrapper",LINK:"catalog__link",LINK_IMG:"catalog__link-img",LINK_TEXT:"catalog__link-text"},t.CATALOG_TEXT={PROCESSORS_LINK:"Processors",GRAPHIC_CARDS_LINK:"Graphic cards"},t.BREAD_CRUMBS_INFO=[{text:"PC-Components",isCurrent:!0,pagePath:i.Pages.CATALOG}]},799:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});const i=n(111),s=n(644),r=n(861),a=n(413),o=n(97);class d extends s.View{constructor(e){super("section",r.CATALOG_CLASSES.CATALOG),this.router=e,this.configureView()}configureView(){this.addBreadCrumbs(),this.addCategoryLinks()}addBreadCrumbs(){const e=new o.BreadCrumbsCreator(r.BREAD_CRUMBS_INFO,this.router);this.viewElementCreator.addInnerElement(e.getElement())}addCategoryLinks(){const e=new i.ElementCreator("div",r.CATALOG_CLASSES.LINKS_WRAPPER),t=this.getProcessorsLink({src:"./assets/images/cpu.svg",text:r.CATALOG_TEXT.PROCESSORS_LINK,callback:()=>this.router.navigate(a.Pages.PROCESSORS)}),n=this.getProcessorsLink({src:"./assets/images/graphic-card.svg",text:r.CATALOG_TEXT.GRAPHIC_CARDS_LINK,callback:()=>this.router.navigate(a.Pages.GRAPHIC_CARDS)});e.addInnerElement(t),e.addInnerElement(n),this.viewElementCreator.addInnerElement(e)}getProcessorsLink(e){const t=new i.ElementCreator("a",r.CATALOG_CLASSES.LINK),n=new i.ElementCreator("img",r.CATALOG_CLASSES.LINK_IMG);n.getElement().setAttribute("src",e.src),t.addInnerElement(n);const s=new i.ElementCreator("div",r.CATALOG_CLASSES.LINK_TEXT,e.text);return t.getElement().addEventListener("click",e.callback),t.addInnerElement(s),t.getElement()}}t.default=d},526:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.CATEGORY_ID=t.SORT_OPTIONS=t.TEXT=t.INPUT_TYPE=t.INPUT_LABEL=t.INITIAL_VALUE=t.PLACEHOLDER=t.CssClasses=void 0,t.CssClasses={FILTERS:"filters",SEARCH_INPUT:"search",SORT:"filters__sort-bar",SORT_OPTION:"filters__sort-option",FILTERS_BLOCK:"filters__block",FILTERS_HEADER:"filters__header",PRICE_LINE:"filters__price-line",PRICE_SPLITTER:"filters__price-splitter",PRICE_INPUT:"price",BRANDS_LIST:"filters__brands-list",BRANDS_LINE:"filters__brands-line",CHECKBOX_INPUT:"checkbox",RESET_BUTTON:"filters__reset-button",ACCORDION_BUTTON:"filters__accordion-button",ACCORDION_BUTTON_ACTIVE:"filters__accordion-button--active",ACCORDION_MENU:"filters__accordion-menu",ACCORDION_MENU_ACTIVE:"filters__accordion-menu--active",NAVIGATION_CATEGORY:"filters__navigation-category",NAVIGATION_SUBCATEGORY:"filters__navigation-subcategory",NAVIGATION_SUBCATEGORY_ACTIVE:"filters__navigation-subcategory--active",CURRENT_FILTER:"filters__current-filter"},t.PLACEHOLDER={SEARCH_INPUT:"",PRICE_INPUT:"",BRANDS_INPUT:""},t.INITIAL_VALUE={INPUT:"",SORT_BAR:"price desc"},t.INPUT_LABEL={SEARCH_INPUT:"Search...",PRICE_MIN_INPUT:"from",PRICE_MAX_INPUT:"to"},t.INPUT_TYPE={SEARCH_INPUT:"text",PRICE_INPUT:"number",BRANDS_INPUT:"checkbox"},t.TEXT={PRICE_HEADER:"Price(USD)",BRANDS_HEADER:"Brands",CHIPSETS_HEADER:"Chipsets",VRAM_AMOUNT_HEADER:"Vram amount",RESET_BUTTON:"Reset",NAVIGATION_BUTTON:"Navigation",PC_COMPONENTS_CATEGORY:"PC-Components",PROCESSORS_SUBCATEGORY:"Processors",GRAPHIC_CARDS_SUBCATEGORY:"Graphic cards",CURRENT_FILTERS:"Current filters"},t.SORT_OPTIONS=[{TEXT:"Price: height to low",VALUE:"price desc"},{TEXT:"Price: low to height",VALUE:"price asc"},{TEXT:"Name: A-Z",VALUE:"name.en asc"},{TEXT:"Name: Z-A",VALUE:"name.en desc"}],t.CATEGORY_ID="0b0e9d3c-edea-4285-a921-4346b70db822"},40:function(e,t,n){var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(s,r){function a(e){try{d(i.next(e))}catch(e){r(e)}}function o(e){try{d(i.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}d((i=i.apply(e,t||[])).next())}))},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.FiltersView=void 0;const r=n(942),a=n(413),o=n(111),d=s(n(507)),l=n(644),c=n(526);class u extends l.View{constructor(e){super("section",c.CssClasses.FILTERS),this.router=e,this.brands=new Set,this.chipsets=new Set,this.vramAmounts=new Set,this.searchInput=null,this.sortBar=null,this.minPriceInput=null,this.maxPriceInput=null,this.currentFiltersView=null,this.configureView()}configureView(){return i(this,void 0,void 0,(function*(){this.addCatalogNavigation(),this.addActiveFiltersBlock(),this.addSearchBar(),this.addSortBar(),this.addPriceBlock(),yield this.addBrandsList(),yield this.addChipsetList(),yield this.addVramAmountList(),this.addResetButton()}))}addCatalogNavigation(){const e=new o.ElementCreator("div",c.CssClasses.FILTERS_BLOCK),t=new o.ElementCreator("button",c.CssClasses.ACCORDION_BUTTON,c.TEXT.NAVIGATION_BUTTON),n=new o.ElementCreator("div",c.CssClasses.ACCORDION_MENU),i=new o.ElementCreator("a",c.CssClasses.NAVIGATION_CATEGORY,c.TEXT.PC_COMPONENTS_CATEGORY),s=new o.ElementCreator("a",c.CssClasses.NAVIGATION_SUBCATEGORY,c.TEXT.PROCESSORS_SUBCATEGORY),r=new o.ElementCreator("a",[c.CssClasses.NAVIGATION_SUBCATEGORY,c.CssClasses.NAVIGATION_SUBCATEGORY_ACTIVE],c.TEXT.GRAPHIC_CARDS_SUBCATEGORY);e.getElement().addEventListener("click",(e=>{e.target===t.getElement()&&(t.getElement().classList.toggle(c.CssClasses.ACCORDION_BUTTON_ACTIVE),n.getElement().classList.toggle(c.CssClasses.ACCORDION_MENU_ACTIVE)),e.target===i.getElement()&&this.router.navigate(a.Pages.CATALOG),e.target===s.getElement()&&this.router.navigate(a.Pages.PROCESSORS),e.target===r.getElement()&&this.router.navigate(a.Pages.GRAPHIC_CARDS)})),n.addInnerElement(i),n.addInnerElement(s),n.addInnerElement(r),e.addInnerElement(t),e.addInnerElement(n),this.viewElementCreator.addInnerElement(e)}addActiveFiltersBlock(){const e=new o.ElementCreator("div",c.CssClasses.FILTERS_BLOCK),t=new o.ElementCreator("button",c.CssClasses.ACCORDION_BUTTON,c.TEXT.CURRENT_FILTERS),n=new o.ElementCreator("div",c.CssClasses.ACCORDION_MENU);t.getElement().addEventListener("click",(e=>{e.target===t.getElement()&&(t.getElement().classList.toggle(c.CssClasses.ACCORDION_BUTTON_ACTIVE),n.getElement().classList.toggle(c.CssClasses.ACCORDION_MENU_ACTIVE))})),this.currentFiltersView=n,e.addInnerElement(t),e.addInnerElement(n),this.viewElementCreator.addInnerElement(e)}addActiveFilters(e){e.forEach((e=>{var t;const n=new o.ElementCreator("div",c.CssClasses.CURRENT_FILTER,e);null===(t=this.currentFiltersView)||void 0===t||t.addInnerElement(n)}))}updateCurrentFiltersView(){for(var e,t,n,i,s,r,a,o,d;null===(e=this.currentFiltersView)||void 0===e?void 0:e.getElement().firstChild;)null===(n=null===(t=this.currentFiltersView)||void 0===t?void 0:t.getElement().firstChild)||void 0===n||n.remove();const l=[];if((null===(i=this.searchInput)||void 0===i?void 0:i.value)&&l.push(`Search: ${null===(s=this.searchInput)||void 0===s?void 0:s.value}`),((null===(r=this.minPriceInput)||void 0===r?void 0:r.value)||(null===(a=this.maxPriceInput)||void 0===a?void 0:a.value))&&l.push(`Price(USD): ${(null===(o=this.minPriceInput)||void 0===o?void 0:o.value)||"0"} - ${(null===(d=this.maxPriceInput)||void 0===d?void 0:d.value)||"∞"}`),this.brands.size){const e=[...this.brands].map((e=>`"${e.value}"`)).join(", ");l.push(`Brands: ${e}`)}if(this.chipsets.size){const e=[...this.chipsets].map((e=>`"${e.value}"`)).join(", ");l.push(`Chipsets: ${e}`)}if(this.vramAmounts.size){const e=[...this.vramAmounts].map((e=>`"${e.value}"`)).join(", ");l.push(`VRam amount: ${e}`)}this.addActiveFilters(l)}addSearchBar(){const e=new d.default(c.CssClasses.FILTERS,c.CssClasses.SEARCH_INPUT,c.INPUT_LABEL.SEARCH_INPUT,c.INITIAL_VALUE.INPUT,c.INPUT_TYPE.SEARCH_INPUT,c.PLACEHOLDER.SEARCH_INPUT),t=e.getInputElement();this.searchInput=t,t.addEventListener("keydown",this.searchBarCallback.bind(this)),this.viewElementCreator.addInnerElement(e.getElement())}searchBarCallback(e){return i(this,void 0,void 0,(function*(){if(!this.searchInput)throw new Error;"Enter"!==e.code&&"Enter"!==e.key||(yield this.getFilteredProducts(),this.updateCurrentFiltersView())}))}addSortBar(){const e=new o.ElementCreator("select",c.CssClasses.SORT);c.SORT_OPTIONS.forEach((t=>{const n=new o.ElementCreator("option",c.CssClasses.SORT_OPTION,t.TEXT).getElement();n instanceof HTMLOptionElement&&(n.value=t.VALUE),e.addInnerElement(n)}));const t=e.getElement();t instanceof HTMLSelectElement&&(this.sortBar=t,t.value=c.INITIAL_VALUE.SORT_BAR),t.addEventListener("change",this.sortBarCallback.bind(this)),this.viewElementCreator.addInnerElement(t)}sortBarCallback(){return i(this,void 0,void 0,(function*(){yield this.getFilteredProducts()}))}addPriceBlock(){const e=new o.ElementCreator("div",c.CssClasses.FILTERS_BLOCK),t=new o.ElementCreator("header",c.CssClasses.FILTERS_HEADER,c.TEXT.PRICE_HEADER),n=new o.ElementCreator("div",c.CssClasses.PRICE_LINE);this.addPriceLine(n),e.addInnerElement(t.getElement()),e.addInnerElement(n.getElement()),this.viewElementCreator.addInnerElement(e.getElement())}addPriceLine(e){const t=new d.default(c.CssClasses.FILTERS,c.CssClasses.PRICE_INPUT,c.INPUT_LABEL.PRICE_MIN_INPUT,c.INITIAL_VALUE.INPUT,c.INPUT_TYPE.PRICE_INPUT,c.PLACEHOLDER.PRICE_INPUT);this.minPriceInput=t.getInputElement(),t.getInputElement().addEventListener("keydown",this.priceKeyDownCallback.bind(this)),t.getInputElement().addEventListener("input",this.priceInputCallback.bind(this));const n=new o.ElementCreator("div",c.CssClasses.PRICE_SPLITTER),i=new d.default(c.CssClasses.FILTERS,c.CssClasses.PRICE_INPUT,c.INPUT_LABEL.PRICE_MAX_INPUT,c.INITIAL_VALUE.INPUT,c.INPUT_TYPE.PRICE_INPUT,c.PLACEHOLDER.PRICE_INPUT);this.maxPriceInput=i.getInputElement(),i.getInputElement().addEventListener("keydown",this.priceKeyDownCallback.bind(this)),i.getInputElement().addEventListener("input",this.priceInputCallback.bind(this)),e.addInnerElement(t.getElement()),e.addInnerElement(n.getElement()),e.addInnerElement(i.getElement())}priceKeyDownCallback(e){"KeyE"!==e.code&&"e"!==e.key||e.preventDefault()}priceInputCallback(){return i(this,void 0,void 0,(function*(){yield this.getFilteredProducts.call(this),this.updateCurrentFiltersView()}))}addBrandsList(){return i(this,void 0,void 0,(function*(){const e=new o.ElementCreator("div",c.CssClasses.FILTERS_BLOCK),t=new o.ElementCreator("header",c.CssClasses.FILTERS_HEADER,c.TEXT.BRANDS_HEADER),n=new o.ElementCreator("ul",c.CssClasses.BRANDS_LIST);try{const{manufacturers:e}=yield r.ProductAPI.getFiltersData(c.CATEGORY_ID);e.forEach((e=>{const t=new o.ElementCreator("li",c.CssClasses.BRANDS_LINE),i=new d.default(c.CssClasses.FILTERS,c.CssClasses.CHECKBOX_INPUT,`${e.term} (${e.count})`,`${e.term}`,c.INPUT_TYPE.BRANDS_INPUT,c.PLACEHOLDER.BRANDS_INPUT);t.addInnerElement(i.getElement()),n.addInnerElement(t)}))}catch(e){console.log(e)}n.getElement().addEventListener("change",this.brandsListCallback.bind(this)),e.addInnerElement(t),e.addInnerElement(n),this.viewElementCreator.addInnerElement(e)}))}addChipsetList(){return i(this,void 0,void 0,(function*(){const e=new o.ElementCreator("div",c.CssClasses.FILTERS_BLOCK),t=new o.ElementCreator("header",c.CssClasses.FILTERS_HEADER,c.TEXT.CHIPSETS_HEADER),n=new o.ElementCreator("ul",c.CssClasses.BRANDS_LIST);try{const{chipset:e}=yield r.ProductAPI.getFiltersData(c.CATEGORY_ID);e.forEach((e=>{const t=new o.ElementCreator("li",c.CssClasses.BRANDS_LINE),i=new d.default(c.CssClasses.FILTERS,c.CssClasses.CHECKBOX_INPUT,`${e.term} (${e.count})`,`${e.term}`,c.INPUT_TYPE.BRANDS_INPUT,c.PLACEHOLDER.BRANDS_INPUT);t.addInnerElement(i.getElement()),n.addInnerElement(t)}))}catch(e){console.log(e)}n.getElement().addEventListener("change",this.chipsetListCallback.bind(this)),e.addInnerElement(t),e.addInnerElement(n),this.viewElementCreator.addInnerElement(e)}))}addVramAmountList(){return i(this,void 0,void 0,(function*(){const e=new o.ElementCreator("div",c.CssClasses.FILTERS_BLOCK),t=new o.ElementCreator("header",c.CssClasses.FILTERS_HEADER,c.TEXT.VRAM_AMOUNT_HEADER),n=new o.ElementCreator("ul",c.CssClasses.BRANDS_LIST);try{const{vramAmount:e}=yield r.ProductAPI.getFiltersData(c.CATEGORY_ID);e.forEach((e=>{const t=new o.ElementCreator("li",c.CssClasses.BRANDS_LINE),i=new d.default(c.CssClasses.FILTERS,c.CssClasses.CHECKBOX_INPUT,`${e.term} (${e.count})`,`${e.term}`,c.INPUT_TYPE.BRANDS_INPUT,c.PLACEHOLDER.BRANDS_INPUT);t.addInnerElement(i.getElement()),n.addInnerElement(t)}))}catch(e){console.log(e)}n.getElement().addEventListener("change",this.vramAmountListCallback.bind(this)),e.addInnerElement(t),e.addInnerElement(n),this.viewElementCreator.addInnerElement(e)}))}brandsListCallback(e){return i(this,void 0,void 0,(function*(){e.target instanceof HTMLInputElement&&e.target.closest("input")&&(!0===e.target.checked&&(this.brands.add(e.target),this.getFilteredProducts.call(this)),!1===e.target.checked&&(this.brands.delete(e.target),this.getFilteredProducts.call(this)),this.updateCurrentFiltersView())}))}chipsetListCallback(e){return i(this,void 0,void 0,(function*(){e.target instanceof HTMLInputElement&&e.target.closest("input")&&(!0===e.target.checked&&(this.chipsets.add(e.target),this.getFilteredProducts.call(this)),!1===e.target.checked&&(this.chipsets.delete(e.target),this.getFilteredProducts.call(this)),this.updateCurrentFiltersView())}))}vramAmountListCallback(e){return i(this,void 0,void 0,(function*(){e.target instanceof HTMLInputElement&&e.target.closest("input")&&(!0===e.target.checked&&(this.vramAmounts.add(e.target),this.getFilteredProducts.call(this)),!1===e.target.checked&&(this.vramAmounts.delete(e.target),this.getFilteredProducts.call(this)),this.updateCurrentFiltersView())}))}addResetButton(){const e=new o.ElementCreator("button",c.CssClasses.RESET_BUTTON,c.TEXT.RESET_BUTTON);e.getElement().addEventListener("click",this.resetButtonCallback.bind(this)),this.viewElementCreator.addInnerElement(e)}resetButtonCallback(){return i(this,void 0,void 0,(function*(){[this.searchInput,this.minPriceInput,this.maxPriceInput].forEach((e=>{const t=e;t&&(t.value=c.INITIAL_VALUE.INPUT,t.focus(),t.blur())})),this.sortBar&&(this.sortBar.value=c.INITIAL_VALUE.SORT_BAR),this.resetCheckboxElements(this.brands),this.resetCheckboxElements(this.chipsets),this.resetCheckboxElements(this.vramAmounts),this.updateCurrentFiltersView(),yield this.getFilteredProducts()}))}resetCheckboxElements(e){[...e].forEach((t=>{const n=t;n.checked=!1,e.delete(n)}))}getFilteredProducts(){var e,t;return i(this,void 0,void 0,(function*(){const n=null===(e=this.searchInput)||void 0===e?void 0:e.value,i=null===(t=this.sortBar)||void 0===t?void 0:t.value;if(!this.minPriceInput||!this.maxPriceInput)throw new Error;const s=Number(this.minPriceInput.value||"0"),a=Number(this.maxPriceInput.value||"*"),o=String(100*s||"0"),d=String(100*a||"*"),l=[...this.brands].map((e=>`"${e.value}"`)).join(","),u=[...this.chipsets].map((e=>`"${e.value}"`)).join(","),E=[...this.vramAmounts].map((e=>`"${e.value}"`)).join(",");yield r.ProductAPI.getFilteredProducts({categoryId:c.CATEGORY_ID,search:n,sort:i,minPriceValue:o,maxPriceValue:d,brands:l,chipset:u,vramAmount:E})}))}}t.FiltersView=u},951:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.BREAD_CRUMBS_INFO=t.CATEGORY_TEXT=t.CATEGORY_CLASSES=void 0;const i=n(413);t.CATEGORY_CLASSES={CATALOG:"category",TITLE:"category__title",CONTENT:"category__content",ASIDE:"category__content-aside",PRODUCTS:"category__content-products"},t.CATEGORY_TEXT={TITLE:"Catalog",CONTENT:"",ASIDE:"",PRODUCTS:""},t.BREAD_CRUMBS_INFO=[{text:"PC-Components",isCurrent:!1,pagePath:i.Pages.CATALOG},{text:"Video cards",isCurrent:!0,pagePath:i.Pages.GRAPHIC_CARDS}]},906:function(e,t,n){var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(s,r){function a(e){try{d(i.next(e))}catch(e){r(e)}}function o(e){try{d(i.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}d((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const s=n(644),r=n(111),a=n(951),o=n(942),d=n(852),l=n(40),c=n(97),u=n(425);class E extends s.View{constructor(e,t){super("section",a.CATEGORY_CLASSES.CATALOG),this.currentPage=0,this.totalPages=0,this.observer=t,this.content=null,this.contentProducts=null,this.cardsWrapper=null,this.router=e,this.query={categoryId:"0b0e9d3c-edea-4285-a921-4346b70db822",search:"",sort:"price desc",minPriceValue:"0",maxPriceValue:"*",brands:""},this.configView()}configView(){var e;this.addTitle(),this.addContent(),this.addAside(),this.addProductsWrapper(),null===(e=this.content)||void 0===e||e.getElement().addEventListener("click",this.cardWrapperClickHandler.bind(this))}addTitle(){const e=new r.ElementCreator("h1",a.CATEGORY_CLASSES.TITLE,a.CATEGORY_TEXT.TITLE);this.viewElementCreator.addInnerElement(e)}addContent(){const e=new r.ElementCreator("div",a.CATEGORY_CLASSES.CONTENT,a.CATEGORY_TEXT.CONTENT);this.content=e,this.viewElementCreator.addInnerElement(e)}addAside(){var e;const t=new r.ElementCreator("aside",a.CATEGORY_CLASSES.ASIDE,a.CATEGORY_TEXT.ASIDE),n=new l.FiltersView(this.router);t.addInnerElement(n.getHTMLElement()),null===(e=this.content)||void 0===e||e.addInnerElement(t),document.addEventListener("myCustomEvent",(e=>{var t;(0,d.clearElement)(null===(t=this.contentProducts)||void 0===t?void 0:t.getElement());const n=e.detail.data;this.currentPage=e.detail.currentPage,this.totalPages=e.detail.totalPages,this.query=e.detail.query;const i=n.map((e=>{var t,n,i;const s=e.name.en;let r="";e.metaDescription&&(r=e.metaDescription.en);const a=e.masterVariant.prices[0].value.centAmount/100,o=null===(i=null===(n=null===(t=e.masterVariant.prices[0])||void 0===t?void 0:t.discounted)||void 0===n?void 0:n.value)||void 0===i?void 0:i.centAmount;let d;o&&(d=o/100);const l=e.masterVariant.images[0].url,{id:c}=e;return{name:s,description:r,price:a,image:l,discount:d,id:c}}));this.addBreadCrumbs(),this.createProductsWrapper(),this.createAllProductCards(i),this.createPaginator()}))}createPaginator(){var e;const t=new r.ElementCreator("div","paginator",""),n=new r.ElementCreator("button","paginator__btn","<");0===this.currentPage&&n.getElement().setAttribute("disabled",""),n.getElement().addEventListener("click",(()=>{this.currentPage>0&&(this.currentPage-=1,this.fetchFilteredProducts())})),t.addInnerElement(n);for(let e=0;e<this.totalPages;e+=1){const n=new r.ElementCreator("button","paginator__btn",`${e+1}`);this.currentPage===e&&n.getElement().classList.add("active"),n.getElement().addEventListener("click",(()=>{this.currentPage=e,this.fetchFilteredProducts()})),t.addInnerElement(n)}const i=new r.ElementCreator("button","paginator__btn",">");this.currentPage===this.totalPages-1&&i.getElement().setAttribute("disabled",""),i.getElement().addEventListener("click",(()=>{this.currentPage<this.totalPages-1&&(this.currentPage+=1,this.fetchFilteredProducts())})),t.addInnerElement(i),null===(e=this.contentProducts)||void 0===e||e.addInnerElement(t)}fetchFilteredProducts(){return i(this,void 0,void 0,(function*(){const e=this.query;yield o.ProductAPI.getFilteredProducts(e,this.currentPage)}))}addProductsWrapper(){var e;return i(this,void 0,void 0,(function*(){const t=new r.ElementCreator("div",a.CATEGORY_CLASSES.PRODUCTS,"");this.contentProducts=t,null===(e=this.content)||void 0===e||e.addInnerElement(t),this.addBreadCrumbs(),this.createProductsWrapper(),this.fetchFilteredProducts(),this.createPaginator()}))}addBreadCrumbs(){var e;const t=new c.BreadCrumbsCreator(a.BREAD_CRUMBS_INFO,this.router);null===(e=this.contentProducts)||void 0===e||e.addInnerElement(t.getElement())}createProductsWrapper(){var e;const t=new r.ElementCreator("div","cards-wrapper","");this.cardsWrapper=t,null===(e=this.contentProducts)||void 0===e||e.addInnerElement(t)}createAllProductCards(e){return i(this,void 0,void 0,(function*(){e.forEach((e=>i(this,void 0,void 0,(function*(){var t;null===(t=this.cardsWrapper)||void 0===t||t.addInnerElement(yield this.createProductCard(e))}))))}))}createProductCard(e){return i(this,void 0,void 0,(function*(){const{name:t,description:n,price:i,image:s,discount:a,id:o}=e,d=yield u.CartAPI.itemIsInCart(o),l=new r.ElementCreator("div","product-card",""),c=new r.ElementCreator("h2","product-card__name",`${t}`),E=new r.ElementCreator("img","product-card__image",""),h=new r.ElementCreator("div","product-card__price",`$${i}`),m=new r.ElementCreator("div","product-card__discount",`$${a}`),_=new r.ElementCreator("button","product-card__buy","Add to cart");d?(_.getElement().classList.add("product-card__in-cart"),_.getElement().textContent="Go to cart"):(_.getElement().classList.remove("product-card__in-cart"),_.getElement().textContent="Add to cart");const C=new r.ElementCreator("div","product-card__description",`${n}`);return E.getElement().setAttribute("src",`${s}`),l.addInnerElement(c),l.addInnerElement(E),l.addInnerElement(h),l.addInnerElement(m),l.addInnerElement(_),l.addInnerElement(C),l.getElement().dataset.id=o,_.getElement().addEventListener("click",(e=>{e.stopPropagation(),d?this.router.navigate("cart"):this.buyButtonClickHandler(o,e)})),l}))}cardWrapperClickHandler(e){const t=e.target;if(t instanceof HTMLElement){const e=t.closest(".product-card");if(e){const t=e.getAttribute("data-id");this.router.navigate(`catalog/${t}`)}}}buyButtonClickHandler(e,t){var n;return i(this,void 0,void 0,(function*(){t.stopPropagation();const i=yield u.CartAPI.itemIsInCart(e),s=t.target;if(i)null===(n=this.observer.header)||void 0===n||n.cartClickHandler(this.router);else{const t=yield u.CartAPI.addProductToCart(e);this.observer.setCartState(t),s.classList.add("product-card__in-cart"),s.textContent="Go to cart"}}))}}t.default=E},370:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.CATEGORY_ID=t.SORT_OPTIONS=t.TEXT=t.INPUT_TYPE=t.INPUT_LABEL=t.INITIAL_VALUE=t.PLACEHOLDER=t.CssClasses=void 0,t.CssClasses={FILTERS:"filters",SEARCH_INPUT:"search",SORT:"filters__sort-bar",SORT_OPTION:"filters__sort-option",FILTERS_BLOCK:"filters__block",FILTERS_HEADER:"filters__header",PRICE_LINE:"filters__price-line",PRICE_SPLITTER:"filters__price-splitter",PRICE_INPUT:"price",BRANDS_LIST:"filters__brands-list",BRANDS_LINE:"filters__brands-line",CHECKBOX_INPUT:"checkbox",RESET_BUTTON:"filters__reset-button",ACCORDION_BUTTON:"filters__accordion-button",ACCORDION_BUTTON_ACTIVE:"filters__accordion-button--active",ACCORDION_MENU:"filters__accordion-menu",ACCORDION_MENU_ACTIVE:"filters__accordion-menu--active",NAVIGATION_CATEGORY:"filters__navigation-category",NAVIGATION_SUBCATEGORY:"filters__navigation-subcategory",NAVIGATION_SUBCATEGORY_ACTIVE:"filters__navigation-subcategory--active",CURRENT_FILTER:"filters__current-filter"},t.PLACEHOLDER={SEARCH_INPUT:"",PRICE_INPUT:"",BRANDS_INPUT:""},t.INITIAL_VALUE={INPUT:"",SORT_BAR:"price desc"},t.INPUT_LABEL={SEARCH_INPUT:"Search...",PRICE_MIN_INPUT:"from",PRICE_MAX_INPUT:"to"},t.INPUT_TYPE={SEARCH_INPUT:"text",PRICE_INPUT:"number",BRANDS_INPUT:"checkbox"},t.TEXT={PRICE_HEADER:"Price(USD)",BRANDS_HEADER:"Brands",SOCKETS_HEADER:"Socket",CORES_AMOUNT_HEADER:"Cores amount",RESET_BUTTON:"Reset",NAVIGATION_BUTTON:"Navigation",PC_COMPONENTS_CATEGORY:"PC-Components",PROCESSORS_SUBCATEGORY:"Processors",GRAPHIC_CARDS_SUBCATEGORY:"Graphic cards",CURRENT_FILTERS:"Current filters"},t.SORT_OPTIONS=[{TEXT:"Price: height to low",VALUE:"price desc"},{TEXT:"Price: low to height",VALUE:"price asc"},{TEXT:"Name: A-Z",VALUE:"name.en asc"},{TEXT:"Name: Z-A",VALUE:"name.en desc"}],t.CATEGORY_ID="0c1874b3-f13a-4879-ae0c-4cc69c02d71c"},493:function(e,t,n){var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(s,r){function a(e){try{d(i.next(e))}catch(e){r(e)}}function o(e){try{d(i.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}d((i=i.apply(e,t||[])).next())}))},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.FiltersView=void 0;const r=n(942),a=n(413),o=n(111),d=s(n(507)),l=n(644),c=n(370);class u extends l.View{constructor(e){super("section",c.CssClasses.FILTERS),this.router=e,this.brands=new Set,this.sockets=new Set,this.coresAmount=new Set,this.searchInput=null,this.sortBar=null,this.minPriceInput=null,this.maxPriceInput=null,this.currentFiltersView=null,this.configureView()}configureView(){return i(this,void 0,void 0,(function*(){this.addCatalogNavigation(),this.addActiveFiltersBlock(),this.addSearchBar(),this.addSortBar(),this.addPriceBlock(),yield this.addBrandsList(),yield this.addSocketsList(),yield this.addCoresAmountList(),this.addResetButton()}))}addCatalogNavigation(){const e=new o.ElementCreator("div",c.CssClasses.FILTERS_BLOCK),t=new o.ElementCreator("button",c.CssClasses.ACCORDION_BUTTON,c.TEXT.NAVIGATION_BUTTON),n=new o.ElementCreator("div",c.CssClasses.ACCORDION_MENU),i=new o.ElementCreator("a",c.CssClasses.NAVIGATION_CATEGORY,c.TEXT.PC_COMPONENTS_CATEGORY),s=new o.ElementCreator("a",[c.CssClasses.NAVIGATION_SUBCATEGORY,c.CssClasses.NAVIGATION_SUBCATEGORY_ACTIVE],c.TEXT.PROCESSORS_SUBCATEGORY),r=new o.ElementCreator("a",[c.CssClasses.NAVIGATION_SUBCATEGORY],c.TEXT.GRAPHIC_CARDS_SUBCATEGORY);e.getElement().addEventListener("click",(e=>{e.target===t.getElement()&&(t.getElement().classList.toggle(c.CssClasses.ACCORDION_BUTTON_ACTIVE),n.getElement().classList.toggle(c.CssClasses.ACCORDION_MENU_ACTIVE)),e.target===i.getElement()&&this.router.navigate(a.Pages.CATALOG),e.target===s.getElement()&&this.router.navigate(a.Pages.PROCESSORS),e.target===r.getElement()&&this.router.navigate(a.Pages.GRAPHIC_CARDS)})),n.addInnerElement(i),n.addInnerElement(s),n.addInnerElement(r),e.addInnerElement(t),e.addInnerElement(n),this.viewElementCreator.addInnerElement(e)}addActiveFiltersBlock(){const e=new o.ElementCreator("div",c.CssClasses.FILTERS_BLOCK),t=new o.ElementCreator("button",c.CssClasses.ACCORDION_BUTTON,c.TEXT.CURRENT_FILTERS),n=new o.ElementCreator("div",c.CssClasses.ACCORDION_MENU);t.getElement().addEventListener("click",(e=>{e.target===t.getElement()&&(t.getElement().classList.toggle(c.CssClasses.ACCORDION_BUTTON_ACTIVE),n.getElement().classList.toggle(c.CssClasses.ACCORDION_MENU_ACTIVE))})),this.currentFiltersView=n,e.addInnerElement(t),e.addInnerElement(n),this.viewElementCreator.addInnerElement(e)}addActiveFilters(e){e.forEach((e=>{var t;const n=new o.ElementCreator("div",c.CssClasses.CURRENT_FILTER,e);null===(t=this.currentFiltersView)||void 0===t||t.addInnerElement(n)}))}updateCurrentFiltersView(){for(var e,t,n,i,s,r,a,o,d;null===(e=this.currentFiltersView)||void 0===e?void 0:e.getElement().firstChild;)null===(n=null===(t=this.currentFiltersView)||void 0===t?void 0:t.getElement().firstChild)||void 0===n||n.remove();const l=[];if((null===(i=this.searchInput)||void 0===i?void 0:i.value)&&l.push(`Search: ${null===(s=this.searchInput)||void 0===s?void 0:s.value}`),((null===(r=this.minPriceInput)||void 0===r?void 0:r.value)||(null===(a=this.maxPriceInput)||void 0===a?void 0:a.value))&&l.push(`Price(USD): ${(null===(o=this.minPriceInput)||void 0===o?void 0:o.value)||"0"} - ${(null===(d=this.maxPriceInput)||void 0===d?void 0:d.value)||"∞"}`),this.brands.size){const e=[...this.brands].map((e=>`"${e.value}"`)).join(", ");l.push(`Brands: ${e}`)}if(this.sockets.size){const e=[...this.sockets].map((e=>`"${e.value}"`)).join(", ");l.push(`Sockets: ${e}`)}if(this.coresAmount.size){const e=[...this.coresAmount].map((e=>`"${e.value}"`)).join(", ");l.push(`Cores amount: ${e}`)}this.addActiveFilters(l)}addSearchBar(){const e=new d.default(c.CssClasses.FILTERS,c.CssClasses.SEARCH_INPUT,c.INPUT_LABEL.SEARCH_INPUT,c.INITIAL_VALUE.INPUT,c.INPUT_TYPE.SEARCH_INPUT,c.PLACEHOLDER.SEARCH_INPUT),t=e.getInputElement();this.searchInput=t,t.addEventListener("keydown",this.searchBarCallback.bind(this)),this.viewElementCreator.addInnerElement(e.getElement())}searchBarCallback(e){return i(this,void 0,void 0,(function*(){if(!this.searchInput)throw new Error;"Enter"!==e.code&&"Enter"!==e.key||(yield this.getFilteredProducts(),this.updateCurrentFiltersView())}))}addSortBar(){const e=new o.ElementCreator("select",c.CssClasses.SORT);c.SORT_OPTIONS.forEach((t=>{const n=new o.ElementCreator("option",c.CssClasses.SORT_OPTION,t.TEXT).getElement();n instanceof HTMLOptionElement&&(n.value=t.VALUE),e.addInnerElement(n)}));const t=e.getElement();t instanceof HTMLSelectElement&&(this.sortBar=t,t.value=c.INITIAL_VALUE.SORT_BAR),t.addEventListener("change",this.sortBarCallback.bind(this)),this.viewElementCreator.addInnerElement(t)}sortBarCallback(){return i(this,void 0,void 0,(function*(){yield this.getFilteredProducts()}))}addPriceBlock(){const e=new o.ElementCreator("div",c.CssClasses.FILTERS_BLOCK),t=new o.ElementCreator("header",c.CssClasses.FILTERS_HEADER,c.TEXT.PRICE_HEADER),n=new o.ElementCreator("div",c.CssClasses.PRICE_LINE);this.addPriceLine(n),e.addInnerElement(t.getElement()),e.addInnerElement(n.getElement()),this.viewElementCreator.addInnerElement(e.getElement())}addPriceLine(e){const t=new d.default(c.CssClasses.FILTERS,c.CssClasses.PRICE_INPUT,c.INPUT_LABEL.PRICE_MIN_INPUT,c.INITIAL_VALUE.INPUT,c.INPUT_TYPE.PRICE_INPUT,c.PLACEHOLDER.PRICE_INPUT);this.minPriceInput=t.getInputElement(),t.getInputElement().addEventListener("keydown",this.priceKeyDownCallback.bind(this)),t.getInputElement().addEventListener("input",this.priceInputCallback.bind(this));const n=new o.ElementCreator("div",c.CssClasses.PRICE_SPLITTER),i=new d.default(c.CssClasses.FILTERS,c.CssClasses.PRICE_INPUT,c.INPUT_LABEL.PRICE_MAX_INPUT,c.INITIAL_VALUE.INPUT,c.INPUT_TYPE.PRICE_INPUT,c.PLACEHOLDER.PRICE_INPUT);this.maxPriceInput=i.getInputElement(),i.getInputElement().addEventListener("keydown",this.priceKeyDownCallback.bind(this)),i.getInputElement().addEventListener("input",this.priceInputCallback.bind(this)),e.addInnerElement(t.getElement()),e.addInnerElement(n.getElement()),e.addInnerElement(i.getElement())}priceKeyDownCallback(e){"KeyE"!==e.code&&"e"!==e.key||e.preventDefault()}priceInputCallback(){return i(this,void 0,void 0,(function*(){yield this.getFilteredProducts.call(this),this.updateCurrentFiltersView()}))}addBrandsList(){return i(this,void 0,void 0,(function*(){const e=new o.ElementCreator("div",c.CssClasses.FILTERS_BLOCK),t=new o.ElementCreator("header",c.CssClasses.FILTERS_HEADER,c.TEXT.BRANDS_HEADER),n=new o.ElementCreator("ul",c.CssClasses.BRANDS_LIST);try{const{manufacturers:e}=yield r.ProductAPI.getFiltersData(c.CATEGORY_ID);e.forEach((e=>{const t=new o.ElementCreator("li",c.CssClasses.BRANDS_LINE),i=new d.default(c.CssClasses.FILTERS,c.CssClasses.CHECKBOX_INPUT,`${e.term} (${e.count})`,`${e.term}`,c.INPUT_TYPE.BRANDS_INPUT,c.PLACEHOLDER.BRANDS_INPUT);t.addInnerElement(i.getElement()),n.addInnerElement(t)}))}catch(e){console.log(e)}n.getElement().addEventListener("change",this.brandsListCallback.bind(this)),e.addInnerElement(t),e.addInnerElement(n),this.viewElementCreator.addInnerElement(e)}))}addSocketsList(){return i(this,void 0,void 0,(function*(){const e=new o.ElementCreator("div",c.CssClasses.FILTERS_BLOCK),t=new o.ElementCreator("header",c.CssClasses.FILTERS_HEADER,c.TEXT.SOCKETS_HEADER),n=new o.ElementCreator("ul",c.CssClasses.BRANDS_LIST);try{const{sockets:e}=yield r.ProductAPI.getFiltersData(c.CATEGORY_ID);e.forEach((e=>{const t=new o.ElementCreator("li",c.CssClasses.BRANDS_LINE),i=new d.default(c.CssClasses.FILTERS,c.CssClasses.CHECKBOX_INPUT,`${e.term} (${e.count})`,`${e.term}`,c.INPUT_TYPE.BRANDS_INPUT,c.PLACEHOLDER.BRANDS_INPUT);t.addInnerElement(i.getElement()),n.addInnerElement(t)}))}catch(e){console.log(e)}n.getElement().addEventListener("change",this.socketsListCallback.bind(this)),e.addInnerElement(t),e.addInnerElement(n),this.viewElementCreator.addInnerElement(e)}))}addCoresAmountList(){return i(this,void 0,void 0,(function*(){const e=new o.ElementCreator("div",c.CssClasses.FILTERS_BLOCK),t=new o.ElementCreator("header",c.CssClasses.FILTERS_HEADER,c.TEXT.CORES_AMOUNT_HEADER),n=new o.ElementCreator("ul",c.CssClasses.BRANDS_LIST);try{const{coresAmount:e}=yield r.ProductAPI.getFiltersData(c.CATEGORY_ID);e.forEach((e=>{const t=new o.ElementCreator("li",c.CssClasses.BRANDS_LINE),i=new d.default(c.CssClasses.FILTERS,c.CssClasses.CHECKBOX_INPUT,`${e.term} (${e.count})`,`${e.term}`,c.INPUT_TYPE.BRANDS_INPUT,c.PLACEHOLDER.BRANDS_INPUT);t.addInnerElement(i.getElement()),n.addInnerElement(t)}))}catch(e){console.log(e)}n.getElement().addEventListener("change",this.coresAmountListCallback.bind(this)),e.addInnerElement(t),e.addInnerElement(n),this.viewElementCreator.addInnerElement(e)}))}brandsListCallback(e){return i(this,void 0,void 0,(function*(){e.target instanceof HTMLInputElement&&e.target.closest("input")&&(!0===e.target.checked&&(this.brands.add(e.target),this.getFilteredProducts.call(this)),!1===e.target.checked&&(this.brands.delete(e.target),this.getFilteredProducts.call(this)),this.updateCurrentFiltersView())}))}socketsListCallback(e){return i(this,void 0,void 0,(function*(){e.target instanceof HTMLInputElement&&e.target.closest("input")&&(!0===e.target.checked&&(this.sockets.add(e.target),this.getFilteredProducts.call(this)),!1===e.target.checked&&(this.sockets.delete(e.target),this.getFilteredProducts.call(this)),this.updateCurrentFiltersView())}))}coresAmountListCallback(e){return i(this,void 0,void 0,(function*(){e.target instanceof HTMLInputElement&&e.target.closest("input")&&(!0===e.target.checked&&(this.coresAmount.add(e.target),this.getFilteredProducts.call(this)),!1===e.target.checked&&(this.coresAmount.delete(e.target),this.getFilteredProducts.call(this)),this.updateCurrentFiltersView())}))}addResetButton(){const e=new o.ElementCreator("button",c.CssClasses.RESET_BUTTON,c.TEXT.RESET_BUTTON);e.getElement().addEventListener("click",this.resetButtonCallback.bind(this)),this.viewElementCreator.addInnerElement(e)}resetButtonCallback(){return i(this,void 0,void 0,(function*(){[this.searchInput,this.minPriceInput,this.maxPriceInput].forEach((e=>{const t=e;t&&(t.value=c.INITIAL_VALUE.INPUT,t.focus(),t.blur())})),this.sortBar&&(this.sortBar.value=c.INITIAL_VALUE.SORT_BAR),this.resetCheckboxElements(this.brands),this.resetCheckboxElements(this.sockets),this.resetCheckboxElements(this.coresAmount),this.updateCurrentFiltersView(),yield this.getFilteredProducts()}))}resetCheckboxElements(e){[...e].forEach((t=>{const n=t;n.checked=!1,e.delete(n)}))}getFilteredProducts(){var e,t;return i(this,void 0,void 0,(function*(){const n=null===(e=this.searchInput)||void 0===e?void 0:e.value,i=null===(t=this.sortBar)||void 0===t?void 0:t.value;if(!this.minPriceInput||!this.maxPriceInput)throw new Error;const s=Number(this.minPriceInput.value||"0"),a=Number(this.maxPriceInput.value||"*"),o=String(100*s||"0"),d=String(100*a||"*"),l=[...this.brands].map((e=>`"${e.value}"`)).join(","),u=[...this.sockets].map((e=>`"${e.value}"`)).join(","),E=[...this.coresAmount].map((e=>`"${e.value}"`)).join(",");yield r.ProductAPI.getFilteredProducts({categoryId:c.CATEGORY_ID,search:n,sort:i,minPriceValue:o,maxPriceValue:d,brands:l,sockets:u,coresAmount:E})}))}}t.FiltersView=u},453:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.BREAD_CRUMBS_INFO=t.CATEGORY_TEXT=t.CATEGORY_CLASSES=void 0;const i=n(413);t.CATEGORY_CLASSES={CATALOG:"category",TITLE:"category__title",CONTENT:"category__content",ASIDE:"category__content-aside",PRODUCTS:"category__content-products"},t.CATEGORY_TEXT={TITLE:"Catalog",CONTENT:"",ASIDE:"",PRODUCTS:""},t.BREAD_CRUMBS_INFO=[{text:"PC-Components",isCurrent:!1,pagePath:i.Pages.CATALOG},{text:"Processors",isCurrent:!0,pagePath:i.Pages.PROCESSORS}]},7:function(e,t,n){var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(s,r){function a(e){try{d(i.next(e))}catch(e){r(e)}}function o(e){try{d(i.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}d((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const s=n(644),r=n(111),a=n(453),o=n(942),d=n(852),l=n(493),c=n(97),u=n(425);class E extends s.View{constructor(e,t){super("section",a.CATEGORY_CLASSES.CATALOG),this.currentPage=0,this.totalPages=0,this.observer=t,this.content=null,this.contentProducts=null,this.cardsWrapper=null,this.router=e,this.query={categoryId:"0c1874b3-f13a-4879-ae0c-4cc69c02d71c",search:"",sort:"price desc",minPriceValue:"0",maxPriceValue:"*",brands:""},this.configView()}configView(){var e;this.addTitle(),this.addContent(),this.addAside(),this.addProductsWrapper(),null===(e=this.content)||void 0===e||e.getElement().addEventListener("click",this.cardWrapperClickHandler.bind(this))}addTitle(){const e=new r.ElementCreator("h1",a.CATEGORY_CLASSES.TITLE,a.CATEGORY_TEXT.TITLE);this.viewElementCreator.addInnerElement(e)}addContent(){const e=new r.ElementCreator("div",a.CATEGORY_CLASSES.CONTENT,a.CATEGORY_TEXT.CONTENT);this.content=e,this.viewElementCreator.addInnerElement(e)}addAside(){var e;const t=new r.ElementCreator("aside",a.CATEGORY_CLASSES.ASIDE,a.CATEGORY_TEXT.ASIDE),n=new l.FiltersView(this.router);t.addInnerElement(n.getHTMLElement()),null===(e=this.content)||void 0===e||e.addInnerElement(t),document.addEventListener("myCustomEvent",(e=>{var t;(0,d.clearElement)(null===(t=this.contentProducts)||void 0===t?void 0:t.getElement());const n=e.detail.data;this.currentPage=e.detail.currentPage,this.totalPages=e.detail.totalPages,this.query=e.detail.query;const i=n.map((e=>{var t,n,i;const s=e.name.en;let r="";e.metaDescription&&(r=e.metaDescription.en);const a=e.masterVariant.prices[0].value.centAmount/100,o=null===(i=null===(n=null===(t=e.masterVariant.prices[0])||void 0===t?void 0:t.discounted)||void 0===n?void 0:n.value)||void 0===i?void 0:i.centAmount;let d;o&&(d=o/100);const l=e.masterVariant.images[0].url,{id:c}=e;return{name:s,description:r,price:a,image:l,discount:d,id:c}}));this.addBreadCrumbs(),this.createProductsWrapper(),this.createAllProductCards(i),this.createPaginator()}))}createPaginator(){var e;const t=new r.ElementCreator("div","paginator",""),n=new r.ElementCreator("button","paginator__btn","<");0===this.currentPage&&n.getElement().setAttribute("disabled",""),n.getElement().addEventListener("click",(()=>{this.currentPage>0&&(this.currentPage-=1,this.fetchFilteredProducts())})),t.addInnerElement(n);for(let e=0;e<this.totalPages;e+=1){const n=new r.ElementCreator("button","paginator__btn",`${e+1}`);this.currentPage===e&&n.getElement().classList.add("active"),n.getElement().addEventListener("click",(()=>{this.currentPage=e,this.fetchFilteredProducts()})),t.addInnerElement(n)}const i=new r.ElementCreator("button","paginator__btn",">");this.currentPage===this.totalPages-1&&i.getElement().setAttribute("disabled",""),i.getElement().addEventListener("click",(()=>{this.currentPage<this.totalPages-1&&(this.currentPage+=1,this.fetchFilteredProducts())})),t.addInnerElement(i),null===(e=this.contentProducts)||void 0===e||e.addInnerElement(t)}fetchFilteredProducts(){return i(this,void 0,void 0,(function*(){const e=this.query;yield o.ProductAPI.getFilteredProducts(e,this.currentPage)}))}addProductsWrapper(){var e;return i(this,void 0,void 0,(function*(){const t=new r.ElementCreator("div",a.CATEGORY_CLASSES.PRODUCTS,"");this.contentProducts=t,null===(e=this.content)||void 0===e||e.addInnerElement(t),this.addBreadCrumbs(),this.createProductsWrapper(),this.fetchFilteredProducts(),this.createPaginator()}))}addBreadCrumbs(){var e;const t=new c.BreadCrumbsCreator(a.BREAD_CRUMBS_INFO,this.router);null===(e=this.contentProducts)||void 0===e||e.addInnerElement(t.getElement())}createProductsWrapper(){var e;const t=new r.ElementCreator("div","cards-wrapper","");this.cardsWrapper=t,null===(e=this.contentProducts)||void 0===e||e.addInnerElement(t)}createAllProductCards(e){return i(this,void 0,void 0,(function*(){e.forEach((e=>i(this,void 0,void 0,(function*(){var t;null===(t=this.cardsWrapper)||void 0===t||t.addInnerElement(yield this.createProductCard(e))}))))}))}createProductCard(e){return i(this,void 0,void 0,(function*(){const{name:t,description:n,price:i,image:s,discount:a,id:o}=e,d=yield u.CartAPI.itemIsInCart(o),l=new r.ElementCreator("div","product-card",""),c=new r.ElementCreator("h2","product-card__name",`${t}`),E=new r.ElementCreator("img","product-card__image",""),h=new r.ElementCreator("div","product-card__price",`$${i}`),m=new r.ElementCreator("div","product-card__discount",`$${a}`),_=new r.ElementCreator("button","product-card__buy","Add to cart");d?(_.getElement().classList.add("product-card__in-cart"),_.getElement().textContent="Go to cart"):(_.getElement().classList.remove("product-card__in-cart"),_.getElement().textContent="Add to cart");const C=new r.ElementCreator("div","product-card__description",`${n}`);return E.getElement().setAttribute("src",`${s}`),l.addInnerElement(c),l.addInnerElement(E),l.addInnerElement(h),l.addInnerElement(m),l.addInnerElement(_),l.addInnerElement(C),l.getElement().dataset.id=o,_.getElement().addEventListener("click",(e=>{e.stopPropagation(),d?this.router.navigate("cart"):this.buyButtonClickHandler(o,e)})),l}))}cardWrapperClickHandler(e){const t=e.target;if(t instanceof HTMLElement){const e=t.closest(".product-card");if(e){const t=e.getAttribute("data-id");this.router.navigate(`catalog/${t}`)}}}buyButtonClickHandler(e,t){var n;return i(this,void 0,void 0,(function*(){t.stopPropagation();const i=yield u.CartAPI.itemIsInCart(e),s=t.target;if(i)null===(n=this.observer.header)||void 0===n||n.cartClickHandler(this.router);else{const t=yield u.CartAPI.addProductToCart(e);this.observer.setCartState(t),s.classList.add("product-card__in-cart"),s.textContent="Go to cart"}}))}}t.default=E},578:function(e,t,n){var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=n(111),r=n(644),a=i(n(563)),o=n(413),d="index",l="index__links",c="index__btn",u="primary-button",E="index__info",h="index__info-promo",m="index__info-img",_="index__info-text",C={LOGIN:"Login",REGISTRATION:"Registration",CATALOG:"Catalog",ABOUT_US:"About Us",PROCESSORS:"Processors",GRAPHIC_CARDS:"Graphic Cards"};class I extends r.View{constructor(e){super("section",d),this.headerLinkElements=new Map,this.configView(e)}configView(e){this.createInfoBlock(),this.createLinkBlock(e)}createInfoBlock(){const e=new s.ElementCreator("div",E),t=new s.ElementCreator("div",h,"Try a GRAYSEPTEMBER promo code for 10% discount!"),n=new s.ElementCreator("img",m,"");n.getElement().setAttribute("src","./assets/images/shop.jpg");const i=new s.ElementCreator("div",_,"Welcome to GigaGoods, your one-stop destination for all your PC hardware needs! Whether you're a gaming enthusiast, a professional content creator, or simply looking to upgrade your computer, we've got you covered.\n    At GigaGoods, we take pride in offering an extensive range of high-quality PC parts and accessories to help you build, upgrade, or customize your dream computer setup. With a passion for technology and a commitment to excellence,\n    we bring you the latest and most sought-after components from leading manufacturers. From powerful processors and graphics cards to lightning-fast SSDs, dependable power supplies, and stylish cases, our carefully curated selection ensures you have access to the best hardware options available in the market.");e.addInnerElement(t),e.addInnerElement(n),e.addInnerElement(i),this.viewElementCreator.addInnerElement(e)}createLinkBlock(e){const t=new s.ElementCreator("div",l);this.viewElementCreator.addInnerElement(t),Object.keys(C).forEach((n=>{const i={name:C[n],callback:()=>e.navigate(o.Pages[n])},s=new a.default(i.name,i.callback,this.headerLinkElements);s.getHTMLElement().classList.add(c,u),t.addInnerElement(s.getHTMLElement()),this.headerLinkElements.set(o.Pages[n].toUpperCase(),s)}))}}t.default=I},684:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.KEY_FOR_SAVE=t.INITIAL_VALUE=t.TYPE=t.TEXT=t.CssClasses=void 0,t.CssClasses={TITLE:"login__title",LOGIN:"login",ERROR_LINE:"login_error-line",ERROR_LINE_SHOW:"show",FORM:"login__form",EMAIL_INPUT:"email",PASSWORD_INPUT:"password",INPUT_INVALID:"invalid",LOGIN_BUTTON:["login__button","primary-button"],SHOW_HIDE_ICON:["material-symbols-outlined","login__show-hide-icon"],REGISTRATION_LINK:["login__registration-link"]},t.TEXT={TITLE:"LOGIN",ERROR_LINE:"Incorrect username or password",FORM:"",EMAIL_INPUT:"Email",PASSWORD_INPUT:"Password",BUTTON:"Login",SHOW_HIDE_ICON:{VISIBLE:"visibility",VISIBLE_OFF:"visibility_off"},REGISTRATION_LINK:"Sign Up"},t.TYPE={INPUT_TYPE:{EMAIL:"text",PASSWORD:"password",TEXT:"text"},BUTTON_TYPE:"submit"},t.INITIAL_VALUE={INPUT_VALUE:{EMAIL:"",PASSWORD:""},PLACEHOLDER:{EMAIL:"",PASSWORD:""},ERROR_LINE:""},t.KEY_FOR_SAVE={LOGIN_STATUS:"login-status"}},291:function(e,t,n){var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(s,r){function a(e){try{d(i.next(e))}catch(e){r(e)}}function o(e){try{d(i.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}d((i=i.apply(e,t||[])).next())}))},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=n(155),a=n(770),o=n(413),d=n(111),l=s(n(507)),c=n(644),u=n(684),E=n(442);class h extends c.View{constructor(e,t,n){super("section",u.CssClasses.LOGIN),this.router=e,this.observer=t,this.state=n,this.form=null,this.errorLine=null,this.emailInput=null,this.passwordInput=null,this.configView()}configView(){this.addTitle(),this.addErrorLine(),this.addForm(),this.configForm(),this.addRegistrationLink()}configForm(){this.addEmailInput(),this.addPasswordInput(),this.addLoginButton()}addTitle(){const e=new d.ElementCreator("h1",u.CssClasses.TITLE,u.TEXT.TITLE);this.viewElementCreator.addInnerElement(e)}addErrorLine(){const e=new d.ElementCreator("div",u.CssClasses.ERROR_LINE,u.TEXT.ERROR_LINE).getElement();this.errorLine=e,this.viewElementCreator.addInnerElement(e)}addForm(){const e=new d.ElementCreator("form",u.CssClasses.FORM,u.TEXT.FORM);this.form=e,this.viewElementCreator.addInnerElement(e.getElement())}addEmailInput(){var e;const t=new l.default(u.CssClasses.LOGIN,u.CssClasses.EMAIL_INPUT,u.TEXT.EMAIL_INPUT,u.INITIAL_VALUE.INPUT_VALUE.EMAIL,u.TYPE.INPUT_TYPE.EMAIL,u.INITIAL_VALUE.PLACEHOLDER.EMAIL),n=t.getInputElement();this.emailInput=t,n.addEventListener("input",(()=>{this.inputValidation(t,(()=>E.Validator.emailField(n.value))),this.inputKeydownFn()})),null===(e=this.form)||void 0===e||e.addInnerElement(t.getElement())}addPasswordInput(){var e;const t=new l.default(u.CssClasses.LOGIN,u.CssClasses.PASSWORD_INPUT,u.TEXT.PASSWORD_INPUT,u.INITIAL_VALUE.INPUT_VALUE.PASSWORD,u.TYPE.INPUT_TYPE.PASSWORD,u.INITIAL_VALUE.PLACEHOLDER.PASSWORD);this.addShowHidePasswordIcon(t);const n=t.getInputElement();this.passwordInput=t,n.addEventListener("input",(()=>{this.inputValidation(t,(()=>E.Validator.passwordField(n.value))),this.inputKeydownFn()})),null===(e=this.form)||void 0===e||e.addInnerElement(t.getElement())}addShowHidePasswordIcon(e){const t=new d.ElementCreator("span",u.CssClasses.SHOW_HIDE_ICON,u.TEXT.SHOW_HIDE_ICON.VISIBLE);t.getElement().addEventListener("click",this.showHidePasswordFn.bind(this,t)),e.addInnerElement(t)}addLoginButton(){var e;const t=new d.ElementCreator("button",u.CssClasses.LOGIN_BUTTON,u.TEXT.BUTTON).getElement();t.setAttribute("type",u.TYPE.BUTTON_TYPE),t.addEventListener("click",(e=>this.loginButtonClickFn.call(this,e))),null===(e=this.form)||void 0===e||e.addInnerElement(t)}addRegistrationLink(){const e=new d.ElementCreator("a",u.CssClasses.REGISTRATION_LINK,u.TEXT.REGISTRATION_LINK).getElement();e.addEventListener("click",(e=>this.registrationLinkClickFn.call(this,e))),this.viewElementCreator.addInnerElement(e)}inputKeydownFn(){var e;null===(e=this.errorLine)||void 0===e||e.classList.remove(u.CssClasses.ERROR_LINE_SHOW)}inputValidation(e,t){const n=e.getInputElement(),i=e.getErrorLine(),s=t();return s?(n.classList.add(u.CssClasses.INPUT_INVALID),i.textContent=`${s}`,!1):(n.classList.remove(u.CssClasses.INPUT_INVALID),i.textContent=u.INITIAL_VALUE.ERROR_LINE,!0)}loginButtonClickFn(e){var t;return i(this,void 0,void 0,(function*(){if(!this.emailInput||!this.passwordInput)throw new Error;e.preventDefault();if(!this.isFormsValid.call(this,this.emailInput,this.passwordInput))return;const n=this.emailInput.getInputElement().value,i=this.passwordInput.getInputElement().value;(yield r.CustomerAPI.loginCustomer(n,i))===a.AuthStatusCodes.successfulPasswordTokenFetch?(this.state.setValue(u.KEY_FOR_SAVE.LOGIN_STATUS,"true"),this.observer.setLoginStatus(this.state),this.router.navigate(o.Pages.INDEX)):null===(t=this.errorLine)||void 0===t||t.classList.add(u.CssClasses.ERROR_LINE_SHOW)}))}isFormsValid(e,t){const n=this.inputValidation.call(this,e,(()=>E.Validator.emailField(e.getInputElement().value))),i=this.inputValidation.call(this,t,(()=>E.Validator.passwordField(t.getInputElement().value)));return!(!n||!i)}showHidePasswordFn(e){var t,n;const i=e.getElement();(null===(t=this.passwordInput)||void 0===t?void 0:t.getInputElement().getAttribute("type"))===u.TYPE.INPUT_TYPE.PASSWORD?(this.passwordInput.getInputElement().setAttribute("type",u.TYPE.INPUT_TYPE.TEXT),i.textContent=u.TEXT.SHOW_HIDE_ICON.VISIBLE_OFF):(null===(n=this.passwordInput)||void 0===n||n.getInputElement().setAttribute("type",u.TYPE.INPUT_TYPE.PASSWORD),i.textContent=u.TEXT.SHOW_HIDE_ICON.VISIBLE)}registrationLinkClickFn(e){e.preventDefault(),this.router.navigate(o.Pages.REGISTRATION)}}t.default=h},707:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});const i=n(644);class s extends i.View{constructor(){super("main","main")}}t.default=s},15:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});const i=n(644),s=n(111),r=n(413);class a extends i.View{constructor(e){super("section","not-found"),this.router=e,this.configView()}configView(){this.addImageBlock(),this.addTextBlock()}addImageBlock(){const e=new s.ElementCreator("div","not-found__image-block","");this.viewElementCreator.addInnerElement(e);const t=new s.ElementCreator("img","not-found__image-block-img","");t.getElement().setAttribute("src","./assets/images/error-404.png"),e.addInnerElement(t)}addTextBlock(){const e=new s.ElementCreator("div","not-found__text","");this.viewElementCreator.addInnerElement(e);const t=new s.ElementCreator("h1","not-found__text__head","Error 404");e.addInnerElement(t);const n=new s.ElementCreator("div","not-found__text-l","Page Not Found");e.addInnerElement(n);const i=new s.ElementCreator("div","not-found__text-m","We broke something!");e.addInnerElement(i);const r=new s.ElementCreator("div","not-found__text-s","Or you did...");e.addInnerElement(r);const a=new s.ElementCreator("a","not-found__text-link","Back to main").getElement();a.addEventListener("click",(e=>this.registrationLinkClickFn.call(this,e))),e.addInnerElement(a)}registrationLinkClickFn(e){e.preventDefault(),this.router.navigate(r.Pages.INDEX)}}t.default=a},392:function(e,t,n){var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(s,r){function a(e){try{d(i.next(e))}catch(e){r(e)}}function o(e){try{d(i.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}d((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const s=n(111),r=n(644),a=n(942),o=n(425),d="cartItemsStateArray",l="product",c="product__title",u="product__top",E=["product__slider","slider"],h="slider__nav",m="slider__item",_="slider__main-item",C="slider__image",I=["product__buy","buy"],T="buy__price",p="buy__discount-price",v="buy__price_disable",S="buy__button",A="product__bot",P=["product__attributes","attributes"],g=["product__subtitle","attributes__title"],L="attributes__row",O="attributes__key",R="attributes__value",f=["product__description","description"],N=["product__subtitle","description__title"],w="description__text";class b extends r.View{constructor(e,t){super("section",l),this.add=this.buyButtonClickHandler.bind(this),this.remove=this.removeButtonClickHandler.bind(this),this.observer=t,this.id=e,this.sliderMainItem=new s.ElementCreator("div",_,""),this.currentProductName="",this.picturesPaths=[],this.buyButton=null,this.curentIndex=null,this.papaSliderMainItem=null,this.papaSliderNav=null,this.configView(e)}configView(e){return i(this,void 0,void 0,(function*(){const t=yield this.getData(e);this.createTitle(t.name),this.createTop(t.imageArr,t.price,t.discount),this.createBot(t.attributesArr,t.descriptions)}))}createTitle(e){const t=new s.ElementCreator("h1",c,e);this.currentProductName=e,this.viewElementCreator.addInnerElement(t)}createTop(e,t,n){const i=new s.ElementCreator("div",u,""),r=this.createSlider(e);i.addInnerElement(r);const a=this.createBuy(t,n);i.addInnerElement(a),this.viewElementCreator.addInnerElement(i)}createSlider(e){const t=new s.ElementCreator("div",E,"");t.getElement().addEventListener("click",this.clickSliderHandler.bind(this));const n=new s.ElementCreator("div",h,"");n.getElement().addEventListener("mouseover",this.sliderNavHoverHandler.bind(this)),t.addInnerElement(n),e.forEach((e=>{const t=this.createImage(e.url,m,C);this.picturesPaths.push(e.url),n.addInnerElement(t)}));const i=this.sliderMainItem,r=e[0].url;return this.setSliderMainItem(r),t.addInnerElement(i),t}setSliderMainItem(e){const t=new s.ElementCreator("img",C,"");t.getElement().setAttribute("src",e),this.sliderMainItem.getElement().innerHTML="",this.sliderMainItem.addInnerElement(t)}createImage(e,t,n){const i=new s.ElementCreator("div",t,""),r=new s.ElementCreator("img",n,"");return r.getElement().setAttribute("src",e),i.addInnerElement(r),i.getElement()}createBuy(e,t){const n=new s.ElementCreator("div",I,""),i=new s.ElementCreator("div",T,`${e} $`);if(n.addInnerElement(i),void 0!==t){const e=new s.ElementCreator("div",p,`${t} $`);i.getElement().classList.add(v),n.addInnerElement(e)}return this.buyButton=new s.ElementCreator("button",S),this.setBuyButton(),n.addInnerElement(this.buyButton),n}createBot(e,t){const n=new s.ElementCreator("div",A,""),i=this.createattributes(e);n.addInnerElement(i);const r=this.createDescription(t);n.addInnerElement(r),this.viewElementCreator.addInnerElement(n)}createattributes(e){const t=new s.ElementCreator("div",P,""),n=new s.ElementCreator("h2",g,"Specifications:");return t.addInnerElement(n),e.forEach((e=>{const n=e.name,i=e.value,r=new s.ElementCreator("div",L,""),a=new s.ElementCreator("div",O,`${n}:  `);r.addInnerElement(a);const o=new s.ElementCreator("div",R,i.toString());r.addInnerElement(o),t.addInnerElement(r)})),t}createDescription(e){const t=new s.ElementCreator("div",f,""),n=new s.ElementCreator("h2",N,"Description:");t.addInnerElement(n);const i=new s.ElementCreator("p",w,e);return t.addInnerElement(i),t}getData(e){var t,n,s,r,o,d;return i(this,void 0,void 0,(function*(){const i=yield a.ProductAPI.getProduct(e),l=i.masterData.current.name.en,c=i.masterData.current.description.en,u=i.masterData.current.masterVariant.prices[0].value.centAmount/100,E=null===(d=null===(o=null===(r=null===(s=null===(n=null===(t=i.masterData)||void 0===t?void 0:t.current)||void 0===n?void 0:n.masterVariant)||void 0===s?void 0:s.prices[0])||void 0===r?void 0:r.discounted)||void 0===o?void 0:o.value)||void 0===d?void 0:d.centAmount;let h;E&&(h=E/100);return{name:l,descriptions:c,price:u,discount:h,imageArr:i.masterData.current.masterVariant.images,attributesArr:i.masterData.current.masterVariant.attributes}}))}sliderNavHoverHandler(e){const t=e.target;if(t instanceof HTMLElement){const e=t.closest(".slider__image");if(e){const t=e.getAttribute("src");null!==t&&this.setSliderMainItem(t)}}}clickSliderHandler(e){const t=e.target;if(t instanceof HTMLElement){const e=t.closest(".slider__image");if(e){const t=e.getAttribute("src");null!==t&&this.createPapaSlider(this.currentProductName,t,this.picturesPaths)}}}createPapaSlider(e,t,n){this.setCurrentIndex(t),window.scrollTo(0,0),document.body.classList.add("scroll-lock");const i=new s.ElementCreator("div","papa-slider",""),r=new s.ElementCreator("h2","papa-slider__title",e);i.addInnerElement(r);const a=new s.ElementCreator("h3","papa-slider__counter",`Photo: ${n.length}`);i.addInnerElement(a);const o=new s.ElementCreator("h3","papa-slider__wrapper",""),d=new s.ElementCreator("button","papa-slider__prev-btn","<");d.getElement().addEventListener("click",this.papaSliderPrevBtnClickHandler.bind(this)),o.addInnerElement(d);const l=new s.ElementCreator("div","papa-slider__main-elem","");this.papaSliderMainItem=l,o.addInnerElement(l);const c=new s.ElementCreator("button","papa-slider__next-btn",">");c.getElement().addEventListener("click",this.papaSliderNextBtnClickHandler.bind(this)),o.addInnerElement(c),i.addInnerElement(o);const u=new s.ElementCreator("div","papa-slider__nav","");n.forEach((e=>{const t=this.createImage(e,"papa-slider__nav-item","papa-slider__nav-image");u.addInnerElement(t)})),this.papaSliderNav=u,i.addInnerElement(u),this.setPapaSliderMainItem();const E=new s.ElementCreator("button","papa-slider__close-btn","✖");E.getElement().addEventListener("click",this.papaSliderCloseBtnClickHandler.bind(this)),i.addInnerElement(E),document.body.append(i.getElement())}setPapaSliderMainItem(){const e=new s.ElementCreator("img","papa-slider__main-image","");e.getElement().setAttribute("src",this.picturesPaths[Number(this.curentIndex)]),this.papaSliderMainItem.getElement().innerHTML="",this.papaSliderMainItem.addInnerElement(e);[...this.papaSliderNav.getElement().childNodes].forEach(((e,t)=>{const n=e;n.classList.remove("papa-slider__nav-item_active"),t===this.curentIndex&&n.classList.add("papa-slider__nav-item_active")}))}papaSliderPrevBtnClickHandler(){this.curentIndex-=1,this.curentIndex<0&&(this.curentIndex=this.picturesPaths.length-1),this.setPapaSliderMainItem()}papaSliderNextBtnClickHandler(){this.curentIndex+=1,this.curentIndex>this.picturesPaths.length-1&&(this.curentIndex=0),this.setPapaSliderMainItem()}setCurrentIndex(e){const t=this.picturesPaths.findIndex((t=>t===e));this.curentIndex=t}papaSliderCloseBtnClickHandler(){var e;document.body.classList.remove("scroll-lock"),null===(e=document.body.lastElementChild)||void 0===e||e.remove()}setBuyButton(){void 0===JSON.parse(this.observer.state.getValue(d)).find((e=>e.productId===this.id))?(this.buyButton.getElement().innerHTML="Add to cart",this.buyButton.getElement().removeEventListener("click",this.remove),this.buyButton.getElement().addEventListener("click",this.add)):(this.buyButton.getElement().innerHTML="Remove from cart",this.buyButton.getElement().removeEventListener("click",this.add),this.buyButton.getElement().addEventListener("click",this.remove))}buyButtonClickHandler(){return i(this,void 0,void 0,(function*(){const e=yield o.CartAPI.addProductToCart(this.id);this.observer.setCartState(e),this.setBuyButton()}))}removeButtonClickHandler(){return i(this,void 0,void 0,(function*(){const e=JSON.parse(this.observer.state.getValue(d)).find((e=>e.productId===this.id)).id,t=yield o.CartAPI.removeProduct(e);this.observer.setCartState(t),this.setBuyButton()}))}}t.default=b},627:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.KEY_FOR_SAVE=t.INITIAL_VALUE=t.TYPE=t.SIGN_UP_TEXT=t.SIGN_UP_CLASSES=void 0,t.SIGN_UP_CLASSES={REGISTRATION:"registration",TITLE:"registration__title",EMAIL:"email",PASSWORD:"password",CONFIRM_PASSWORD:"confirm-password",FIRST_NAME:"first-name",LAST_NAME:"last-name",DATE_OF_BIRTH:"date-of-birth",CITY:"city",STREET:"street",POSTAL_CODE:"postal-code",COUNTRY:"country",ERROR_LINE:"error",REGISTER_BTN:"primary-button",LOGIN_BTN:"login__registration-link",SHOW_HIDE_ICON:["material-symbols-outlined","registration__show-hide-icon"],SET_DEFAULT_ADDRESS:"set-default",INPUT_INVALID:"invalid",ERROR_LINE_SHOW:"show"},t.SIGN_UP_TEXT={EMAIL:"Email",PASSWORD:"Password",CONFIRM_PASSWORD:"Confirm Password",FIRST_NAME:"First Name",LAST_NAME:"Last Name",DATE_OF_BIRTH:"Date of Birth",CITY:"City",STREET:"Street",POSTAL_CODE:"Postal Code",COUNTRY:"Country",TITLE:"Sign Up",REGISTER_BTN:"Create Account",LOGIN_BTN:"Login",ERROR_LINE:"",SET_DEFAULT_ADDRESS:"Set Default Address",SHOW_HIDE_ICON:{VISIBLE:"visibility",VISIBLE_OFF:"visibility_off"}},t.TYPE={INPUT_TYPE:{EMAIL:"email",PASSWORD:"password",TEXT:"text"},BUTTON_TYPE:"submit"},t.INITIAL_VALUE={INPUT_VALUE:{EMAIL:"",PASSWORD:""},PLACEHOLDER:{EMAIL:"",PASSWORD:""},ERROR_LINE:""},t.KEY_FOR_SAVE={LOGIN_STATUS:"login-status"}},156:function(e,t,n){var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(s,r){function a(e){try{d(i.next(e))}catch(e){r(e)}}function o(e){try{d(i.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}d((i=i.apply(e,t||[])).next())}))},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=n(155),a=n(413),o=n(111),d=s(n(507)),l=n(442),c=n(644),u=n(627),E=n(387);class h extends c.View{constructor(e,t,n){super("section",u.SIGN_UP_CLASSES.REGISTRATION),this.router=e,this.observer=t,this.state=n,this.form=null,this.btnsWrapper=null,this.firstNameInput=null,this.lastNameInput=null,this.dateOfBirthInput=null,this.emailInput=null,this.passwordInput=null,this.confirmPasswordInput=null,this.shippingAddressFieldSet=null,this.billingAddressFieldSet=null,this.cityShippingAddressInput=null,this.streetShippingAddressInput=null,this.postalCodeShippingAddressInput=null,this.countryShippingAddressInput=null,this.defaultShippingAddressInput=null,this.cityBillingAddressInput=null,this.streetBillingAddressInput=null,this.postalCodeBillingAddressInput=null,this.countryBillingAddressInput=null,this.defaultBillingAddressInput=null,this.errorLine=null,this.configView()}configView(){this.addTitle(),this.addForm(),this.configForm()}addTitle(){const e=new o.ElementCreator("h1",u.SIGN_UP_CLASSES.TITLE,u.SIGN_UP_TEXT.TITLE);this.viewElementCreator.addInnerElement(e)}addForm(){var e;this.form=new o.ElementCreator("form","registration__form"),null===(e=this.form)||void 0===e||e.getElement().addEventListener("submit",(e=>this.handleSubmit(e))),this.viewElementCreator.addInnerElement(this.form.getElement())}configForm(){this.addFirstNameInput(),this.addLastNameInput(),this.addDateOfBirthInput(),this.addEmailInput(),this.addPasswordInput(),this.addConfirmPasswordInput(),this.addShippingFieldSet(),this.addAddressInput(this.shippingAddressFieldSet,"shipping"),this.addCopyButton(),this.addBillingFieldSet(),this.addAddressInput(this.billingAddressFieldSet,"billing"),this.addErrorLine(),this.addControlButtons()}addFirstNameInput(){var e;const t=new d.default(u.SIGN_UP_CLASSES.REGISTRATION,u.SIGN_UP_CLASSES.FIRST_NAME,u.SIGN_UP_TEXT.FIRST_NAME,"","text",""),n=t.getInputElement();t.getInputElement().setAttribute("required",""),this.firstNameInput=n;const i=()=>{this.inputValidation(t,(()=>l.Validator.nameField(n.value))),this.inputKeydownFn()};n.addEventListener("input",i),n.addEventListener("focusin",i),null===(e=this.form)||void 0===e||e.addInnerElement(t.getElement())}addLastNameInput(){var e;const t=new d.default(u.SIGN_UP_CLASSES.REGISTRATION,u.SIGN_UP_CLASSES.LAST_NAME,u.SIGN_UP_TEXT.LAST_NAME,"","text",""),n=t.getInputElement();t.getInputElement().setAttribute("required",""),this.lastNameInput=n;const i=()=>{this.inputValidation(t,(()=>l.Validator.nameField(n.value))),this.inputKeydownFn()};n.addEventListener("input",i),n.addEventListener("focusin",i),null===(e=this.form)||void 0===e||e.addInnerElement(t.getElement())}addDateOfBirthInput(){var e;const t=new d.default(u.SIGN_UP_CLASSES.REGISTRATION,u.SIGN_UP_CLASSES.DATE_OF_BIRTH,u.SIGN_UP_TEXT.DATE_OF_BIRTH,"","date",""),n=t.getInputElement();t.getInputElement().setAttribute("required",""),this.dateOfBirthInput=n;const i=()=>{this.inputValidation(t,(()=>l.Validator.birthField(n.value))),this.inputKeydownFn()};n.addEventListener("input",i),n.addEventListener("focusin",i),null===(e=this.form)||void 0===e||e.addInnerElement(t.getElement())}addEmailInput(){var e;const t=new d.default(u.SIGN_UP_CLASSES.REGISTRATION,u.SIGN_UP_CLASSES.EMAIL,u.SIGN_UP_TEXT.EMAIL,"","email",""),n=t.getInputElement();t.getInputElement().setAttribute("required",""),this.emailInput=n;const i=()=>{this.inputValidation(t,(()=>l.Validator.emailField(n.value))),this.inputKeydownFn()};n.addEventListener("input",i),n.addEventListener("focusin",i),null===(e=this.form)||void 0===e||e.addInnerElement(t.getElement())}addPasswordInput(){var e;const t=new d.default(u.SIGN_UP_CLASSES.REGISTRATION,u.SIGN_UP_CLASSES.PASSWORD,u.SIGN_UP_TEXT.PASSWORD,"","password",""),n=t.getInputElement();t.getInputElement().setAttribute("required",""),this.passwordInput=n,this.addShowHidePasswordIcon(this.passwordInput,t);const i=()=>{var e;this.inputValidation(t,(()=>l.Validator.passwordField(n.value))),this.inputKeydownFn(),null===(e=this.confirmPasswordInput)||void 0===e||e.dispatchEvent(new Event("input"))};n.addEventListener("input",i),n.addEventListener("focusin",i),null===(e=this.form)||void 0===e||e.addInnerElement(t.getElement())}addConfirmPasswordInput(){var e;const t=new d.default(u.SIGN_UP_CLASSES.REGISTRATION,u.SIGN_UP_CLASSES.CONFIRM_PASSWORD,u.SIGN_UP_TEXT.CONFIRM_PASSWORD,"","password",""),n=t.getInputElement();t.getInputElement().setAttribute("required",""),this.confirmPasswordInput=n,this.addShowHidePasswordIcon(this.confirmPasswordInput,t);const i=()=>{var e;const i=null===(e=this.passwordInput)||void 0===e?void 0:e.value;void 0!==i&&(this.inputValidation(t,(()=>l.Validator.confirmPasswordField(n.value,i))),this.inputKeydownFn())};n.addEventListener("input",i),n.addEventListener("focusin",i),null===(e=this.form)||void 0===e||e.addInnerElement(t.getElement())}addShowHidePasswordIcon(e,t){const n=new o.ElementCreator("span",u.SIGN_UP_CLASSES.SHOW_HIDE_ICON,u.SIGN_UP_TEXT.SHOW_HIDE_ICON.VISIBLE);n.getElement().addEventListener("click",this.showHidePasswordFn.bind(this,e,n)),t.addInnerElement(n)}addAddressInput(e,t){e&&(this.addCityAddressInput(e,t),this.addStreetAddressInput(e,t),this.addPostalCodeAddressInput(e,t),this.addCountryAddressInput(e,t),this.addDefaultCheckbox(e,t))}addShippingFieldSet(){var e;const t=new o.ElementCreator("fieldset","fieldset");this.shippingAddressFieldSet=t;const n=new o.ElementCreator("legend","legend");n.getElement().textContent="Shipping Address",t.addInnerElement(n),null===(e=this.form)||void 0===e||e.addInnerElement(t)}addBillingFieldSet(){var e;const t=new o.ElementCreator("fieldset","fieldset");this.billingAddressFieldSet=t;const n=new o.ElementCreator("legend","legend");n.getElement().textContent="Billing Address",t.addInnerElement(n),null===(e=this.form)||void 0===e||e.addInnerElement(t)}addCityAddressInput(e,t){const n=new d.default(u.SIGN_UP_CLASSES.REGISTRATION,u.SIGN_UP_CLASSES.CITY,u.SIGN_UP_TEXT.CITY,"","text",""),i=n.getInputElement();"shipping"===t?this.cityShippingAddressInput=i:"billing"===t&&(this.cityBillingAddressInput=i);const s=()=>{this.inputValidation(n,(()=>l.Validator.cityField(i.value))),this.inputKeydownFn()};i.addEventListener("input",s),i.addEventListener("focusin",s),null==e||e.addInnerElement(n.getElement())}addStreetAddressInput(e,t){const n=new d.default(u.SIGN_UP_CLASSES.REGISTRATION,u.SIGN_UP_CLASSES.STREET,u.SIGN_UP_TEXT.STREET,"","text",""),i=n.getInputElement();"shipping"===t?this.streetShippingAddressInput=i:"billing"===t&&(this.streetBillingAddressInput=i);const s=()=>{this.inputValidation(n,(()=>l.Validator.streetField(i.value))),this.inputKeydownFn()};i.addEventListener("input",s),i.addEventListener("focusin",s),null==e||e.addInnerElement(n.getElement())}addPostalCodeAddressInput(e,t){const n=new d.default(u.SIGN_UP_CLASSES.REGISTRATION,u.SIGN_UP_CLASSES.POSTAL_CODE,u.SIGN_UP_TEXT.POSTAL_CODE,"","text",""),i=n.getInputElement();"shipping"===t?this.postalCodeShippingAddressInput=i:"billing"===t&&(this.postalCodeBillingAddressInput=i);const s=()=>{let e="";this.inputValidation(n,(()=>{var n,s,r,a;return"shipping"===t?e=null!==(s=null===(n=this.countryShippingAddressInput)||void 0===n?void 0:n.value)&&void 0!==s?s:"":"billing"===t&&(e=null!==(a=null===(r=this.countryBillingAddressInput)||void 0===r?void 0:r.value)&&void 0!==a?a:""),l.Validator.postalCodeField(i.value,e)})),this.inputKeydownFn()};i.addEventListener("input",(()=>s())),i.addEventListener("focusin",(()=>s())),null==e||e.addInnerElement(n.getElement())}addCountryAddressInput(e,t){const n=["USA","Russia"],i=["US","RU"],s=new o.ElementCreator("div",["registration__country-input-wrapper","primary-wrapper"]),r=new o.ElementCreator("label",["registration__country-label","primary-label"]);r.getElement().textContent="Country";const a=new o.ElementCreator("select",["registration__country-input","primary-input"]);for(let e=0;e<n.length;e+=1){const t=document.createElement("option");t.setAttribute("value",i[e]),t.textContent=n[e],a.getElement().appendChild(t)}s.addInnerElement(r.getElement()),r.addInnerElement(a.getElement());const d=a.getElement();"shipping"===t?(this.countryShippingAddressInput=d,this.countryShippingAddressInput.addEventListener("change",(()=>{var e;return null===(e=this.postalCodeShippingAddressInput)||void 0===e?void 0:e.dispatchEvent(new Event("input"))}))):"billing"===t&&(this.countryBillingAddressInput=d,this.countryBillingAddressInput.addEventListener("change",(()=>{var e;return null===(e=this.postalCodeBillingAddressInput)||void 0===e?void 0:e.dispatchEvent(new Event("input"))}))),null==e||e.addInnerElement(s.getElement())}addDefaultCheckbox(e,t){var n;const i=new d.default(u.SIGN_UP_CLASSES.REGISTRATION,u.SIGN_UP_CLASSES.SET_DEFAULT_ADDRESS,u.SIGN_UP_TEXT.SET_DEFAULT_ADDRESS,"","checkbox",""),s=i.getInputElement();"shipping"===t?this.defaultShippingAddressInput=s:"billing"===t&&(this.defaultBillingAddressInput=s),null==e||e.addInnerElement(i.getElement());(null===(n=i.getElement().firstChild)||void 0===n?void 0:n.firstChild).classList.remove("primary-input")}addErrorLine(){var e;const t=new o.ElementCreator("div",u.SIGN_UP_CLASSES.ERROR_LINE,u.SIGN_UP_TEXT.ERROR_LINE).getElement();this.errorLine=t,null===(e=this.form)||void 0===e||e.addInnerElement(t)}addControlButtons(){var e,t,n;this.btnsWrapper=new o.ElementCreator("div","form-buttons"),null===(e=this.btnsWrapper)||void 0===e||e.addInnerElement(this.addRegisterButton()),null===(t=this.btnsWrapper)||void 0===t||t.addInnerElement(this.addLoginButton()),null===(n=this.form)||void 0===n||n.addInnerElement(this.btnsWrapper.getElement())}addRegisterButton(){const e=new o.ElementCreator("button",u.SIGN_UP_CLASSES.REGISTER_BTN,u.SIGN_UP_TEXT.REGISTER_BTN);return e.getElement().setAttribute("type","submit"),e}addLoginButton(){const e=new o.ElementCreator("a",u.SIGN_UP_CLASSES.LOGIN_BTN,u.SIGN_UP_TEXT.LOGIN_BTN);return e.getElement().addEventListener("click",(()=>this.router.navigate(a.Pages.LOGIN))),e}addCopyButton(){var e;const t=new o.ElementCreator("button","primary-button","Set as Billing Address");t.getElement().setAttribute("type","button"),t.getElement().addEventListener("click",this.copyShippingAddressToBillingAddress.bind(this)),null===(e=this.form)||void 0===e||e.addInnerElement(t)}handleSubmit(e){var t,n;return i(this,void 0,void 0,(function*(){e.preventDefault();const i=this.getFormData(),s=document.querySelectorAll(".primary-error-line");let o=!0;if(s.forEach((e=>{var t;return""!==(null===(t=e.textContent)||void 0===t?void 0:t.trim())?(o=!1,""):""})),this.errorLine)if(o&&""!==(null===(t=this.emailInput)||void 0===t?void 0:t.value))try{const e=yield r.CustomerAPI.registerCustomer(i);201===e?(this.state.setValue(u.KEY_FOR_SAVE.LOGIN_STATUS,"true"),this.observer.setLoginStatus(this.state),this.router.navigate(a.Pages.INDEX),yield r.CustomerAPI.getCustomerInfo(),(0,E.createPopupWithText)("Registration successful, automatically logged in!")):this.errorLine.textContent=400===e?"The user with that email already exists!":"Something went wrong!"}catch(e){this.errorLine.textContent=`${e}`}else this.errorLine.textContent="Fix all errors.",null===(n=this.errorLine)||void 0===n||n.classList.add(u.SIGN_UP_CLASSES.ERROR_LINE_SHOW)}))}copyShippingAddressToBillingAddress(){var e,t,n,i;const s=null===(e=this.cityShippingAddressInput)||void 0===e?void 0:e.value,r=null===(t=this.streetShippingAddressInput)||void 0===t?void 0:t.value,a=null===(n=this.postalCodeShippingAddressInput)||void 0===n?void 0:n.value,o=null===(i=this.countryShippingAddressInput)||void 0===i?void 0:i.value;void 0!==s&&null!==this.cityBillingAddressInput&&(this.cityBillingAddressInput.value=s,this.cityBillingAddressInput.focus(),this.cityBillingAddressInput.blur()),void 0!==r&&null!==this.streetBillingAddressInput&&(this.streetBillingAddressInput.value=r,this.streetBillingAddressInput.focus(),this.streetBillingAddressInput.blur()),void 0!==a&&null!==this.postalCodeBillingAddressInput&&(this.postalCodeBillingAddressInput.value=a,this.postalCodeBillingAddressInput.focus(),this.postalCodeBillingAddressInput.blur()),void 0!==o&&null!==this.countryBillingAddressInput&&(this.countryBillingAddressInput.value=o)}showHidePasswordFn(e,t){const n=t.getElement();e.getAttribute("type")===u.TYPE.INPUT_TYPE.PASSWORD?(e.setAttribute("type",u.TYPE.INPUT_TYPE.TEXT),n.textContent=u.SIGN_UP_TEXT.SHOW_HIDE_ICON.VISIBLE_OFF):(e.setAttribute("type",u.TYPE.INPUT_TYPE.PASSWORD),n.textContent=u.SIGN_UP_TEXT.SHOW_HIDE_ICON.VISIBLE)}getAddressFormData(e){var t,n,i,s;let r,a,o,d;return"Shipping"===e?(r=this.cityShippingAddressInput,a=this.streetShippingAddressInput,o=this.postalCodeShippingAddressInput,d=this.countryShippingAddressInput):"Billing"===e&&(r=this.cityBillingAddressInput,a=this.streetBillingAddressInput,o=this.postalCodeBillingAddressInput,d=this.countryBillingAddressInput),{country:null!==(t=null==d?void 0:d.value)&&void 0!==t?t:"",streetName:null!==(n=null==a?void 0:a.value)&&void 0!==n?n:"",postalCode:null!==(i=null==o?void 0:o.value)&&void 0!==i?i:"",city:null!==(s=null==r?void 0:r.value)&&void 0!==s?s:""}}getShippingAddressFormData(){return this.getAddressFormData("Shipping")}getBillingAddressFormData(){return this.getAddressFormData("Billing")}getFormData(){var e,t,n,i,s,r,a,o,d,l,c,u;const E={email:null!==(t=null===(e=this.emailInput)||void 0===e?void 0:e.value)&&void 0!==t?t:"",password:null!==(i=null===(n=this.passwordInput)||void 0===n?void 0:n.value)&&void 0!==i?i:"",firstName:null!==(r=null===(s=this.firstNameInput)||void 0===s?void 0:s.value)&&void 0!==r?r:"",lastName:null!==(o=null===(a=this.lastNameInput)||void 0===a?void 0:a.value)&&void 0!==o?o:"",dateOfBirth:null!==(l=null===(d=this.dateOfBirthInput)||void 0===d?void 0:d.value)&&void 0!==l?l:"",addresses:[this.getShippingAddressFormData(),this.getBillingAddressFormData()],shippingAddresses:[0],billingAddresses:[1]};return(null===(c=this.defaultShippingAddressInput)||void 0===c?void 0:c.checked)&&(E.defaultShippingAddress=0),(null===(u=this.defaultBillingAddressInput)||void 0===u?void 0:u.checked)&&(E.defaultBillingAddress=1),E}inputValidation(e,t){const n=e.getInputElement(),i=e.getErrorLine(),s=t();return s?(n.classList.add(u.SIGN_UP_CLASSES.INPUT_INVALID),i.textContent=`${s}`,!1):(n.classList.remove(u.SIGN_UP_CLASSES.INPUT_INVALID),i.textContent=u.INITIAL_VALUE.ERROR_LINE,!0)}inputKeydownFn(){var e;null===(e=this.errorLine)||void 0===e||e.classList.remove(u.SIGN_UP_CLASSES.ERROR_LINE_SHOW)}}t.default=h},201:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.INITIAL_VALUE=t.TYPE=t.PROFILE_TEXT=t.PROFILE_CLASSES=void 0,t.PROFILE_CLASSES={PROFILE:"user-profile",TITLE:"user-profile__title",EMAIL:"email",PASSWORD:"password",CURRENT_PASSWORD:"current-password",FIRST_NAME:"first-name",LAST_NAME:"last-name",DATE_OF_BIRTH:"date-of-birth",ADDRESS:["user-profile__addresses-input-wrapper","primary-wrapper"],CITY:"city",STREET:"street",POSTAL_CODE:"postal-code",COUNTRY:"country",ERROR_LINE:"error",REGISTER_BTN:"primary-button",LOGIN_BTN:"login__user-profile-link",SHOW_HIDE_ICON:["material-symbols-outlined","user-profile__show-hide-icon"],SET_DEFAULT_ADDRESS:"set-default",INPUT_INVALID:"invalid",ERROR_LINE_SHOW:"show"},t.PROFILE_TEXT={EMAIL:"Email",PASSWORD:"Password",CURRENT_PASSWORD:"Current Password",FIRST_NAME:"First Name",LAST_NAME:"Last Name",DATE_OF_BIRTH:"Date of Birth",CITY:"City",STREET:"Street",POSTAL_CODE:"Postal Code",COUNTRY:"Country",TITLE:"Sign Up",REGISTER_BTN:"Create Account",LOGIN_BTN:"Login",ERROR_LINE:"",SET_DEFAULT_ADDRESS:"Set Default Address",SHOW_HIDE_ICON:{VISIBLE:"visibility",VISIBLE_OFF:"visibility_off"}},t.TYPE={INPUT_TYPE:{EMAIL:"email",PASSWORD:"password",TEXT:"text"},BUTTON_TYPE:"submit"},t.INITIAL_VALUE={INPUT_VALUE:{EMAIL:"",PASSWORD:""},PLACEHOLDER:{EMAIL:"",PASSWORD:""},ERROR_LINE:""}},844:function(e,t,n){var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(s,r){function a(e){try{d(i.next(e))}catch(e){r(e)}}function o(e){try{d(i.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}d((i=i.apply(e,t||[])).next())}))},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=n(155),a=n(387),o=n(111),d=s(n(507)),l=n(442),c=n(644),u=n(201);class E extends c.View{constructor(){super("section",u.PROFILE_CLASSES.PROFILE),this.form=null,this.data=null,this.firstNameInput=null,this.lastNameInput=null,this.emailInput=null,this.dateOfBirthInput=null,this.passwordInput=null,this.currentPasswordInput=null,this.passwordWrapper=null,this.shippingAddressFieldSet=null,this.billingAddressFieldSet=null,this.cityShippingAddressInput=null,this.cityBillingAddressInput=null,this.streetShippingAddressInput=null,this.streetBillingAddressInput=null,this.postalCodeShippingAddressInput=null,this.postalCodeBillingAddressInput=null,this.countryShippingAddressInput=null,this.countryBillingAddressInput=null,this.addressesWrapper=null,this.errorLine=null,this.configView()}configView(){return i(this,void 0,void 0,(function*(){yield this.getCustomerData(),this.addTitle(),this.addForm()}))}addTitle(){const e=new o.ElementCreator("h1",u.PROFILE_CLASSES.TITLE,u.PROFILE_TEXT.TITLE);this.viewElementCreator.addInnerElement(e)}addForm(){this.form=new o.ElementCreator("form","user-profile__form"),this.viewElementCreator.addInnerElement(this.form.getElement()),this.addFirstNameInput(),this.addLastNameInput(),this.addDateOfBirthInput(),this.addEmailInput(),this.addPasswordInput(),this.addAddressesWrapper(),this.createAddresses()}getCustomerData(){return i(this,void 0,void 0,(function*(){return this.data=yield r.CustomerAPI.getCustomerInfo(),this.data}))}addFirstNameInput(){var e,t,n;const i=new d.default(u.PROFILE_CLASSES.PROFILE,u.PROFILE_CLASSES.FIRST_NAME,u.PROFILE_TEXT.FIRST_NAME,null!==(t=null===(e=this.data)||void 0===e?void 0:e.firstName)&&void 0!==t?t:"","text",""),s=i.getInputElement();i.getInputElement().setAttribute("required",""),i.getInputElement().setAttribute("disabled",""),this.firstNameInput=s;const r=()=>{this.inputValidation(i,(()=>l.Validator.nameField(s.value))),this.inputKeydownFn()};s.addEventListener("input",r),s.addEventListener("focusin",r),i.addInnerElement(this.addControlButtons("firstName")),null===(n=this.form)||void 0===n||n.addInnerElement(i.getElement())}addControlButtons(e){const t=new o.ElementCreator("div","controls");return t.addInnerElement(this.addEditButton(e)),t.addInnerElement(this.addSaveButton(e)),t}addLastNameInput(){var e,t,n;const i=new d.default(u.PROFILE_CLASSES.PROFILE,u.PROFILE_CLASSES.LAST_NAME,u.PROFILE_TEXT.LAST_NAME,null!==(t=null===(e=this.data)||void 0===e?void 0:e.lastName)&&void 0!==t?t:"","text",""),s=i.getInputElement();i.getInputElement().setAttribute("required",""),i.getInputElement().setAttribute("disabled",""),this.lastNameInput=s;const r=()=>{this.inputValidation(i,(()=>l.Validator.nameField(s.value))),this.inputKeydownFn()};s.addEventListener("input",r),s.addEventListener("focusin",r),i.addInnerElement(this.addControlButtons("lastName")),null===(n=this.form)||void 0===n||n.addInnerElement(i.getElement())}addDateOfBirthInput(){var e,t,n;const i=new d.default(u.PROFILE_CLASSES.PROFILE,u.PROFILE_CLASSES.DATE_OF_BIRTH,u.PROFILE_TEXT.DATE_OF_BIRTH,null!==(t=null===(e=this.data)||void 0===e?void 0:e.dateOfBirth)&&void 0!==t?t:"","date",""),s=i.getInputElement();i.getInputElement().setAttribute("required",""),i.getInputElement().setAttribute("disabled",""),this.dateOfBirthInput=s;const r=()=>{this.inputValidation(i,(()=>l.Validator.birthField(s.value))),this.inputKeydownFn()};s.addEventListener("input",r),s.addEventListener("focusin",r),i.addInnerElement(this.addControlButtons("birthDay")),null===(n=this.form)||void 0===n||n.addInnerElement(i.getElement())}addEmailInput(){var e,t,n;const i=new d.default(u.PROFILE_CLASSES.PROFILE,u.PROFILE_CLASSES.EMAIL,u.PROFILE_TEXT.EMAIL,null!==(t=null===(e=this.data)||void 0===e?void 0:e.email)&&void 0!==t?t:"","email",""),s=i.getInputElement();i.getInputElement().setAttribute("required",""),i.getInputElement().setAttribute("disabled",""),this.emailInput=s;const r=()=>{this.inputValidation(i,(()=>l.Validator.emailField(s.value))),this.inputKeydownFn()};s.addEventListener("input",r),s.addEventListener("focusin",r),i.addInnerElement(this.addControlButtons("email")),null===(n=this.form)||void 0===n||n.addInnerElement(i.getElement())}addPasswordInput(){var e;const t=new d.default(u.PROFILE_CLASSES.PROFILE,u.PROFILE_CLASSES.PASSWORD,u.PROFILE_TEXT.PASSWORD,"","password","");this.passwordWrapper=t;const n=t.getInputElement();t.getInputElement().setAttribute("required",""),n.setAttribute("disabled",""),this.passwordInput=n,this.addShowHidePasswordIcon(this.passwordInput,t);const i=()=>{this.inputValidation(t,(()=>l.Validator.passwordField(n.value))),this.inputKeydownFn()};n.addEventListener("input",i),n.addEventListener("focusin",i),this.addCurrentPasswordInput(),t.addInnerElement(this.addControlButtons("password").getElement()),null===(e=this.form)||void 0===e||e.addInnerElement(t.getElement())}addCurrentPasswordInput(){var e;const t=new d.default(u.PROFILE_CLASSES.PROFILE,u.PROFILE_CLASSES.CURRENT_PASSWORD,u.PROFILE_TEXT.CURRENT_PASSWORD,"","password",""),n=t.getInputElement();t.getInputElement().setAttribute("required",""),n.setAttribute("disabled",""),this.currentPasswordInput=n,this.addShowHidePasswordIcon(this.currentPasswordInput,t);const i=()=>{var e;void 0!==(null===(e=this.passwordInput)||void 0===e?void 0:e.value)&&(this.inputValidation(t,(()=>l.Validator.passwordField(n.value))),this.inputKeydownFn())};n.addEventListener("input",i),n.addEventListener("focusin",i),null===(e=this.passwordWrapper)||void 0===e||e.addInnerElement(t.getElement())}addShowHidePasswordIcon(e,t){const n=new o.ElementCreator("span",u.PROFILE_CLASSES.SHOW_HIDE_ICON,u.PROFILE_TEXT.SHOW_HIDE_ICON.VISIBLE);n.getElement().addEventListener("click",this.showHidePasswordFn.bind(this,e,n)),t.addInnerElement(n)}showHidePasswordFn(e,t){const n=t.getElement();e.getAttribute("type")===u.TYPE.INPUT_TYPE.PASSWORD?(e.setAttribute("type",u.TYPE.INPUT_TYPE.TEXT),n.textContent=u.PROFILE_TEXT.SHOW_HIDE_ICON.VISIBLE_OFF):(e.setAttribute("type",u.TYPE.INPUT_TYPE.PASSWORD),n.textContent=u.PROFILE_TEXT.SHOW_HIDE_ICON.VISIBLE)}addShippingFieldSet(){var e;const t=new o.ElementCreator("fieldset","fieldset");this.shippingAddressFieldSet=t;const n=new o.ElementCreator("legend","legend");n.getElement().textContent="Shipping Addresses",t.addInnerElement(n),null===(e=this.form)||void 0===e||e.addInnerElement(t)}addBillingFieldSet(){var e;const t=new o.ElementCreator("fieldset","fieldset");this.billingAddressFieldSet=t;const n=new o.ElementCreator("legend","legend");n.getElement().textContent="Billing Addresses",t.addInnerElement(n),null===(e=this.form)||void 0===e||e.addInnerElement(t)}addAddressesWrapper(){var e;const t=new o.ElementCreator("div",["user-profile__addresses-input-wrapper","primary-wrapper"]);this.addressesWrapper=t,null===(e=this.form)||void 0===e||e.addInnerElement(t)}createAddresses(){var e;const t=null===(e=this.data)||void 0===e?void 0:e.addresses;null==t||t.forEach((e=>{var t;null===(t=this.addressesWrapper)||void 0===t||t.addInnerElement(this.createAddress(e))}))}createAddress(e){const t=new o.ElementCreator("div",u.PROFILE_CLASSES.ADDRESS),{id:n}=e;return t.addInnerElement(this.addAddressInfo(e).getElement()),t.addInnerElement(this.addCityAddressInput(e).getElement()),t.addInnerElement(this.addStreetAddressInput(e).getElement()),t.addInnerElement(this.addPostalCodeAddressInput(e).getElement()),t.addInnerElement(this.addCountryAddressInput(e).getElement()),n&&(t.addInnerElement(this.addControlButtons(n)),t.getElement().dataset.id=n),t}addAddressInfo(e){var t,n,i,s;const r=new o.ElementCreator("div","user-profile__addresses-wrapper"),a=null===(t=this.data)||void 0===t?void 0:t.defaultBillingAddressId,d=null===(n=this.data)||void 0===n?void 0:n.defaultShippingAddressId,l=null===(i=this.data)||void 0===i?void 0:i.billingAddressIds,c=null===(s=this.data)||void 0===s?void 0:s.shippingAddressIds;let u="";return e.id&&(e.id===a&&(u+="Default "),e.id===d&&(u+="Default "),(null==l?void 0:l.includes(e.id))&&(u+="Billing Address"),(null==c?void 0:c.includes(e.id))&&(u+="Shipping Address")),r.getElement().textContent=u,r}addCityAddressInput(e){var t;const n=new d.default(u.PROFILE_CLASSES.PROFILE,u.PROFILE_CLASSES.CITY,u.PROFILE_TEXT.CITY,null!==(t=e.city)&&void 0!==t?t:"","text",""),i=n.getInputElement();i.setAttribute("disabled","");const s=()=>{this.inputValidation(n,(()=>l.Validator.cityField(i.value))),this.inputKeydownFn()};return i.addEventListener("input",s),i.addEventListener("focusin",s),n}addStreetAddressInput(e){var t;const n=new d.default(u.PROFILE_CLASSES.PROFILE,u.PROFILE_CLASSES.STREET,u.PROFILE_TEXT.STREET,null!==(t=e.streetName)&&void 0!==t?t:"","text",""),i=n.getInputElement();i.setAttribute("disabled","");const s=()=>{this.inputValidation(n,(()=>l.Validator.streetField(i.value))),this.inputKeydownFn()};return i.addEventListener("input",s),i.addEventListener("focusin",s),n}addPostalCodeAddressInput(e){var t;const n=new d.default(u.PROFILE_CLASSES.PROFILE,u.PROFILE_CLASSES.POSTAL_CODE,u.PROFILE_TEXT.POSTAL_CODE,null!==(t=e.postalCode)&&void 0!==t?t:"","text",""),i=n.getInputElement();i.setAttribute("disabled","");const s=()=>{var e,t,s;const r=null===(s=null===(t=null===(e=i.parentElement)||void 0===e?void 0:e.parentElement)||void 0===t?void 0:t.parentElement)||void 0===s?void 0:s.dataset.id,a=document.querySelector(`div[data-id="${r}"] select`);this.inputValidation(n,(()=>{var e;return l.Validator.postalCodeField(i.value,null!==(e=null==a?void 0:a.value)&&void 0!==e?e:"")})),this.inputKeydownFn()};return i.addEventListener("input",(()=>s())),i.addEventListener("focusin",(()=>s())),n}addCountryAddressInput(e){var t;const n=["USA","Russia"],i=["US","RU"],s=new o.ElementCreator("div",["user-profile__country-input-wrapper","primary-wrapper"]),r=new o.ElementCreator("label",["user-profile__country-label","primary-label"]);r.getElement().textContent="Country";const a=new o.ElementCreator("select",["user-profile__country-input","primary-input"]);for(let e=0;e<n.length;e+=1){const t=document.createElement("option");t.setAttribute("value",i[e]),t.textContent=n[e],a.getElement().appendChild(t)}s.addInnerElement(r.getElement()),r.addInnerElement(a.getElement());const d=a.getElement();d.setAttribute("disabled",""),d.value=null!==(t=e.country)&&void 0!==t?t:"";return d.addEventListener("change",(()=>(()=>{var e,t,n;const i=null===(t=null===(e=a.getElement().parentElement)||void 0===e?void 0:e.parentElement)||void 0===t?void 0:t.previousSibling,s=null===(n=null==i?void 0:i.firstChild)||void 0===n?void 0:n.firstChild;null==s||s.dispatchEvent(new Event("input"))})())),s}addEditButton(e){const t=new o.ElementCreator("button","edit");return t.getElement().textContent="Edit",t.getElement().setAttribute("type","button"),t.getElement().addEventListener("click",(e=>this.editButtonCallback(e))),t.getElement().dataset.btnType=e,t}addSaveButton(e){const t=new o.ElementCreator("button","save");return t.getElement().textContent="Save",t.getElement().setAttribute("type","button"),t.getElement().setAttribute("disabled",""),t.getElement().addEventListener("click",(e=>this.saveButtonCallback(e))),t.getElement().dataset.btnType=e,t}editButtonCallback(e){var t,n;const i=e.target;i.nextSibling.disabled=!1,i.disabled=!0;(null===(n=null===(t=i.parentElement)||void 0===t?void 0:t.parentElement)||void 0===n?void 0:n.querySelectorAll(".primary-input")).forEach((e=>{e.disabled=!1}))}saveButtonCallback(e){var t,n,i,s,o,d,l;const c=e.target,u=null===(t=null==c?void 0:c.dataset)||void 0===t?void 0:t.btnType,E=c.previousSibling,h=null===(i=null===(n=c.parentElement)||void 0===n?void 0:n.parentElement)||void 0===i?void 0:i.querySelectorAll(".primary-input"),m=null!==(o=null===(s=h[0])||void 0===s?void 0:s.value)&&void 0!==o?o:"",_=null!==(l=null===(d=h[1])||void 0===d?void 0:d.value)&&void 0!==l?l:"";let C=!0;if(h.forEach((e=>{e.classList.contains("invalid")&&(C=!1)})),C){switch(u){case"firstName":r.CustomerAPI.updateCustomerFirstName(m);break;case"lastName":r.CustomerAPI.updateCustomerLastName(m);break;case"birthDay":r.CustomerAPI.updateCustomerBirthDay(m);break;case"email":r.CustomerAPI.updateCustomerEmail(m);break;case"password":r.CustomerAPI.updateCustomerPassword(m,_)}h.forEach((e=>{const t=e;t.disabled=!0,t.focus(),t.blur()})),E.disabled=!1,c.disabled=!0}else switch(u){case"firstName":(0,a.createPopupWithText)("Wrong format of first name.");break;case"lastName":(0,a.createPopupWithText)("Wrong format of last name.");break;case"birthDay":(0,a.createPopupWithText)("Wrong format of birthday.");break;case"email":(0,a.createPopupWithText)("Wrong format of email.");break;case"password":(0,a.createPopupWithText)("Wrong format of password.")}}inputValidation(e,t){const n=e.getInputElement(),i=e.getErrorLine(),s=t();return s?(n.classList.add(u.PROFILE_CLASSES.INPUT_INVALID),i.textContent=`${s}`,!1):(n.classList.remove(u.PROFILE_CLASSES.INPUT_INVALID),i.textContent=u.INITIAL_VALUE.ERROR_LINE,!0)}inputKeydownFn(){var e;null===(e=this.errorLine)||void 0===e||e.classList.remove(u.PROFILE_CLASSES.ERROR_LINE_SHOW)}}t.default=E},644:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.View=void 0;const i=n(111);t.View=class{constructor(e,t,n){this.viewElementCreator=this.createView(e,t,n)}createView(e,t,n){return new i.ElementCreator(e,t,n)}getHTMLElement(){return this.viewElementCreator.getElement()}setContent(e){const t=this.viewElementCreator.getElement(),n=e.getHTMLElement();this.removeContent(t),this.viewElementCreator.addInnerElement(n)}removeContent(e){for(;e.firstChild;)e.firstChild.remove()}}},83:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});const i=n(644),s=["wrapper"];class r extends i.View{constructor(){super("div",s)}}t.default=r},303:function(e,t,n){var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),n(183);new(i(n(477)).default)}},t={};function n(i){var s=t[i];if(void 0!==s)return s.exports;var r=t[i]={exports:{}};return e[i].call(r.exports,r,r.exports,n),r.exports}n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};n(303)}();