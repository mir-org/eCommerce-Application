!function(){"use strict";var e={183:function(e,t,n){n.r(t)},430:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.TOKEN_STORAGE_KEY=t.CTP_SCOPES=t.CTP_API_URL=t.CTP_AUTH_URL=t.CTP_CLIENT_ID=t.CTP_CLIENT_SECRET=t.CTP_PROJECT_KEY=void 0;t.CTP_PROJECT_KEY="beat-amazon";t.CTP_CLIENT_SECRET="Q-Re7QPpJHlYELukt_igPBIHx6mOx13q";t.CTP_CLIENT_ID="X5YO3W0sZrwcRNYQexE8np0q";t.CTP_AUTH_URL="https://auth.europe-west1.gcp.commercetools.com";t.CTP_API_URL="https://api.europe-west1.gcp.commercetools.com";t.CTP_SCOPES="manage_my_quote_requests:beat-amazon manage_my_orders:beat-amazon view_products:beat-amazon manage_my_quotes:beat-amazon view_categories:beat-amazon manage_my_shopping_lists:beat-amazon view_published_products:beat-amazon manage_my_business_units:beat-amazon manage_my_payments:beat-amazon create_anonymous_token:beat-amazon manage_my_profile:beat-amazon";t.TOKEN_STORAGE_KEY="access-token"},770:function(e,t,n){var s=this&&this.__awaiter||function(e,t,n,s){return new(n||(n=Promise))((function(i,r){function a(e){try{l(s.next(e))}catch(e){r(e)}}function o(e){try{l(s.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}l((s=s.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.AuthAPI=t.AuthStatusCodes=void 0;const i=n(430);var r;!function(e){e[e.successfulPasswordTokenFetch=200]="successfulPasswordTokenFetch"}(r||(t.AuthStatusCodes=r={}));t.AuthAPI=class{static setAccessToken(){return s(this,void 0,void 0,(function*(){localStorage.getItem(i.TOKEN_STORAGE_KEY)||(yield this.fetchAnonymousToken())}))}static fetchAnonymousToken(){return s(this,void 0,void 0,(function*(){const e=`${i.CTP_AUTH_URL}/oauth/${i.CTP_PROJECT_KEY}/anonymous/token?grant_type=client_credentials`,t=yield fetch(e,{method:"POST",headers:{Authorization:`Basic ${btoa(`${i.CTP_CLIENT_ID}:${i.CTP_CLIENT_SECRET}`)}`}}),n=(yield t.json()).access_token;localStorage.setItem(i.TOKEN_STORAGE_KEY,n)}))}static fetchPasswordToken(e,t){return s(this,void 0,void 0,(function*(){const n=`${i.CTP_AUTH_URL}/oauth/${i.CTP_PROJECT_KEY}/customers/token?grant_type=password&username=${e}&password=${t}`,s=yield fetch(n,{method:"POST",headers:{Authorization:`Basic ${btoa(`${i.CTP_CLIENT_ID}:${i.CTP_CLIENT_SECRET}`)}`}});if(s.status!==r.successfulPasswordTokenFetch)return s.status;const a=(yield s.json()).access_token;return localStorage.setItem(i.TOKEN_STORAGE_KEY,a),s.status}))}static fetchRefreshToken(e){return s(this,void 0,void 0,(function*(){const t=`${i.CTP_AUTH_URL}/oauth/token?grant_type=refresh_token&refresh_token=${e}`,n=yield fetch(t,{method:"POST",headers:{Authorization:`Basic ${btoa(`${i.CTP_CLIENT_ID}:${i.CTP_CLIENT_SECRET}`)}`}}),s=(yield n.json()).access_token;localStorage.setItem(i.TOKEN_STORAGE_KEY,s)}))}}},437:function(e,t){var n;Object.defineProperty(t,"__esModule",{value:!0}),t.StatusCodes=void 0,function(e){e[e.successfulLogin=200]="successfulLogin",e[e.successfulRegistration=201]="successfulRegistration"}(n||(t.StatusCodes=n={}))},155:function(e,t,n){var s=this&&this.__awaiter||function(e,t,n,s){return new(n||(n=Promise))((function(i,r){function a(e){try{l(s.next(e))}catch(e){r(e)}}function o(e){try{l(s.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}l((s=s.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.CustomerAPI=void 0;const i=n(430),r=n(770),a=n(437);t.CustomerAPI=class{static loginCustomer(e,t){return s(this,void 0,void 0,(function*(){const n=`${i.CTP_API_URL}/${i.CTP_PROJECT_KEY}/me/login`,s=yield r.AuthAPI.fetchPasswordToken(e,t);if(s!==r.AuthStatusCodes.successfulPasswordTokenFetch)return s;return(yield fetch(n,{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem(i.TOKEN_STORAGE_KEY)}`},body:JSON.stringify({email:e,password:t})})).status}))}static registerCustomer(e){return s(this,void 0,void 0,(function*(){const t=`${i.CTP_API_URL}/${i.CTP_PROJECT_KEY}/me/signup`,n=yield fetch(t,{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem(i.TOKEN_STORAGE_KEY)}`},body:JSON.stringify({email:e.email,password:e.password,firstName:e.firstName,lastName:e.lastName,dateOfBirth:e.dateOfBirth,addresses:e.addresses,defaultShippingAddress:e.defaultShippingAddress,shippingAddresses:e.shippingAddresses,defaultBillingAddress:e.defaultBillingAddress,billingAddresses:e.billingAddresses})});return n.status!==a.StatusCodes.successfulRegistration||(yield r.AuthAPI.fetchPasswordToken(e.email,e.password),yield this.loginCustomer(e.email,e.password)),n.status}))}static getCustomerInfo(){return s(this,void 0,void 0,(function*(){const e=`${i.CTP_API_URL}/${i.CTP_PROJECT_KEY}/me`,t=yield fetch(e,{method:"GET",headers:{Authorization:`Bearer ${localStorage.getItem(i.TOKEN_STORAGE_KEY)}`}}),n=yield t.json();console.log("getInfo",n)}))}}},942:function(e,t,n){var s=this&&this.__awaiter||function(e,t,n,s){return new(n||(n=Promise))((function(i,r){function a(e){try{l(s.next(e))}catch(e){r(e)}}function o(e){try{l(s.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}l((s=s.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.ProductAPI=void 0;const i=n(430);class r{static getAllProducts(e=0,t=4){return s(this,void 0,void 0,(function*(){const n=t*e,s=`${i.CTP_API_URL}/${i.CTP_PROJECT_KEY}/products?limit=${t}&offset=${n}`,r=yield fetch(s,{method:"GET",headers:{Authorization:`Bearer ${localStorage.getItem(i.TOKEN_STORAGE_KEY)}`}});return yield r.json()}))}static getProduct(e){return s(this,void 0,void 0,(function*(){const t=`${i.CTP_API_URL}/${i.CTP_PROJECT_KEY}/products/${e}`,n=yield fetch(t,{method:"GET",headers:{Authorization:`Bearer ${localStorage.getItem(i.TOKEN_STORAGE_KEY)}`}});return yield n.json()}))}static getNumberOfPages(){return s(this,void 0,void 0,(function*(){const e=yield r.getAllProducts();return Math.ceil(e.total/e.limit)}))}static getFilteredProducts(e,t=0,n=4){return s(this,void 0,void 0,(function*(){const{categoryId:s,sort:r,search:a,minPriceValue:o,maxPriceValue:l,brands:d}=e,u=`${s?`filter=categories.id:"${s}"`:""}&${d?`filter.query=variants.attributes.manufacturer:${d}`:""}&${d?`facet=variants.attributes.manufacturer:${d}`:""}&${o||l?`filter=variants.price.centAmount:range (${o} to ${l})`:""}&${r?`sort=${r}`:""}&${a?`text.en=${a}`:""}`,c=n*t,E=`${i.CTP_API_URL}/${i.CTP_PROJECT_KEY}/product-projections/search?${u}&limit=${n}&offset=${c}`,h=yield fetch(E,{method:"GET",headers:{Authorization:`Bearer ${localStorage.getItem(i.TOKEN_STORAGE_KEY)}`}}),m=yield h.json(),I=new CustomEvent("myCustomEvent",{detail:{message:"Custom event dispatched",data:m.results,currentPage:t,totalPages:Math.ceil(m.total/n),query:e}});document.dispatchEvent(I)}))}}t.ProductAPI=r},477:function(e,t,n){var s=this&&this.__createBinding||(Object.create?function(e,t,n,s){void 0===s&&(s=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,s,i)}:function(e,t,n,s){void 0===s&&(s=n),e[s]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&s(t,e,n);return i(t,e),t},a=this&&this.__awaiter||function(e,t,n,s){return new(n||(n=Promise))((function(i,r){function a(e){try{l(s.next(e))}catch(e){r(e)}}function o(e){try{l(s.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}l((s=s.apply(e,t||[])).next())}))},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const l=n(903),d=o(n(754)),u=o(n(271)),c=o(n(707)),E=o(n(83)),h=n(413),m=o(n(22)),I=n(770),_=o(n(831));t.default=class{constructor(){I.AuthAPI.setAccessToken(),this.header=null,this.main=null;const e=new m.default,t=this.createRoutes(e);this.router=new l.Router(t,e),this.observer=new _.default,this.createView(e)}createView(e){const t=new E.default;this.header=new u.default(this.router,e),this.observer.setHeader(this.header),this.main=new c.default;const n=new d.default;t.getHTMLElement().append(this.header.getHTMLElement(),this.main.getHTMLElement(),n.getHTMLElement()),document.body.append(t.getHTMLElement())}createRoutes(e){return[{path:"",callback:()=>a(this,void 0,void 0,(function*(){const{default:e}=yield Promise.resolve().then((()=>r(n(578))));this.setContent(h.Pages.INDEX,new e(this.router))}))},{path:`${h.Pages.INDEX}`,callback:()=>a(this,void 0,void 0,(function*(){const{default:e}=yield Promise.resolve().then((()=>r(n(578))));this.setContent(h.Pages.INDEX,new e(this.router))}))},{path:`${h.Pages.LOGIN}`,callback:()=>a(this,void 0,void 0,(function*(){const{default:t}=yield Promise.resolve().then((()=>r(n(291))));this.setContent(h.Pages.LOGIN,new t(this.router,this.observer,e))}))},{path:`${h.Pages.USER_PROFILE}`,callback:()=>a(this,void 0,void 0,(function*(){const{default:e}=yield Promise.resolve().then((()=>r(n(844))));this.setContent(h.Pages.USER_PROFILE,new e)}))},{path:`${h.Pages.REGISTRATION}`,callback:()=>a(this,void 0,void 0,(function*(){const{default:t}=yield Promise.resolve().then((()=>r(n(156))));this.setContent(h.Pages.REGISTRATION,new t(this.router,this.observer,e))}))},{path:`${h.Pages.CATALOG}`,callback:()=>a(this,void 0,void 0,(function*(){const{default:e}=yield Promise.resolve().then((()=>r(n(799))));this.setContent(h.Pages.CATALOG,new e(this.router))}))},{path:`${h.Pages.PROCESSORS}`,callback:()=>a(this,void 0,void 0,(function*(){const{default:e}=yield Promise.resolve().then((()=>r(n(7))));this.setContent(h.Pages.CATALOG,new e(this.router))}))},{path:`${h.Pages.GRAPHIC_CARDS}`,callback:()=>a(this,void 0,void 0,(function*(){const{default:e}=yield Promise.resolve().then((()=>r(n(906))));this.setContent(h.Pages.GRAPHIC_CARDS,new e(this.router))}))},{path:`${h.Pages.CATALOG}/${h.ID}`,callback:e=>a(this,void 0,void 0,(function*(){const{default:t}=yield Promise.resolve().then((()=>r(n(392))));void 0!==e&&this.setContent(h.Pages.CATALOG,new t(e,this.router))}))},{path:`${h.Pages.NOT_FOUND}`,callback:()=>a(this,void 0,void 0,(function*(){const{default:e}=yield Promise.resolve().then((()=>r(n(15))));this.setContent(h.Pages.NOT_FOUND,new e(this.router))}))}]}setContent(e,t){var n,s;null===(n=this.header)||void 0===n||n.setSelectedItem(e),null===(s=this.main)||void 0===s||s.setContent(t)}}},831:function(e,t){Object.defineProperty(t,"__esModule",{value:!0});t.default=class{constructor(){this.header=null}setHeader(e){this.header=e}userIsLoggedIn(e){var t;null===(t=this.header)||void 0===t||t.userIsLoggedIn(e)}}},586:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.HistoryRouterHandler=void 0;t.HistoryRouterHandler=class{constructor(e){this.callback=e,this.handler=this.navigate.bind(this),window.addEventListener("popstate",this.handler)}navigate(e){"string"==typeof e&&this.setHistory(e);const t={path:"",resource:""},n=window.location.pathname.slice(1).split("/");[t.path="",t.resource=""]=n,this.callback(t)}setHistory(e){window.history.pushState(null,"",`/${e}`)}}},413:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.ID=t.Pages=void 0;t.Pages={INDEX:"main",LOGIN:"login",REGISTRATION:"registration",USER_PROFILE:"profile",CATALOG:"catalog",PROCESSORS:"processors",GRAPHIC_CARDS:"graphic-cards",NOT_FOUND:"not-found"};t.ID="{id}"},903:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Router=void 0;const s=n(413),i=n(586),r="login-status";t.Router=class{constructor(e,t){this.routes=e,this.handler=new i.HistoryRouterHandler(this.urlChangedHandler.bind(this)),this.state=t,document.addEventListener("DOMContentLoaded",(()=>{this.handler.navigate("")}))}navigate(e){this.handler.navigate(e)}urlChangedHandler(e){const t=this.state.getValue(r);if((e.path===s.Pages.REGISTRATION||e.path===s.Pages.LOGIN)&&"true"===t)return void this.redirectToMain();const n=""===e.resource?e.path:`${e.path}/${s.ID}`,i=this.routes.find((e=>e.path===n));i?i.callback(e.resource):this.redirectToNotFoundPage()}redirectToMain(){const e=this.routes.find((e=>e.path===s.Pages.INDEX));e&&this.navigate(e.path)}redirectToNotFoundPage(){const e=this.routes.find((e=>e.path===s.Pages.NOT_FOUND));e&&this.navigate(e.path)}}},22:function(e,t){Object.defineProperty(t,"__esModule",{value:!0});const n="spaApp";t.default=class{constructor(){this.fields=this.loadState(),window.addEventListener("beforeunload",this.saveState.bind(this))}setValue(e,t){this.fields.set(e,t)}getValue(e){const t=this.fields.get(e);return t||""}saveState(){const e=Object.fromEntries(this.fields.entries());localStorage.setItem(n,JSON.stringify(e))}loadState(){const e=localStorage.getItem(n);if(e){const t=JSON.parse(e);return new Map(Object.entries(t))}return new Map}}},97:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.BreadCrumbsCreator=t.BREAD_CRUMBS_CLASSES=void 0;const s=n(111);t.BREAD_CRUMBS_CLASSES={BREAD_CRUMBS:"bread-crumbs",BREAD_CRUMBS_ELEMENT:"bread-crumbs__element",BREAD_CRUMBS_LINK:"bread-crumbs__link",BREAD_CRUMBS_LINK_ACTIVE:"bread-crumbs__link--active"};t.BreadCrumbsCreator=class{constructor(e,n){this.router=n,this.element=new s.ElementCreator("ul",t.BREAD_CRUMBS_CLASSES.BREAD_CRUMBS),this.createBreadCrumbs(e)}createBreadCrumbs(e){e.forEach((e=>{const n=new s.ElementCreator("li",t.BREAD_CRUMBS_CLASSES.BREAD_CRUMBS_ELEMENT),i=e.isCurrent?[t.BREAD_CRUMBS_CLASSES.BREAD_CRUMBS_LINK,t.BREAD_CRUMBS_CLASSES.BREAD_CRUMBS_LINK_ACTIVE]:t.BREAD_CRUMBS_CLASSES.BREAD_CRUMBS_LINK,r=new s.ElementCreator("a",i,e.text);e.isCurrent||r.getElement().addEventListener("click",(()=>this.router.navigate(e.pagePath))),n.addInnerElement(r),this.element.addInnerElement(n)}))}getElement(){return this.element.getElement()}}},852:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.clearElement=void 0,t.clearElement=function(e){if(e)for(;e.firstChild;)e.removeChild(e.firstChild)}},111:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.ElementCreator=void 0;class n{constructor(e,t,n){this.element=document.createElement(e),this.setElement(t,n)}setElement(e,t){this.setCssClasses(e),t&&this.setTextContent(t)}getElement(){return this.element}setCssClasses(e){Array.isArray(e)?this.element.classList.add(...e):this.element.classList.add(e)}setTextContent(e){this.element.textContent=e}addInnerElement(e){e instanceof n?this.element.append(e.getElement()):this.element.append(e)}}t.ElementCreator=n},507:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});const s=n(111),i="primary-wrapper",r="primary-input",a="primary-label",o="primary-error-line";t.default=class{constructor(e,t,n,s,i="text",r=""){this.element=document.createElement("div"),this.inputElement=document.createElement("input"),this.labelElement=document.createElement("label"),this.errorLineElement=document.createElement("div"),this.setElement(e,t,n,i),this.setValue(s),this.setPlaceholder(r)}setElement(e,t,n,s){this.setLabelTextContent(n),this.setCssClasses(e,t),this.labelElement.prepend(this.inputElement),this.element.append(this.labelElement),this.element.append(this.errorLineElement),this.setType(s)}getElement(){return this.element}getInputElement(){return this.inputElement}getErrorLine(){return this.errorLineElement}setValue(e){this.inputElement.value=e}setCssClasses(e,t){this.element.classList.add(`${e}__${t}-input-wrapper`,i),this.inputElement.classList.add(`${e}__${t}-input`,r),this.labelElement.classList.add(`${e}__${t}-label`,a),this.errorLineElement.classList.add(o)}setLabelTextContent(e){this.labelElement&&(this.labelElement.textContent=e)}setType(e){this.inputElement.setAttribute("type",e)}setPlaceholder(e){this.inputElement.setAttribute("placeholder",e)}addInnerElement(e){e instanceof s.ElementCreator?this.element.append(e.getElement()):this.element.append(e)}}},442:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.Validator=void 0;t.Validator=class{static nameField(e){let t="";return e||(t="Name is empty."),/^[a-zA-Z]+$/.test(e)||(t="Wrong format of Name."),t}static emailField(e){let t="";return e?/^[\w-.]+@([\w-]+\.)+[\w-]{2,4}$/g.test(e)||(t="Wrong format of email."):t="Email is empty.",t}static passwordField(e){let t="";return e?/^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])[0-9a-zA-Z]{8,}$/.test(e)||(t="Password must be at least 8 characters long; must contain at least one uppercase letter (A-Z),  at least one lowercase letter (a-z), at least one digit (0-9), must not contain leading or trailing whitespace "):t="Password is empty.",t}static confirmPasswordField(e,t){let n="";return e?e!==t&&(n="Passwords do not match"):n="Password is empty.",n}static birthField(e){let t="";if(e){const n=new Date(e),s=new Date;let i=s.getFullYear()-n.getFullYear();(s.getMonth()<n.getMonth()||s.getMonth()===n.getMonth()&&s.getDate()<n.getDate())&&(i-=1),i<13&&(t="You must be at least 13 years old.")}else t="Date of birth is empty.";return t}static streetField(e){let t="";return e||(t="Street is empty."),t}static cityField(e){let t="";return e?/^[a-zA-Z\s]+$/.test(e)||(t="City must contain only letters and spaces."):t="City is empty.",t}static postalCodeField(e,t){let n="";if(e){("US"===t?/^\d{5}(-\d{4})?$/:/^[0-9]{6}$/).test(e)||(n="US"===t?"Invalid USA postal code format.":"Invalid Russian postal code format.")}else n="Postal code is empty.";return n}}},754:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});const s=n(111),i=n(644);class r extends i.View{constructor(){super("footer","footer"),this.configView()}configView(){const e=new s.ElementCreator("a","footer__link","");e.getElement().setAttribute("href","https://rs.school/js/"),e.getElement().setAttribute("target","_blank"),e.getElement().setAttribute("rel","noopener noreferrer"),this.viewElementCreator.addInnerElement(e);const t=new s.ElementCreator("img","footer__link-image","");t.getElement().setAttribute("src","./assets/images/rs_school_js.svg"),e.addInnerElement(t);const n=new s.ElementCreator("div","footer__text-team","Developed by New World Disorder");this.viewElementCreator.addInnerElement(n);const i=new s.ElementCreator("div","footer__text-year","2023");this.viewElementCreator.addInnerElement(i)}}t.default=r},271:function(e,t,n){var s=this&&this.__awaiter||function(e,t,n,s){return new(n||(n=Promise))((function(i,r){function a(e){try{l(s.next(e))}catch(e){r(e)}}function o(e){try{l(s.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}l((s=s.apply(e,t||[])).next())}))},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=n(111),a=n(644),o=i(n(563)),l=n(413),d=n(770),u="header",c=["header__nav","nav"],E=["header__user-menu","user-menu"],h=["user-menu__logout-button"],m={INDEX:"Main",CATALOG:"Catalog"},I={REGISTRATION:"Registration",LOGIN:"Login",USER_PROFILE:"Your profile"},_="Logout",p="login-status";class C extends a.View{constructor(e,t){super("header",u),this.headerLinkElements=new Map,this.logoutButton=this.crateLogoutButton(),this.configView(e,t)}configView(e,t){this.addNavigation(e),this.addUserMenu(e),this.logoutButton.getElement().addEventListener("click",this.logoutButtonHandler.bind(this,t)),this.userIsLoggedIn(t)}setSelectedItem(e){const t=this.headerLinkElements.get(e.toUpperCase());t instanceof o.default&&t.setSelectedStatus()}addNavigation(e){const t=new r.ElementCreator("nav",c);Object.keys(m).forEach((n=>{const s={name:m[n],callback:()=>e.navigate(l.Pages[n])},i=new o.default(s.name,s.callback,this.headerLinkElements);t.addInnerElement(i.getHTMLElement()),this.headerLinkElements.set(l.Pages[n].toUpperCase(),i)})),this.viewElementCreator.addInnerElement(t)}addUserMenu(e){const t=new r.ElementCreator("div",E);Object.keys(I).forEach((n=>{const s={name:I[n],callback:()=>e.navigate(l.Pages[n])},i=new o.default(s.name,s.callback,this.headerLinkElements);t.addInnerElement(i.getHTMLElement()),this.headerLinkElements.set(l.Pages[n].toUpperCase(),i)})),t.addInnerElement(this.logoutButton),this.viewElementCreator.addInnerElement(t)}crateLogoutButton(){return new r.ElementCreator("a",h,_)}logoutButtonHandler(e){return s(this,void 0,void 0,(function*(){yield d.AuthAPI.fetchAnonymousToken(),e.setValue(p,"false"),this.userIsLoggedIn(e)}))}userIsLoggedIn(e){const t=[this.headerLinkElements.get("REGISTRATION").getHTMLElement(),this.headerLinkElements.get("LOGIN").getHTMLElement(),this.headerLinkElements.get("PROFILE").getHTMLElement(),this.logoutButton.getElement()],n="true"===e.getValue(p)?[0,1]:[2,3];t.forEach(((e,t)=>{e.classList.remove("hide"),n.includes(t)&&e.classList.add("hide")}))}}t.default=C},563:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});const s=n(644),i="nav__item",r="nav__item_selected";class a extends s.View{constructor(e,t,n){super("a",i,e),this.linkElements=n,this.pageCallback=t,this.configView()}setSelectedStatus(){this.linkElements.forEach((e=>e.setNotSelectedStatus()));this.viewElementCreator.getElement().classList.add(r)}setNotSelectedStatus(){this.viewElementCreator.getElement().classList.remove(r)}configView(){this.viewElementCreator.getElement().addEventListener("click",(()=>{this.setSelectedStatus.bind(this),this.pageCallback()}))}}t.default=a},861:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.BREAD_CRUMBS_INFO=t.CATALOG_TEXT=t.CATALOG_CLASSES=void 0;const s=n(413);t.CATALOG_CLASSES={CATALOG:"catalog",LINKS_WRAPPER:"catalog__links-wrapper",LINK:"catalog__link",LINK_IMG:"catalog__link-img",LINK_TEXT:"catalog__link-text"},t.CATALOG_TEXT={PROCESSORS_LINK:"Processors",GRAPHIC_CARDS_LINK:"Graphic cards"},t.BREAD_CRUMBS_INFO=[{text:"PC-Components",isCurrent:!0,pagePath:s.Pages.CATALOG}]},799:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});const s=n(111),i=n(644),r=n(861),a=n(413),o=n(97);class l extends i.View{constructor(e){super("section",r.CATALOG_CLASSES.CATALOG),this.router=e,this.configureView()}configureView(){this.addBreadCrumbs(),this.addCategoryLinks()}addBreadCrumbs(){const e=new o.BreadCrumbsCreator(r.BREAD_CRUMBS_INFO,this.router);this.viewElementCreator.addInnerElement(e.getElement())}addCategoryLinks(){const e=new s.ElementCreator("div",r.CATALOG_CLASSES.LINKS_WRAPPER),t=this.getProcessorsLink({src:"../../../../assets/images/cpu.svg",text:r.CATALOG_TEXT.PROCESSORS_LINK,callback:()=>this.router.navigate(a.Pages.PROCESSORS)}),n=this.getProcessorsLink({src:"../../../../assets/images/graphic-card.svg",text:r.CATALOG_TEXT.GRAPHIC_CARDS_LINK,callback:()=>this.router.navigate(a.Pages.GRAPHIC_CARDS)});e.addInnerElement(t),e.addInnerElement(n),this.viewElementCreator.addInnerElement(e)}getProcessorsLink(e){const t=new s.ElementCreator("a",r.CATALOG_CLASSES.LINK),n=new s.ElementCreator("img",r.CATALOG_CLASSES.LINK_IMG);n.getElement().setAttribute("src",e.src),t.addInnerElement(n);const i=new s.ElementCreator("div",r.CATALOG_CLASSES.LINK_TEXT,e.text);return t.getElement().addEventListener("click",e.callback),t.addInnerElement(i),t.getElement()}}t.default=l},526:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.CATEGORY_ID=t.SORT_OPTIONS=t.TEXT=t.INPUT_TYPE=t.INPUT_LABEL=t.INITIAL_VALUE=t.PLACEHOLDER=t.CssClasses=void 0,t.CssClasses={FILTERS:"filters",SEARCH_INPUT:"search",SORT:"filters__sort-bar",SORT_OPTION:"filters__sort-option",PRICE_BLOCK:"filters__price-block",PRICE_HEADER:"filters__price-header",PRICE_LINE:"filters__price-line",PRICE_SPLITTER:"filters__price-splitter",PRICE_INPUT:"price",BRANDS_LIST:"filters__brands-list",BRANDS_LINE:"filters__brands-line",BRANDS_INPUT:"brands"},t.PLACEHOLDER={SEARCH_INPUT:"",PRICE_INPUT:"",BRANDS_INPUT:""},t.INITIAL_VALUE={INPUT:"",PRICE_MIN_INPUT:"",PRICE_MAX_INPUT:""},t.INPUT_LABEL={SEARCH_INPUT:"Search...",PRICE_MIN_INPUT:"from",PRICE_MAX_INPUT:"to"},t.INPUT_TYPE={SEARCH_INPUT:"text",PRICE_INPUT:"number",BRANDS_INPUT:"checkbox"},t.TEXT={PRICE_HEADER:"Price(USD)"},t.SORT_OPTIONS=[{TEXT:"Price: height to low",VALUE:"price desc"},{TEXT:"Price: low to height",VALUE:"price asc"},{TEXT:"Name: A-Z",VALUE:"name.en asc"},{TEXT:"Name: Z-A",VALUE:"name.en desc"}],t.CATEGORY_ID="0b0e9d3c-edea-4285-a921-4346b70db822"},40:function(e,t,n){var s=this&&this.__awaiter||function(e,t,n,s){return new(n||(n=Promise))((function(i,r){function a(e){try{l(s.next(e))}catch(e){r(e)}}function o(e){try{l(s.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}l((s=s.apply(e,t||[])).next())}))},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.FiltersView=void 0;const r=n(942),a=n(111),o=i(n(507)),l=n(644),d=n(526);class u extends l.View{constructor(){super("section",d.CssClasses.FILTERS),this.brands=new Set,this.searchInput=null,this.sortBar=null,this.minPriceInput=null,this.maxPriceInput=null,this.configureView()}configureView(){this.addSearchBar(),this.addSortBar(),this.addPriceBlock(),this.addBrandsList()}addSearchBar(){const e=new o.default(d.CssClasses.FILTERS,d.CssClasses.SEARCH_INPUT,d.INPUT_LABEL.SEARCH_INPUT,d.INITIAL_VALUE.INPUT,d.INPUT_TYPE.SEARCH_INPUT,d.PLACEHOLDER.SEARCH_INPUT),t=e.getInputElement();this.searchInput=t,t.addEventListener("keydown",this.searchBarCallback.bind(this)),this.viewElementCreator.addInnerElement(e.getElement())}searchBarCallback(e){return s(this,void 0,void 0,(function*(){if(!this.searchInput)throw new Error;"Enter"!==e.code&&"Enter"!==e.key||(yield this.getFilteredProducts(),this.searchInput.value="")}))}addSortBar(){const e=new a.ElementCreator("select",d.CssClasses.SORT);d.SORT_OPTIONS.forEach((t=>{const n=new a.ElementCreator("option",d.CssClasses.SORT_OPTION,t.TEXT).getElement();n instanceof HTMLOptionElement&&(n.value=t.VALUE),e.addInnerElement(n)}));const t=e.getElement();t instanceof HTMLSelectElement&&(this.sortBar=t),t.addEventListener("change",this.sortBarCallback.bind(this)),this.viewElementCreator.addInnerElement(t)}sortBarCallback(){return s(this,void 0,void 0,(function*(){yield this.getFilteredProducts()}))}addPriceBlock(){const e=new a.ElementCreator("div",d.CssClasses.PRICE_BLOCK),t=new a.ElementCreator("header",d.CssClasses.PRICE_HEADER,d.TEXT.PRICE_HEADER),n=new a.ElementCreator("div",d.CssClasses.PRICE_LINE);this.addPriceLine(n),e.addInnerElement(t.getElement()),e.addInnerElement(n.getElement()),this.viewElementCreator.addInnerElement(e.getElement())}addPriceLine(e){const t=new o.default(d.CssClasses.FILTERS,d.CssClasses.PRICE_INPUT,d.INPUT_LABEL.PRICE_MIN_INPUT,d.INITIAL_VALUE.PRICE_MIN_INPUT,d.INPUT_TYPE.PRICE_INPUT,d.PLACEHOLDER.PRICE_INPUT);this.minPriceInput=t.getInputElement(),t.getInputElement().addEventListener("keydown",this.priceKeyDownCallback.bind(this)),t.getInputElement().addEventListener("input",this.priceInputCallback.bind(this));const n=new a.ElementCreator("div",d.CssClasses.PRICE_SPLITTER),s=new o.default(d.CssClasses.FILTERS,d.CssClasses.PRICE_INPUT,d.INPUT_LABEL.PRICE_MAX_INPUT,d.INITIAL_VALUE.PRICE_MAX_INPUT,d.INPUT_TYPE.PRICE_INPUT,d.PLACEHOLDER.PRICE_INPUT);this.maxPriceInput=s.getInputElement(),s.getInputElement().addEventListener("keydown",this.priceKeyDownCallback.bind(this)),s.getInputElement().addEventListener("input",this.priceInputCallback.bind(this)),e.addInnerElement(t.getElement()),e.addInnerElement(n.getElement()),e.addInnerElement(s.getElement())}priceKeyDownCallback(e){"KeyE"!==e.code&&"e"!==e.key||e.preventDefault()}priceInputCallback(){return s(this,void 0,void 0,(function*(){yield this.getFilteredProducts.call(this)}))}addBrandsList(){return s(this,void 0,void 0,(function*(){const e=new a.ElementCreator("ul",d.CssClasses.BRANDS_LIST);try{const t=(yield r.ProductAPI.getAllProducts()).results.map((e=>{var t;return null===(t=e.masterData.current.masterVariant.attributes.find((e=>"manufacturer"===e.name)))||void 0===t?void 0:t.value}));[...new Set(t)].forEach((t=>{const n=new a.ElementCreator("li",d.CssClasses.BRANDS_LINE),s=new o.default(d.CssClasses.FILTERS,d.CssClasses.BRANDS_INPUT,`${t}`,`${t}`,d.INPUT_TYPE.BRANDS_INPUT,d.PLACEHOLDER.BRANDS_INPUT);n.addInnerElement(s.getElement()),e.addInnerElement(n)}))}catch(e){console.log(e)}e.getElement().addEventListener("change",this.brandsListCallback.bind(this)),this.viewElementCreator.addInnerElement(e.getElement())}))}brandsListCallback(e){return s(this,void 0,void 0,(function*(){e.target instanceof HTMLInputElement&&e.target.closest("input")&&(!0===e.target.checked&&(this.brands.add(e.target.value),this.getFilteredProducts.call(this)),!1===e.target.checked&&(this.brands.delete(e.target.value),this.getFilteredProducts.call(this)))}))}getFilteredProducts(){var e,t;return s(this,void 0,void 0,(function*(){const n=null===(e=this.searchInput)||void 0===e?void 0:e.value,s=null===(t=this.sortBar)||void 0===t?void 0:t.value;if(!this.minPriceInput||!this.maxPriceInput)throw new Error;const i=Number(this.minPriceInput.value||"0"),a=Number(this.maxPriceInput.value||"*"),o=String(100*i||"0"),l=String(100*a||"*"),u=[...this.brands].map((e=>`"${e}"`)).join(",");yield r.ProductAPI.getFilteredProducts({categoryId:d.CATEGORY_ID,search:n,sort:s,minPriceValue:o,maxPriceValue:l,brands:u})}))}}t.FiltersView=u},951:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.BREAD_CRUMBS_INFO=t.CATEGORY_TEXT=t.CATEGORY_CLASSES=void 0;const s=n(413);t.CATEGORY_CLASSES={CATALOG:"category",TITLE:"category__title",CONTENT:"category__content",ASIDE:"category__content-aside",PRODUCTS:"category__content-products"},t.CATEGORY_TEXT={TITLE:"Catalog",CONTENT:"",ASIDE:"",PRODUCTS:""},t.BREAD_CRUMBS_INFO=[{text:"PC-Components",isCurrent:!1,pagePath:s.Pages.CATALOG},{text:"Video cards",isCurrent:!0,pagePath:s.Pages.GRAPHIC_CARDS}]},906:function(e,t,n){var s=this&&this.__awaiter||function(e,t,n,s){return new(n||(n=Promise))((function(i,r){function a(e){try{l(s.next(e))}catch(e){r(e)}}function o(e){try{l(s.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}l((s=s.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const i=n(644),r=n(111),a=n(951),o=n(942),l=n(852),d=n(40),u=n(97);class c extends i.View{constructor(e){super("section",a.CATEGORY_CLASSES.CATALOG),this.router=e,this.currentPage=0,this.totalPages=0,this.content=null,this.contentProducts=null,this.cardsWrapper=null,this.query={categoryId:"0b0e9d3c-edea-4285-a921-4346b70db822",search:"",sort:"price desc",minPriceValue:"0",maxPriceValue:"*",brands:""},this.configView()}configView(){var e;this.addTitle(),this.addContent(),this.addAside(),this.addProductsWrapper(),null===(e=this.content)||void 0===e||e.getElement().addEventListener("click",this.cardWrapperClickHandler.bind(this))}addTitle(){const e=new r.ElementCreator("h1",a.CATEGORY_CLASSES.TITLE,a.CATEGORY_TEXT.TITLE);this.viewElementCreator.addInnerElement(e)}addContent(){const e=new r.ElementCreator("div",a.CATEGORY_CLASSES.CONTENT,a.CATEGORY_TEXT.CONTENT);this.content=e,this.viewElementCreator.addInnerElement(e)}addAside(){var e;const t=new r.ElementCreator("aside",a.CATEGORY_CLASSES.ASIDE,a.CATEGORY_TEXT.ASIDE),n=new d.FiltersView;t.addInnerElement(n.getHTMLElement()),null===(e=this.content)||void 0===e||e.addInnerElement(t),document.addEventListener("myCustomEvent",(e=>{var t;(0,l.clearElement)(null===(t=this.contentProducts)||void 0===t?void 0:t.getElement());const n=e.detail.data;this.currentPage=e.detail.currentPage,this.totalPages=e.detail.totalPages,this.query=e.detail.query;const s=n.map((e=>{var t,n,s;const i=e.name.en;let r="";e.metaDescription&&(r=e.metaDescription.en);const a=e.masterVariant.prices[0].value.centAmount/100,o=null===(s=null===(n=null===(t=e.masterVariant.prices[0])||void 0===t?void 0:t.discounted)||void 0===n?void 0:n.value)||void 0===s?void 0:s.centAmount;let l;o&&(l=o/100);const d=e.masterVariant.images[0].url,{id:u}=e;return{name:i,description:r,price:a,image:d,discount:l,id:u}}));this.addBreadCrumbs(),this.createProductsWrapper(),this.createAllProductCards(s),this.createPaginator()}))}createPaginator(){var e;const t=new r.ElementCreator("div","paginator",""),n=new r.ElementCreator("button","paginator__btn","<");0===this.currentPage&&n.getElement().setAttribute("disabled",""),n.getElement().addEventListener("click",(()=>{this.currentPage>0&&(this.currentPage-=1,this.fetchFilteredProducts())})),t.addInnerElement(n);for(let e=0;e<this.totalPages;e+=1){const n=new r.ElementCreator("button","paginator__btn",`${e+1}`);this.currentPage===e&&n.getElement().classList.add("active"),n.getElement().addEventListener("click",(()=>{this.currentPage=e,this.fetchFilteredProducts()})),t.addInnerElement(n)}const s=new r.ElementCreator("button","paginator__btn",">");this.currentPage===this.totalPages-1&&s.getElement().setAttribute("disabled",""),s.getElement().addEventListener("click",(()=>{this.currentPage<this.totalPages-1&&(this.currentPage+=1,this.fetchFilteredProducts())})),t.addInnerElement(s),null===(e=this.contentProducts)||void 0===e||e.addInnerElement(t)}fetchFilteredProducts(){return s(this,void 0,void 0,(function*(){const e=this.query;yield o.ProductAPI.getFilteredProducts(e,this.currentPage)}))}addProductsWrapper(){var e;return s(this,void 0,void 0,(function*(){const t=new r.ElementCreator("div",a.CATEGORY_CLASSES.PRODUCTS,"");this.contentProducts=t,null===(e=this.content)||void 0===e||e.addInnerElement(t),this.addBreadCrumbs(),this.createProductsWrapper(),this.fetchFilteredProducts(),this.createPaginator()}))}addBreadCrumbs(){var e;const t=new u.BreadCrumbsCreator(a.BREAD_CRUMBS_INFO,this.router);null===(e=this.contentProducts)||void 0===e||e.addInnerElement(t.getElement())}createProductsWrapper(){var e;const t=new r.ElementCreator("div","cards-wrapper","");this.cardsWrapper=t,null===(e=this.contentProducts)||void 0===e||e.addInnerElement(t)}createAllProductCards(e){return s(this,void 0,void 0,(function*(){e.forEach((e=>{var t;null===(t=this.cardsWrapper)||void 0===t||t.addInnerElement(this.createProductCard(e))}))}))}createProductCard(e){const{name:t}=e,{description:n}=e,{price:s}=e,{image:i}=e,{discount:a}=e,{id:o}=e,l=new r.ElementCreator("div","product-card",""),d=new r.ElementCreator("h2","product-card__name",`${t}`),u=new r.ElementCreator("img","product-card__image",""),c=new r.ElementCreator("div","product-card__price",`$${s}`),E=new r.ElementCreator("div","product-card__discount",`$${a}`),h=new r.ElementCreator("div","product-card__description",`${n}`);return u.getElement().setAttribute("src",`${i}`),l.addInnerElement(d),l.addInnerElement(u),l.addInnerElement(c),l.addInnerElement(E),l.addInnerElement(h),l.getElement().dataset.id=o,l}cardWrapperClickHandler(e){const t=e.target;if(t instanceof HTMLElement){const e=t.closest(".product-card");if(e){const t=e.getAttribute("data-id");this.router.navigate(`catalog/${t}`)}}}}t.default=c},370:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.CATEGORY_ID=t.SORT_OPTIONS=t.TEXT=t.INPUT_TYPE=t.INPUT_LABEL=t.INITIAL_VALUE=t.PLACEHOLDER=t.CssClasses=void 0,t.CssClasses={FILTERS:"filters",SEARCH_INPUT:"search",SORT:"filters__sort-bar",SORT_OPTION:"filters__sort-option",PRICE_BLOCK:"filters__price-block",PRICE_HEADER:"filters__price-header",PRICE_LINE:"filters__price-line",PRICE_SPLITTER:"filters__price-splitter",PRICE_INPUT:"price",BRANDS_LIST:"filters__brands-list",BRANDS_LINE:"filters__brands-line",BRANDS_INPUT:"brands"},t.PLACEHOLDER={SEARCH_INPUT:"",PRICE_INPUT:"",BRANDS_INPUT:""},t.INITIAL_VALUE={INPUT:"",PRICE_MIN_INPUT:"",PRICE_MAX_INPUT:""},t.INPUT_LABEL={SEARCH_INPUT:"Search...",PRICE_MIN_INPUT:"from",PRICE_MAX_INPUT:"to"},t.INPUT_TYPE={SEARCH_INPUT:"text",PRICE_INPUT:"number",BRANDS_INPUT:"checkbox"},t.TEXT={PRICE_HEADER:"Price(USD)"},t.SORT_OPTIONS=[{TEXT:"Price: height to low",VALUE:"price desc"},{TEXT:"Price: low to height",VALUE:"price asc"},{TEXT:"Name: A-Z",VALUE:"name.en asc"},{TEXT:"Name: Z-A",VALUE:"name.en desc"}],t.CATEGORY_ID="0c1874b3-f13a-4879-ae0c-4cc69c02d71c"},493:function(e,t,n){var s=this&&this.__awaiter||function(e,t,n,s){return new(n||(n=Promise))((function(i,r){function a(e){try{l(s.next(e))}catch(e){r(e)}}function o(e){try{l(s.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}l((s=s.apply(e,t||[])).next())}))},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.FiltersView=void 0;const r=n(942),a=n(111),o=i(n(507)),l=n(644),d=n(370);class u extends l.View{constructor(){super("section",d.CssClasses.FILTERS),this.brands=new Set,this.searchInput=null,this.sortBar=null,this.minPriceInput=null,this.maxPriceInput=null,this.configureView()}configureView(){this.addSearchBar(),this.addSortBar(),this.addPriceBlock(),this.addBrandsList()}addSearchBar(){const e=new o.default(d.CssClasses.FILTERS,d.CssClasses.SEARCH_INPUT,d.INPUT_LABEL.SEARCH_INPUT,d.INITIAL_VALUE.INPUT,d.INPUT_TYPE.SEARCH_INPUT,d.PLACEHOLDER.SEARCH_INPUT),t=e.getInputElement();this.searchInput=t,t.addEventListener("keydown",this.searchBarCallback.bind(this)),this.viewElementCreator.addInnerElement(e.getElement())}searchBarCallback(e){return s(this,void 0,void 0,(function*(){if(!this.searchInput)throw new Error;"Enter"!==e.code&&"Enter"!==e.key||(yield this.getFilteredProducts(),this.searchInput.value="")}))}addSortBar(){const e=new a.ElementCreator("select",d.CssClasses.SORT);d.SORT_OPTIONS.forEach((t=>{const n=new a.ElementCreator("option",d.CssClasses.SORT_OPTION,t.TEXT).getElement();n instanceof HTMLOptionElement&&(n.value=t.VALUE),e.addInnerElement(n)}));const t=e.getElement();t instanceof HTMLSelectElement&&(this.sortBar=t),t.addEventListener("change",this.sortBarCallback.bind(this)),this.viewElementCreator.addInnerElement(t)}sortBarCallback(){return s(this,void 0,void 0,(function*(){yield this.getFilteredProducts()}))}addPriceBlock(){const e=new a.ElementCreator("div",d.CssClasses.PRICE_BLOCK),t=new a.ElementCreator("header",d.CssClasses.PRICE_HEADER,d.TEXT.PRICE_HEADER),n=new a.ElementCreator("div",d.CssClasses.PRICE_LINE);this.addPriceLine(n),e.addInnerElement(t.getElement()),e.addInnerElement(n.getElement()),this.viewElementCreator.addInnerElement(e.getElement())}addPriceLine(e){const t=new o.default(d.CssClasses.FILTERS,d.CssClasses.PRICE_INPUT,d.INPUT_LABEL.PRICE_MIN_INPUT,d.INITIAL_VALUE.PRICE_MIN_INPUT,d.INPUT_TYPE.PRICE_INPUT,d.PLACEHOLDER.PRICE_INPUT);this.minPriceInput=t.getInputElement(),t.getInputElement().addEventListener("keydown",this.priceKeyDownCallback.bind(this)),t.getInputElement().addEventListener("input",this.priceInputCallback.bind(this));const n=new a.ElementCreator("div",d.CssClasses.PRICE_SPLITTER),s=new o.default(d.CssClasses.FILTERS,d.CssClasses.PRICE_INPUT,d.INPUT_LABEL.PRICE_MAX_INPUT,d.INITIAL_VALUE.PRICE_MAX_INPUT,d.INPUT_TYPE.PRICE_INPUT,d.PLACEHOLDER.PRICE_INPUT);this.maxPriceInput=s.getInputElement(),s.getInputElement().addEventListener("keydown",this.priceKeyDownCallback.bind(this)),s.getInputElement().addEventListener("input",this.priceInputCallback.bind(this)),e.addInnerElement(t.getElement()),e.addInnerElement(n.getElement()),e.addInnerElement(s.getElement())}priceKeyDownCallback(e){"KeyE"!==e.code&&"e"!==e.key||e.preventDefault()}priceInputCallback(){return s(this,void 0,void 0,(function*(){yield this.getFilteredProducts.call(this)}))}addBrandsList(){return s(this,void 0,void 0,(function*(){const e=new a.ElementCreator("ul",d.CssClasses.BRANDS_LIST);try{const t=(yield r.ProductAPI.getAllProducts()).results.map((e=>{var t;return null===(t=e.masterData.current.masterVariant.attributes.find((e=>"manufacturer"===e.name)))||void 0===t?void 0:t.value}));[...new Set(t)].forEach((t=>{const n=new a.ElementCreator("li",d.CssClasses.BRANDS_LINE),s=new o.default(d.CssClasses.FILTERS,d.CssClasses.BRANDS_INPUT,`${t}`,`${t}`,d.INPUT_TYPE.BRANDS_INPUT,d.PLACEHOLDER.BRANDS_INPUT);n.addInnerElement(s.getElement()),e.addInnerElement(n)}))}catch(e){console.log(e)}e.getElement().addEventListener("change",this.brandsListCallback.bind(this)),this.viewElementCreator.addInnerElement(e.getElement())}))}brandsListCallback(e){return s(this,void 0,void 0,(function*(){e.target instanceof HTMLInputElement&&e.target.closest("input")&&(!0===e.target.checked&&(this.brands.add(e.target.value),this.getFilteredProducts.call(this)),!1===e.target.checked&&(this.brands.delete(e.target.value),this.getFilteredProducts.call(this)))}))}getFilteredProducts(){var e,t;return s(this,void 0,void 0,(function*(){const n=null===(e=this.searchInput)||void 0===e?void 0:e.value,s=null===(t=this.sortBar)||void 0===t?void 0:t.value;if(!this.minPriceInput||!this.maxPriceInput)throw new Error;const i=Number(this.minPriceInput.value||"0"),a=Number(this.maxPriceInput.value||"*"),o=String(100*i||"0"),l=String(100*a||"*"),u=[...this.brands].map((e=>`"${e}"`)).join(",");yield r.ProductAPI.getFilteredProducts({categoryId:d.CATEGORY_ID,search:n,sort:s,minPriceValue:o,maxPriceValue:l,brands:u})}))}}t.FiltersView=u},453:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.BREAD_CRUMBS_INFO=t.CATEGORY_TEXT=t.CATEGORY_CLASSES=void 0;const s=n(413);t.CATEGORY_CLASSES={CATALOG:"category",TITLE:"category__title",CONTENT:"category__content",ASIDE:"category__content-aside",PRODUCTS:"category__content-products"},t.CATEGORY_TEXT={TITLE:"Catalog",CONTENT:"",ASIDE:"",PRODUCTS:""},t.BREAD_CRUMBS_INFO=[{text:"PC-Components",isCurrent:!1,pagePath:s.Pages.CATALOG},{text:"Processors",isCurrent:!0,pagePath:s.Pages.PROCESSORS}]},7:function(e,t,n){var s=this&&this.__awaiter||function(e,t,n,s){return new(n||(n=Promise))((function(i,r){function a(e){try{l(s.next(e))}catch(e){r(e)}}function o(e){try{l(s.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}l((s=s.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const i=n(644),r=n(111),a=n(453),o=n(942),l=n(852),d=n(493),u=n(97);class c extends i.View{constructor(e){super("section",a.CATEGORY_CLASSES.CATALOG),this.router=e,this.currentPage=0,this.totalPages=0,this.content=null,this.contentProducts=null,this.cardsWrapper=null,this.query={categoryId:"0c1874b3-f13a-4879-ae0c-4cc69c02d71c",search:"",sort:"price desc",minPriceValue:"0",maxPriceValue:"*",brands:""},this.configView()}configView(){var e;this.addTitle(),this.addContent(),this.addAside(),this.addProductsWrapper(),null===(e=this.content)||void 0===e||e.getElement().addEventListener("click",this.cardWrapperClickHandler.bind(this))}addTitle(){const e=new r.ElementCreator("h1",a.CATEGORY_CLASSES.TITLE,a.CATEGORY_TEXT.TITLE);this.viewElementCreator.addInnerElement(e)}addContent(){const e=new r.ElementCreator("div",a.CATEGORY_CLASSES.CONTENT,a.CATEGORY_TEXT.CONTENT);this.content=e,this.viewElementCreator.addInnerElement(e)}addAside(){var e;const t=new r.ElementCreator("aside",a.CATEGORY_CLASSES.ASIDE,a.CATEGORY_TEXT.ASIDE),n=new d.FiltersView;t.addInnerElement(n.getHTMLElement()),null===(e=this.content)||void 0===e||e.addInnerElement(t),document.addEventListener("myCustomEvent",(e=>{var t;(0,l.clearElement)(null===(t=this.contentProducts)||void 0===t?void 0:t.getElement());const n=e.detail.data;this.currentPage=e.detail.currentPage,this.totalPages=e.detail.totalPages,this.query=e.detail.query;const s=n.map((e=>{var t,n,s;const i=e.name.en;let r="";e.metaDescription&&(r=e.metaDescription.en);const a=e.masterVariant.prices[0].value.centAmount/100,o=null===(s=null===(n=null===(t=e.masterVariant.prices[0])||void 0===t?void 0:t.discounted)||void 0===n?void 0:n.value)||void 0===s?void 0:s.centAmount;let l;o&&(l=o/100);const d=e.masterVariant.images[0].url,{id:u}=e;return{name:i,description:r,price:a,image:d,discount:l,id:u}}));this.addBreadCrumbs(),this.createProductsWrapper(),this.createAllProductCards(s),this.createPaginator()}))}createPaginator(){var e;const t=new r.ElementCreator("div","paginator",""),n=new r.ElementCreator("button","paginator__btn","<");0===this.currentPage&&n.getElement().setAttribute("disabled",""),n.getElement().addEventListener("click",(()=>{this.currentPage>0&&(this.currentPage-=1,this.fetchFilteredProducts())})),t.addInnerElement(n);for(let e=0;e<this.totalPages;e+=1){const n=new r.ElementCreator("button","paginator__btn",`${e+1}`);this.currentPage===e&&n.getElement().classList.add("active"),n.getElement().addEventListener("click",(()=>{this.currentPage=e,this.fetchFilteredProducts()})),t.addInnerElement(n)}const s=new r.ElementCreator("button","paginator__btn",">");this.currentPage===this.totalPages-1&&s.getElement().setAttribute("disabled",""),s.getElement().addEventListener("click",(()=>{this.currentPage<this.totalPages-1&&(this.currentPage+=1,this.fetchFilteredProducts())})),t.addInnerElement(s),null===(e=this.contentProducts)||void 0===e||e.addInnerElement(t)}fetchFilteredProducts(){return s(this,void 0,void 0,(function*(){const e=this.query;yield o.ProductAPI.getFilteredProducts(e,this.currentPage)}))}addProductsWrapper(){var e;return s(this,void 0,void 0,(function*(){const t=new r.ElementCreator("div",a.CATEGORY_CLASSES.PRODUCTS,"");this.contentProducts=t,null===(e=this.content)||void 0===e||e.addInnerElement(t),this.addBreadCrumbs(),this.createProductsWrapper(),this.fetchFilteredProducts(),this.createPaginator()}))}addBreadCrumbs(){var e;const t=new u.BreadCrumbsCreator(a.BREAD_CRUMBS_INFO,this.router);null===(e=this.contentProducts)||void 0===e||e.addInnerElement(t.getElement())}createProductsWrapper(){var e;const t=new r.ElementCreator("div","cards-wrapper","");this.cardsWrapper=t,null===(e=this.contentProducts)||void 0===e||e.addInnerElement(t)}createAllProductCards(e){return s(this,void 0,void 0,(function*(){e.forEach((e=>{var t;null===(t=this.cardsWrapper)||void 0===t||t.addInnerElement(this.createProductCard(e))}))}))}createProductCard(e){const{name:t}=e,{description:n}=e,{price:s}=e,{image:i}=e,{discount:a}=e,{id:o}=e,l=new r.ElementCreator("div","product-card",""),d=new r.ElementCreator("h2","product-card__name",`${t}`),u=new r.ElementCreator("img","product-card__image",""),c=new r.ElementCreator("div","product-card__price",`$${s}`),E=new r.ElementCreator("div","product-card__discount",`$${a}`),h=new r.ElementCreator("div","product-card__description",`${n}`);return u.getElement().setAttribute("src",`${i}`),l.addInnerElement(d),l.addInnerElement(u),l.addInnerElement(c),l.addInnerElement(E),l.addInnerElement(h),l.getElement().dataset.id=o,l}cardWrapperClickHandler(e){const t=e.target;if(t instanceof HTMLElement){const e=t.closest(".product-card");if(e){const t=e.getAttribute("data-id");this.router.navigate(`catalog/${t}`)}}}}t.default=c},578:function(e,t,n){var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=n(111),r=n(644),a=s(n(563)),o=n(413),l="index",d="index__title",u="index__wrapper",c="index__btn",E="primary-button",h={LOGIN:"Login",REGISTRATION:"Registration"};class m extends r.View{constructor(e){super("section",l),this.headerLinkElements=new Map,this.configView(e)}configView(e){const t=new i.ElementCreator("h1",d);this.viewElementCreator.addInnerElement(t);const n=new i.ElementCreator("div",u);this.viewElementCreator.addInnerElement(n),Object.keys(h).forEach((t=>{const s={name:h[t],callback:()=>e.navigate(o.Pages[t])},i=new a.default(s.name,s.callback,this.headerLinkElements);i.getHTMLElement().classList.add(c,E),n.addInnerElement(i.getHTMLElement()),this.headerLinkElements.set(o.Pages[t].toUpperCase(),i)}))}}t.default=m},684:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.KEY_FOR_SAVE=t.INITIAL_VALUE=t.TYPE=t.TEXT=t.CssClasses=void 0,t.CssClasses={TITLE:"login__title",LOGIN:"login",ERROR_LINE:"login_error-line",ERROR_LINE_SHOW:"show",FORM:"login__form",EMAIL_INPUT:"email",PASSWORD_INPUT:"password",INPUT_INVALID:"invalid",LOGIN_BUTTON:["login__button","primary-button"],SHOW_HIDE_ICON:["material-symbols-outlined","login__show-hide-icon"],REGISTRATION_LINK:["login__registration-link"]},t.TEXT={TITLE:"LOGIN",ERROR_LINE:"Incorrect username or password",FORM:"",EMAIL_INPUT:"Email",PASSWORD_INPUT:"Password",BUTTON:"Login",SHOW_HIDE_ICON:{VISIBLE:"visibility",VISIBLE_OFF:"visibility_off"},REGISTRATION_LINK:"Sign Up"},t.TYPE={INPUT_TYPE:{EMAIL:"text",PASSWORD:"password",TEXT:"text"},BUTTON_TYPE:"submit"},t.INITIAL_VALUE={INPUT_VALUE:{EMAIL:"",PASSWORD:""},PLACEHOLDER:{EMAIL:"",PASSWORD:""},ERROR_LINE:""},t.KEY_FOR_SAVE={LOGIN_STATUS:"login-status"}},291:function(e,t,n){var s=this&&this.__awaiter||function(e,t,n,s){return new(n||(n=Promise))((function(i,r){function a(e){try{l(s.next(e))}catch(e){r(e)}}function o(e){try{l(s.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}l((s=s.apply(e,t||[])).next())}))},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=n(155),a=n(770),o=n(413),l=n(111),d=i(n(507)),u=n(644),c=n(684),E=n(442);class h extends u.View{constructor(e,t,n){super("section",c.CssClasses.LOGIN),this.router=e,this.observer=t,this.state=n,this.form=null,this.errorLine=null,this.emailInput=null,this.passwordInput=null,this.configView()}configView(){this.addTitle(),this.addErrorLine(),this.addForm(),this.configForm(),this.addRegistrationLink()}configForm(){this.addEmailInput(),this.addPasswordInput(),this.addLoginButton()}addTitle(){const e=new l.ElementCreator("h1",c.CssClasses.TITLE,c.TEXT.TITLE);this.viewElementCreator.addInnerElement(e)}addErrorLine(){const e=new l.ElementCreator("div",c.CssClasses.ERROR_LINE,c.TEXT.ERROR_LINE).getElement();this.errorLine=e,this.viewElementCreator.addInnerElement(e)}addForm(){const e=new l.ElementCreator("form",c.CssClasses.FORM,c.TEXT.FORM);this.form=e,this.viewElementCreator.addInnerElement(e.getElement())}addEmailInput(){var e;const t=new d.default(c.CssClasses.LOGIN,c.CssClasses.EMAIL_INPUT,c.TEXT.EMAIL_INPUT,c.INITIAL_VALUE.INPUT_VALUE.EMAIL,c.TYPE.INPUT_TYPE.EMAIL,c.INITIAL_VALUE.PLACEHOLDER.EMAIL),n=t.getInputElement();this.emailInput=t,n.addEventListener("input",(()=>{this.inputValidation(t,(()=>E.Validator.emailField(n.value))),this.inputKeydownFn()})),null===(e=this.form)||void 0===e||e.addInnerElement(t.getElement())}addPasswordInput(){var e;const t=new d.default(c.CssClasses.LOGIN,c.CssClasses.PASSWORD_INPUT,c.TEXT.PASSWORD_INPUT,c.INITIAL_VALUE.INPUT_VALUE.PASSWORD,c.TYPE.INPUT_TYPE.PASSWORD,c.INITIAL_VALUE.PLACEHOLDER.PASSWORD);this.addShowHidePasswordIcon(t);const n=t.getInputElement();this.passwordInput=t,n.addEventListener("input",(()=>{this.inputValidation(t,(()=>E.Validator.passwordField(n.value))),this.inputKeydownFn()})),null===(e=this.form)||void 0===e||e.addInnerElement(t.getElement())}addShowHidePasswordIcon(e){const t=new l.ElementCreator("span",c.CssClasses.SHOW_HIDE_ICON,c.TEXT.SHOW_HIDE_ICON.VISIBLE);t.getElement().addEventListener("click",this.showHidePasswordFn.bind(this,t)),e.addInnerElement(t)}addLoginButton(){var e;const t=new l.ElementCreator("button",c.CssClasses.LOGIN_BUTTON,c.TEXT.BUTTON).getElement();t.setAttribute("type",c.TYPE.BUTTON_TYPE),t.addEventListener("click",(e=>this.loginButtonClickFn.call(this,e))),null===(e=this.form)||void 0===e||e.addInnerElement(t)}addRegistrationLink(){const e=new l.ElementCreator("a",c.CssClasses.REGISTRATION_LINK,c.TEXT.REGISTRATION_LINK).getElement();e.addEventListener("click",(e=>this.registrationLinkClickFn.call(this,e))),this.viewElementCreator.addInnerElement(e)}inputKeydownFn(){var e;null===(e=this.errorLine)||void 0===e||e.classList.remove(c.CssClasses.ERROR_LINE_SHOW)}inputValidation(e,t){const n=e.getInputElement(),s=e.getErrorLine(),i=t();return i?(n.classList.add(c.CssClasses.INPUT_INVALID),s.textContent=`${i}`,!1):(n.classList.remove(c.CssClasses.INPUT_INVALID),s.textContent=c.INITIAL_VALUE.ERROR_LINE,!0)}loginButtonClickFn(e){var t;return s(this,void 0,void 0,(function*(){if(!this.emailInput||!this.passwordInput)throw new Error;e.preventDefault();if(!this.isFormsValid.call(this,this.emailInput,this.passwordInput))return;const n=this.emailInput.getInputElement().value,s=this.passwordInput.getInputElement().value;(yield r.CustomerAPI.loginCustomer(n,s))===a.AuthStatusCodes.successfulPasswordTokenFetch?(this.state.setValue(c.KEY_FOR_SAVE.LOGIN_STATUS,"true"),this.observer.userIsLoggedIn(this.state),this.router.navigate(o.Pages.INDEX)):null===(t=this.errorLine)||void 0===t||t.classList.add(c.CssClasses.ERROR_LINE_SHOW)}))}isFormsValid(e,t){const n=this.inputValidation.call(this,e,(()=>E.Validator.emailField(e.getInputElement().value))),s=this.inputValidation.call(this,t,(()=>E.Validator.passwordField(t.getInputElement().value)));return!(!n||!s)}showHidePasswordFn(e){var t,n;const s=e.getElement();(null===(t=this.passwordInput)||void 0===t?void 0:t.getInputElement().getAttribute("type"))===c.TYPE.INPUT_TYPE.PASSWORD?(this.passwordInput.getInputElement().setAttribute("type",c.TYPE.INPUT_TYPE.TEXT),s.textContent=c.TEXT.SHOW_HIDE_ICON.VISIBLE_OFF):(null===(n=this.passwordInput)||void 0===n||n.getInputElement().setAttribute("type",c.TYPE.INPUT_TYPE.PASSWORD),s.textContent=c.TEXT.SHOW_HIDE_ICON.VISIBLE)}registrationLinkClickFn(e){e.preventDefault(),this.router.navigate(o.Pages.REGISTRATION)}}t.default=h},707:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});const s=n(644);class i extends s.View{constructor(){super("main","main")}}t.default=i},15:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});const s=n(644),i=n(111),r=n(413);class a extends s.View{constructor(e){super("section","not-found"),this.router=e,this.configView()}configView(){this.addImageBlock(),this.addTextBlock()}addImageBlock(){const e=new i.ElementCreator("div","not-found__image-block","");this.viewElementCreator.addInnerElement(e);const t=new i.ElementCreator("img","not-found__image-block-img","");t.getElement().setAttribute("src","./assets/images/error-404.png"),e.addInnerElement(t)}addTextBlock(){const e=new i.ElementCreator("div","not-found__text","");this.viewElementCreator.addInnerElement(e);const t=new i.ElementCreator("h1","not-found__text__head","Error 404");e.addInnerElement(t);const n=new i.ElementCreator("div","not-found__text-l","Page Not Found");e.addInnerElement(n);const s=new i.ElementCreator("div","not-found__text-m","We broke something!");e.addInnerElement(s);const r=new i.ElementCreator("div","not-found__text-s","Or you did...");e.addInnerElement(r);const a=new i.ElementCreator("a","not-found__text-link","Back to main").getElement();a.addEventListener("click",(e=>this.registrationLinkClickFn.call(this,e))),e.addInnerElement(a)}registrationLinkClickFn(e){e.preventDefault(),this.router.navigate(r.Pages.INDEX)}}t.default=a},392:function(e,t,n){var s=this&&this.__awaiter||function(e,t,n,s){return new(n||(n=Promise))((function(i,r){function a(e){try{l(s.next(e))}catch(e){r(e)}}function o(e){try{l(s.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}l((s=s.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const i=n(111),r=n(644),a=n(942),o="product",l="product__title",d="product__top",u=["product__slider","slider"],c="slider__nav",E="slider__item",h="slider__main-item",m="slider__image",I="product__buy";class _ extends r.View{constructor(e,t){super("section",o),this.sliderMainItem=new i.ElementCreator("div",h,""),this.configView(e,t)}configView(e,t){return s(this,void 0,void 0,(function*(){console.log(t);const n=yield this.getData(e);this.createTitle(n.name),this.createTop(n.imageArr)}))}createTitle(e){const t=new i.ElementCreator("h1",l,e);this.viewElementCreator.addInnerElement(t)}createTop(e){const t=new i.ElementCreator("div",d,""),n=this.createSlider(e);t.addInnerElement(n);const s=this.createBuy();t.addInnerElement(s),this.viewElementCreator.addInnerElement(t)}createSlider(e){const t=new i.ElementCreator("div",u,""),n=new i.ElementCreator("div",c,"");t.addInnerElement(n),e.forEach((e=>{const t=this.createImage(e.url);n.addInnerElement(t)}));const s=this.sliderMainItem,r=e[0].url;return this.setSliderMainItem(r),t.addInnerElement(s),t}createBuy(){return new i.ElementCreator("div",I,"")}setSliderMainItem(e){const t=new i.ElementCreator("img",m,"");t.getElement().setAttribute("src",e),this.sliderMainItem.getElement().innerHTML="",this.sliderMainItem.addInnerElement(t)}createImage(e){const t=new i.ElementCreator("div",E,""),n=new i.ElementCreator("img",m,"");return n.getElement().setAttribute("src",e),t.addInnerElement(n),t.getElement()}getData(e){var t,n,i,r,o,l;return s(this,void 0,void 0,(function*(){const s=yield a.ProductAPI.getProduct(e),d=s.masterData.current.name.en,u=s.masterData.current.description.en,c=s.masterData.current.masterVariant.prices[0].value.centAmount/100,E=null===(l=null===(o=null===(r=null===(i=null===(n=null===(t=s.masterData)||void 0===t?void 0:t.current)||void 0===n?void 0:n.masterVariant)||void 0===i?void 0:i.prices[0])||void 0===r?void 0:r.discounted)||void 0===o?void 0:o.value)||void 0===l?void 0:l.centAmount;let h;E&&(h=E/100);return{name:d,descriptions:u,price:c,discount:h,imageArr:s.masterData.current.masterVariant.images,atributesArr:s.masterData.current.masterVariant.attributes}}))}}t.default=_},627:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.KEY_FOR_SAVE=t.INITIAL_VALUE=t.TYPE=t.SIGN_UP_TEXT=t.SIGN_UP_CLASSES=void 0,t.SIGN_UP_CLASSES={REGISTRATION:"registration",TITLE:"registration__title",EMAIL:"email",PASSWORD:"password",CONFIRM_PASSWORD:"confirm-password",FIRST_NAME:"first-name",LAST_NAME:"last-name",DATE_OF_BIRTH:"date-of-birth",CITY:"city",STREET:"street",POSTAL_CODE:"postal-code",COUNTRY:"country",ERROR_LINE:"error",REGISTER_BTN:"primary-button",LOGIN_BTN:"login__registration-link",SHOW_HIDE_ICON:["material-symbols-outlined","registration__show-hide-icon"],SET_DEFAULT_ADDRESS:"set-default",INPUT_INVALID:"invalid",ERROR_LINE_SHOW:"show"},t.SIGN_UP_TEXT={EMAIL:"Email",PASSWORD:"Password",CONFIRM_PASSWORD:"Confirm Password",FIRST_NAME:"First Name",LAST_NAME:"Last Name",DATE_OF_BIRTH:"Date of Birth",CITY:"City",STREET:"Street",POSTAL_CODE:"Postal Code",COUNTRY:"Country",TITLE:"Sign Up",REGISTER_BTN:"Create Account",LOGIN_BTN:"Login",ERROR_LINE:"",SET_DEFAULT_ADDRESS:"Set Default Address",SHOW_HIDE_ICON:{VISIBLE:"visibility",VISIBLE_OFF:"visibility_off"}},t.TYPE={INPUT_TYPE:{EMAIL:"email",PASSWORD:"password",TEXT:"text"},BUTTON_TYPE:"submit"},t.INITIAL_VALUE={INPUT_VALUE:{EMAIL:"",PASSWORD:""},PLACEHOLDER:{EMAIL:"",PASSWORD:""},ERROR_LINE:""},t.KEY_FOR_SAVE={LOGIN_STATUS:"login-status"}},156:function(e,t,n){var s=this&&this.__awaiter||function(e,t,n,s){return new(n||(n=Promise))((function(i,r){function a(e){try{l(s.next(e))}catch(e){r(e)}}function o(e){try{l(s.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}l((s=s.apply(e,t||[])).next())}))},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=n(155),a=n(413),o=n(111),l=i(n(507)),d=n(442),u=n(644),c=n(627);class E extends u.View{constructor(e,t,n){super("section",c.SIGN_UP_CLASSES.REGISTRATION),this.router=e,this.observer=t,this.state=n,this.form=null,this.btnsWrapper=null,this.firstNameInput=null,this.lastNameInput=null,this.dateOfBirthInput=null,this.emailInput=null,this.passwordInput=null,this.confirmPasswordInput=null,this.shippingAddressFieldSet=null,this.billingAddressFieldSet=null,this.cityShippingAddressInput=null,this.streetShippingAddressInput=null,this.postalCodeShippingAddressInput=null,this.countryShippingAddressInput=null,this.defaultShippingAddressInput=null,this.cityBillingAddressInput=null,this.streetBillingAddressInput=null,this.postalCodeBillingAddressInput=null,this.countryBillingAddressInput=null,this.defaultBillingAddressInput=null,this.errorLine=null,this.configView()}configView(){this.addTitle(),this.addForm(),this.configForm()}addTitle(){const e=new o.ElementCreator("h1",c.SIGN_UP_CLASSES.TITLE,c.SIGN_UP_TEXT.TITLE);this.viewElementCreator.addInnerElement(e)}addForm(){var e;this.form=new o.ElementCreator("form","registration__form"),null===(e=this.form)||void 0===e||e.getElement().addEventListener("submit",(e=>this.handleSubmit(e))),this.viewElementCreator.addInnerElement(this.form.getElement())}configForm(){this.addFirstNameInput(),this.addLastNameInput(),this.addDateOfBirthInput(),this.addEmailInput(),this.addPasswordInput(),this.addConfirmPasswordInput(),this.addShippingFieldSet(),this.addAddressInput(this.shippingAddressFieldSet,"shipping"),this.addCopyButton(),this.addBillingFieldSet(),this.addAddressInput(this.billingAddressFieldSet,"billing"),this.addErrorLine(),this.addControlButtons()}addFirstNameInput(){var e;const t=new l.default(c.SIGN_UP_CLASSES.REGISTRATION,c.SIGN_UP_CLASSES.FIRST_NAME,c.SIGN_UP_TEXT.FIRST_NAME,"","text",""),n=t.getInputElement();t.getInputElement().setAttribute("required",""),this.firstNameInput=n,n.addEventListener("input",(()=>{this.inputValidation(t,(()=>d.Validator.nameField(n.value))),this.inputKeydownFn()})),null===(e=this.form)||void 0===e||e.addInnerElement(t.getElement())}addLastNameInput(){var e;const t=new l.default(c.SIGN_UP_CLASSES.REGISTRATION,c.SIGN_UP_CLASSES.LAST_NAME,c.SIGN_UP_TEXT.LAST_NAME,"","text",""),n=t.getInputElement();t.getInputElement().setAttribute("required",""),this.lastNameInput=n,n.addEventListener("input",(()=>{this.inputValidation(t,(()=>d.Validator.nameField(n.value))),this.inputKeydownFn()})),null===(e=this.form)||void 0===e||e.addInnerElement(t.getElement())}addDateOfBirthInput(){var e;const t=new l.default(c.SIGN_UP_CLASSES.REGISTRATION,c.SIGN_UP_CLASSES.DATE_OF_BIRTH,c.SIGN_UP_TEXT.DATE_OF_BIRTH,"","date",""),n=t.getInputElement();t.getInputElement().setAttribute("required",""),this.dateOfBirthInput=n,n.addEventListener("input",(()=>{this.inputValidation(t,(()=>d.Validator.birthField(n.value))),this.inputKeydownFn()})),null===(e=this.form)||void 0===e||e.addInnerElement(t.getElement())}addEmailInput(){var e;const t=new l.default(c.SIGN_UP_CLASSES.REGISTRATION,c.SIGN_UP_CLASSES.EMAIL,c.SIGN_UP_TEXT.EMAIL,"","email",""),n=t.getInputElement();t.getInputElement().setAttribute("required",""),this.emailInput=n,n.addEventListener("input",(()=>{this.inputValidation(t,(()=>d.Validator.emailField(n.value))),this.inputKeydownFn()})),null===(e=this.form)||void 0===e||e.addInnerElement(t.getElement())}addPasswordInput(){var e;const t=new l.default(c.SIGN_UP_CLASSES.REGISTRATION,c.SIGN_UP_CLASSES.PASSWORD,c.SIGN_UP_TEXT.PASSWORD,"","password",""),n=t.getInputElement();t.getInputElement().setAttribute("required",""),this.passwordInput=n,this.addShowHidePasswordIcon(this.passwordInput,t),n.addEventListener("input",(()=>{this.inputValidation(t,(()=>d.Validator.passwordField(n.value))),this.inputKeydownFn()})),null===(e=this.form)||void 0===e||e.addInnerElement(t.getElement())}addConfirmPasswordInput(){var e;const t=new l.default(c.SIGN_UP_CLASSES.REGISTRATION,c.SIGN_UP_CLASSES.CONFIRM_PASSWORD,c.SIGN_UP_TEXT.CONFIRM_PASSWORD,"","password",""),n=t.getInputElement();t.getInputElement().setAttribute("required",""),this.confirmPasswordInput=n,this.addShowHidePasswordIcon(this.confirmPasswordInput,t),n.addEventListener("input",(()=>{var e;const s=null===(e=this.passwordInput)||void 0===e?void 0:e.value;void 0!==s&&(this.inputValidation(t,(()=>d.Validator.confirmPasswordField(n.value,s))),this.inputKeydownFn())})),null===(e=this.form)||void 0===e||e.addInnerElement(t.getElement())}addShowHidePasswordIcon(e,t){const n=new o.ElementCreator("span",c.SIGN_UP_CLASSES.SHOW_HIDE_ICON,c.SIGN_UP_TEXT.SHOW_HIDE_ICON.VISIBLE);n.getElement().addEventListener("click",this.showHidePasswordFn.bind(this,e,n)),t.addInnerElement(n)}addAddressInput(e,t){e&&(this.addCityAddressInput(e,t),this.addStreetAddressInput(e,t),this.addPostalCodeAddressInput(e,t),this.addCountryAddressInput(e,t),this.addDefaultCheckbox(e,t))}addShippingFieldSet(){var e;const t=new o.ElementCreator("fieldset","fieldset");this.shippingAddressFieldSet=t;const n=new o.ElementCreator("legend","legend");n.getElement().textContent="Shipping Address",t.addInnerElement(n),null===(e=this.form)||void 0===e||e.addInnerElement(t)}addBillingFieldSet(){var e;const t=new o.ElementCreator("fieldset","fieldset");this.billingAddressFieldSet=t;const n=new o.ElementCreator("legend","legend");n.getElement().textContent="Billing Address",t.addInnerElement(n),null===(e=this.form)||void 0===e||e.addInnerElement(t)}addCityAddressInput(e,t){const n=new l.default(c.SIGN_UP_CLASSES.REGISTRATION,c.SIGN_UP_CLASSES.CITY,c.SIGN_UP_TEXT.CITY,"","text",""),s=n.getInputElement();"shipping"===t?this.cityShippingAddressInput=s:"billing"===t&&(this.cityBillingAddressInput=s),s.addEventListener("input",(()=>{this.inputValidation(n,(()=>d.Validator.cityField(s.value))),this.inputKeydownFn()})),null==e||e.addInnerElement(n.getElement())}addStreetAddressInput(e,t){const n=new l.default(c.SIGN_UP_CLASSES.REGISTRATION,c.SIGN_UP_CLASSES.STREET,c.SIGN_UP_TEXT.STREET,"","text",""),s=n.getInputElement();"shipping"===t?this.streetShippingAddressInput=s:"billing"===t&&(this.streetBillingAddressInput=s),s.addEventListener("input",(()=>{this.inputValidation(n,(()=>d.Validator.streetField(s.value))),this.inputKeydownFn()})),null==e||e.addInnerElement(n.getElement())}addPostalCodeAddressInput(e,t){const n=new l.default(c.SIGN_UP_CLASSES.REGISTRATION,c.SIGN_UP_CLASSES.POSTAL_CODE,c.SIGN_UP_TEXT.POSTAL_CODE,"","text",""),s=n.getInputElement();"shipping"===t?this.postalCodeShippingAddressInput=s:"billing"===t&&(this.postalCodeBillingAddressInput=s),s.addEventListener("input",(()=>{let e="";this.inputValidation(n,(()=>{var n,i,r,a;return"shipping"===t?e=null!==(i=null===(n=this.countryShippingAddressInput)||void 0===n?void 0:n.value)&&void 0!==i?i:"":"billing"===t&&(e=null!==(a=null===(r=this.countryBillingAddressInput)||void 0===r?void 0:r.value)&&void 0!==a?a:""),d.Validator.postalCodeField(s.value,e)})),this.inputKeydownFn()})),null==e||e.addInnerElement(n.getElement())}addCountryAddressInput(e,t){const n=["USA","Russia"],s=["US","RU"],i=new o.ElementCreator("div",["registration__country-input-wrapper","primary-wrapper"]),r=new o.ElementCreator("label",["registration__country-label","primary-label"]);r.getElement().textContent="Country";const a=new o.ElementCreator("select",["registration__country-input","primary-input"]);for(let e=0;e<n.length;e+=1){const t=document.createElement("option");t.setAttribute("value",s[e]),t.textContent=n[e],a.getElement().appendChild(t)}i.addInnerElement(r.getElement()),r.addInnerElement(a.getElement());const l=a.getElement();"shipping"===t?this.countryShippingAddressInput=l:"billing"===t&&(this.countryBillingAddressInput=l),null==e||e.addInnerElement(i.getElement())}addDefaultCheckbox(e,t){var n;const s=new l.default(c.SIGN_UP_CLASSES.REGISTRATION,c.SIGN_UP_CLASSES.SET_DEFAULT_ADDRESS,c.SIGN_UP_TEXT.SET_DEFAULT_ADDRESS,"","checkbox",""),i=s.getInputElement();"shipping"===t?this.defaultShippingAddressInput=i:"billing"===t&&(this.defaultBillingAddressInput=i),null==e||e.addInnerElement(s.getElement());(null===(n=s.getElement().firstChild)||void 0===n?void 0:n.firstChild).classList.remove("primary-input")}addErrorLine(){var e;const t=new o.ElementCreator("div",c.SIGN_UP_CLASSES.ERROR_LINE,c.SIGN_UP_TEXT.ERROR_LINE).getElement();this.errorLine=t,null===(e=this.form)||void 0===e||e.addInnerElement(t)}addControlButtons(){var e,t,n;this.btnsWrapper=new o.ElementCreator("div","form-buttons"),null===(e=this.btnsWrapper)||void 0===e||e.addInnerElement(this.addRegisterButton()),null===(t=this.btnsWrapper)||void 0===t||t.addInnerElement(this.addLoginButton()),null===(n=this.form)||void 0===n||n.addInnerElement(this.btnsWrapper.getElement())}addRegisterButton(){const e=new o.ElementCreator("button",c.SIGN_UP_CLASSES.REGISTER_BTN,c.SIGN_UP_TEXT.REGISTER_BTN);return e.getElement().setAttribute("type","submit"),e}addLoginButton(){const e=new o.ElementCreator("a",c.SIGN_UP_CLASSES.LOGIN_BTN,c.SIGN_UP_TEXT.LOGIN_BTN);return e.getElement().addEventListener("click",(()=>this.router.navigate(a.Pages.LOGIN))),e}addCopyButton(){var e;const t=new o.ElementCreator("button","primary-button","Set as Billing Address");t.getElement().setAttribute("type","button"),t.getElement().addEventListener("click",this.copyShippingAddressToBillingAddress.bind(this)),null===(e=this.form)||void 0===e||e.addInnerElement(t)}handleSubmit(e){var t,n;return s(this,void 0,void 0,(function*(){e.preventDefault();const s=this.getFormData(),i=document.querySelectorAll(".primary-error-line");let o=!0;if(i.forEach((e=>{var t;return""!==(null===(t=e.textContent)||void 0===t?void 0:t.trim())?(o=!1,""):""})),this.errorLine)if(o&&""!==(null===(t=this.emailInput)||void 0===t?void 0:t.value))try{const e=yield r.CustomerAPI.registerCustomer(s);201===e?(this.state.setValue(c.KEY_FOR_SAVE.LOGIN_STATUS,"true"),this.observer.userIsLoggedIn(this.state),this.router.navigate(a.Pages.INDEX),yield r.CustomerAPI.getCustomerInfo(),this.createPopupWithText("Registration successful, automatically logged in!")):this.errorLine.textContent=400===e?"The user with that email already exists!":"Something went wrong!"}catch(e){this.errorLine.textContent=`${e}`}else this.errorLine.textContent="Fix all errors",null===(n=this.errorLine)||void 0===n||n.classList.add(c.SIGN_UP_CLASSES.ERROR_LINE_SHOW)}))}copyShippingAddressToBillingAddress(){var e,t,n,s;const i=null===(e=this.cityShippingAddressInput)||void 0===e?void 0:e.value,r=null===(t=this.streetShippingAddressInput)||void 0===t?void 0:t.value,a=null===(n=this.postalCodeShippingAddressInput)||void 0===n?void 0:n.value,o=null===(s=this.countryShippingAddressInput)||void 0===s?void 0:s.value;void 0!==i&&null!==this.cityBillingAddressInput&&(this.cityBillingAddressInput.value=i,this.cityBillingAddressInput.focus(),this.cityBillingAddressInput.blur()),void 0!==r&&null!==this.streetBillingAddressInput&&(this.streetBillingAddressInput.value=r,this.streetBillingAddressInput.focus(),this.streetBillingAddressInput.blur()),void 0!==a&&null!==this.postalCodeBillingAddressInput&&(this.postalCodeBillingAddressInput.value=a,this.postalCodeBillingAddressInput.focus(),this.postalCodeBillingAddressInput.blur()),void 0!==o&&null!==this.countryBillingAddressInput&&(this.countryBillingAddressInput.value=o)}showHidePasswordFn(e,t){const n=t.getElement();e.getAttribute("type")===c.TYPE.INPUT_TYPE.PASSWORD?(e.setAttribute("type",c.TYPE.INPUT_TYPE.TEXT),n.textContent=c.SIGN_UP_TEXT.SHOW_HIDE_ICON.VISIBLE_OFF):(e.setAttribute("type",c.TYPE.INPUT_TYPE.PASSWORD),n.textContent=c.SIGN_UP_TEXT.SHOW_HIDE_ICON.VISIBLE)}getAddressFormData(e){var t,n,s,i;let r,a,o,l;return"Shipping"===e?(r=this.cityShippingAddressInput,a=this.streetShippingAddressInput,o=this.postalCodeShippingAddressInput,l=this.countryShippingAddressInput):"Billing"===e&&(r=this.cityBillingAddressInput,a=this.streetBillingAddressInput,o=this.postalCodeBillingAddressInput,l=this.countryBillingAddressInput),{country:null!==(t=null==l?void 0:l.value)&&void 0!==t?t:"",streetName:null!==(n=null==a?void 0:a.value)&&void 0!==n?n:"",postalCode:null!==(s=null==o?void 0:o.value)&&void 0!==s?s:"",city:null!==(i=null==r?void 0:r.value)&&void 0!==i?i:""}}getShippingAddressFormData(){return this.getAddressFormData("Shipping")}getBillingAddressFormData(){return this.getAddressFormData("Billing")}getFormData(){var e,t,n,s,i,r,a,o,l,d,u,c;const E={email:null!==(t=null===(e=this.emailInput)||void 0===e?void 0:e.value)&&void 0!==t?t:"",password:null!==(s=null===(n=this.passwordInput)||void 0===n?void 0:n.value)&&void 0!==s?s:"",firstName:null!==(r=null===(i=this.firstNameInput)||void 0===i?void 0:i.value)&&void 0!==r?r:"",lastName:null!==(o=null===(a=this.lastNameInput)||void 0===a?void 0:a.value)&&void 0!==o?o:"",dateOfBirth:null!==(d=null===(l=this.dateOfBirthInput)||void 0===l?void 0:l.value)&&void 0!==d?d:"",addresses:[this.getShippingAddressFormData(),this.getBillingAddressFormData()]};return(null===(u=this.defaultShippingAddressInput)||void 0===u?void 0:u.checked)&&(E.defaultShippingAddress=0),(null===(c=this.defaultBillingAddressInput)||void 0===c?void 0:c.checked)&&(E.defaultBillingAddress=1),E}inputValidation(e,t){const n=e.getInputElement(),s=e.getErrorLine(),i=t();return i?(n.classList.add(c.SIGN_UP_CLASSES.INPUT_INVALID),s.textContent=`${i}`,!1):(n.classList.remove(c.SIGN_UP_CLASSES.INPUT_INVALID),s.textContent=c.INITIAL_VALUE.ERROR_LINE,!0)}inputKeydownFn(){var e;null===(e=this.errorLine)||void 0===e||e.classList.remove(c.SIGN_UP_CLASSES.ERROR_LINE_SHOW)}createPopupWithText(e){const t=new o.ElementCreator("div","popup",e),n=new o.ElementCreator("button","primary-button","Close");n.getElement().addEventListener("click",(()=>{document.body.removeChild(t.getElement())})),t.addInnerElement(n),document.body.appendChild(t.getElement()),setTimeout((()=>{document.body.removeChild(t.getElement())}),2e3)}}t.default=E},844:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});const s=n(644);class i extends s.View{constructor(){super("section","user-profile"),this.configView()}configView(){console.log("user-profile")}}t.default=i},644:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.View=void 0;const s=n(111);t.View=class{constructor(e,t,n){this.viewElementCreator=this.createView(e,t,n)}createView(e,t,n){return new s.ElementCreator(e,t,n)}getHTMLElement(){return this.viewElementCreator.getElement()}setContent(e){const t=this.viewElementCreator.getElement(),n=e.getHTMLElement();this.removeContent(t),this.viewElementCreator.addInnerElement(n)}removeContent(e){for(;e.firstChild;)e.firstChild.remove()}}},83:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});const s=n(644),i=["wrapper"];class r extends s.View{constructor(){super("div",i)}}t.default=r},303:function(e,t,n){var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),n(183);new(s(n(477)).default);alert("  ")}},t={};function n(s){var i=t[s];if(void 0!==i)return i.exports;var r=t[s]={exports:{}};return e[s].call(r.exports,r,r.exports,n),r.exports}n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};n(303)}();