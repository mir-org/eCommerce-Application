!function(){"use strict";var e={183:function(e,t,n){n.r(t)},477:function(e,t,n){var s=this&&this.__createBinding||(Object.create?function(e,t,n,s){void 0===s&&(s=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,s,i)}:function(e,t,n,s){void 0===s&&(s=n),e[s]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&s(t,e,n);return i(t,e),t},o=this&&this.__awaiter||function(e,t,n,s){return new(n||(n=Promise))((function(i,a){function o(e){try{r(s.next(e))}catch(e){a(e)}}function l(e){try{r(s.throw(e))}catch(e){a(e)}}function r(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,l)}r((s=s.apply(e,t||[])).next())}))},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=n(903),c=l(n(754)),u=l(n(271)),d=l(n(707)),h=l(n(83)),f=n(413),m=l(n(22));t.default=class{constructor(){this.header=null,this.main=null;const e=new m.default,t=this.createRoutes(e);this.router=new r.Router(t),this.createView()}createView(){const e=new h.default;this.header=new u.default(this.router),this.main=new d.default;const t=new c.default;e.getHTMLElement().append(this.header.getHTMLElement(),this.main.getHTMLElement(),t.getHTMLElement()),document.body.append(e.getHTMLElement())}createRoutes(e){return[{path:"",callback:()=>o(this,void 0,void 0,(function*(){const{default:e}=yield Promise.resolve().then((()=>a(n(578))));this.setContent(f.Pages.INDEX,new e)}))},{path:`${f.Pages.INDEX}`,callback:()=>o(this,void 0,void 0,(function*(){const{default:e}=yield Promise.resolve().then((()=>a(n(578))));this.setContent(f.Pages.INDEX,new e)}))},{path:`${f.Pages.LOGIN}`,callback:()=>o(this,void 0,void 0,(function*(){const{default:t}=yield Promise.resolve().then((()=>a(n(291))));this.setContent(f.Pages.LOGIN,new t(e))}))},{path:`${f.Pages.REGISTRATION}`,callback:()=>o(this,void 0,void 0,(function*(){const{default:t}=yield Promise.resolve().then((()=>a(n(156))));this.setContent(f.Pages.REGISTRATION,new t(e))}))},{path:`${f.Pages.NOT_FOUND}`,callback:()=>o(this,void 0,void 0,(function*(){const{default:e}=yield Promise.resolve().then((()=>a(n(15))));this.setContent(f.Pages.NOT_FOUND,new e)}))}]}setContent(e,t){var n,s;null===(n=this.header)||void 0===n||n.setSelectedItem(e),null===(s=this.main)||void 0===s||s.setContent(t)}}},413:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.Pages=void 0;t.Pages={INDEX:"main",LOGIN:"login",REGISTRATION:"registration",NOT_FOUND:"not-found"}},903:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Router=void 0;const s=n(413);t.Router=class{constructor(e){this.routes=e,document.addEventListener("DOMContentLoaded",(()=>{const e=this.getCurrentPath();this.navigate(e)})),window.addEventListener("popstate",this.browserChangeHandler.bind(this)),window.addEventListener("hashchange",this.browserChangeHandler.bind(this))}navigate(e){const t=this.parseUrl(e),n=""===t.resource?t.path:`${t.path}/${t.resource}`,s=this.routes.find((e=>e.path===n));console.log("путь",typeof(null==s?void 0:s.path),null==s?void 0:s.path),s?(s.callback(),window.history.pushState(null,"",n)):this.redirectToNotFound()}parseUrl(e){const t=e.split("/"),n={path:"",resource:""};return[n.path="",n.resource=""]=t,n}redirectToNotFound(){const e=this.routes.find((e=>e.path===s.Pages.NOT_FOUND));e&&this.navigate(e.path)}browserChangeHandler(){const e=this.getCurrentPath();this.navigate(e)}getCurrentPath(){let e;return void 0===window.location.hash.slice(1)||void 0===window.location.pathname.slice(1)?(e="",console.log("сработал undefined",""),""):window.location.hash?window.location.hash.slice(1):window.location.pathname.slice(1)}}},22:function(e,t){Object.defineProperty(t,"__esModule",{value:!0});const n="spaApp";t.default=class{constructor(){this.fields=this.loadState(),window.addEventListener("beforeunload",this.saveState.bind(this))}setValue(e,t){this.fields.set(e,t)}getValue(e){const t=this.fields.get(e);return t||""}saveState(){const e=Object.fromEntries(this.fields.entries());localStorage.setItem(n,JSON.stringify(e))}loadState(){const e=localStorage.getItem(n);if(e){const t=JSON.parse(e);return new Map(Object.entries(t))}return new Map}}},111:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.ElementCreator=void 0;class n{constructor(e,t,n){this.element=document.createElement(e),this.setElement(t,n)}setElement(e,t){this.setCssClasses(e),t&&this.setTextContent(t)}getElement(){return this.element}setCssClasses(e){Array.isArray(e)?this.element.classList.add(...e):this.element.classList.add(e)}setTextContent(e){this.element.textContent=e}addInnerElement(e){e instanceof n?this.element.append(e.getElement()):this.element.append(e)}}t.ElementCreator=n},507:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});const s=n(111);t.default=class{constructor(e,t,n,s,i,a="text"){this.element=document.createElement("div"),this.inputElement=document.createElement("input"),this.labelElement=document.createElement("label"),this.setElement(e,t,n,a),this.setCallback(i),this.setValue(s)}setElement(e,t,n,s){this.setLabelTextContent(n),this.setCssClasses(e,t),this.labelElement.prepend(this.inputElement),this.element.append(this.labelElement),this.setType(s)}getElement(){return this.element}setValue(e){this.inputElement.value=e}setCssClasses(e,t){this.element.classList.add(`${e}__${t}-input-wrapper`),this.inputElement.classList.add(`${e}__${t}-input`),this.labelElement.classList.add(`${e}__${t}-label`)}setLabelTextContent(e){this.labelElement&&(this.labelElement.textContent=e)}setCallback(e){this.inputElement.addEventListener("keyup",(t=>e(t)))}setType(e){this.inputElement.setAttribute("type",e)}addInnerElement(e){e instanceof s.ElementCreator?this.element.append(e.getElement()):this.element.append(e)}}},754:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});const s=n(644);class i extends s.View{constructor(){super("footer","footer","SPA")}}t.default=i},271:function(e,t,n){var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=n(111),a=n(644),o=s(n(563)),l=n(413),r="header",c="header__nav",u={INDEX:"Main",LOGIN:"Login",REGISTRATION:"Registration"};class d extends a.View{constructor(e){super("header",r),this.headerLinkElements=new Map,this.configView(e)}configView(e){const t=new i.ElementCreator("nav",c);Object.keys(u).forEach((n=>{const s={name:u[n],callback:()=>e.navigate(l.Pages[n])},i=new o.default(s.name,s.callback,this.headerLinkElements);t.addInnerElement(i.getHTMLElement()),this.headerLinkElements.set(l.Pages[n].toUpperCase(),i)})),this.viewElementCreator.addInnerElement(t)}setSelectedItem(e){const t=this.headerLinkElements.get(e.toUpperCase());t instanceof o.default&&t.setSelectedStatus()}}t.default=d},563:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});const s=n(644),i="nav-item",a="nav-item__selected";class o extends s.View{constructor(e,t,n){super("a",i,e),this.linkElements=n,this.pageCallback=t,this.configView()}setSelectedStatus(){this.linkElements.forEach((e=>e.setNotSelectedStatus()));this.viewElementCreator.getElement().classList.add(a)}setNotSelectedStatus(){this.viewElementCreator.getElement().classList.remove(a)}configView(){this.viewElementCreator.getElement().addEventListener("click",(()=>{this.setSelectedStatus.bind(this),this.pageCallback()}))}}t.default=o},578:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});const s=n(111),i=n(644),a="index",o="index__title",l="ЭТО ГЛАВНАЯ СТРАНИЦА";class r extends i.View{constructor(){super("section",a),this.configView()}configView(){const e=new s.ElementCreator("h1",o,l);this.viewElementCreator.addInnerElement(e)}}t.default=r},291:function(e,t,n){var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=n(111),a=s(n(507)),o=n(644),l="login",r="login__title",c="email",u="password",d="Ваш мейл",h="Ваш пароль",f="ЭТО СТРАНИЦА АВТОРИЗАЦИИ",m="login__email-input",p="login__password-input";class v extends o.View{constructor(e){super("section",l),this.state=e,this.configView()}configView(){const e=new i.ElementCreator("h1",r,f);this.viewElementCreator.addInnerElement(e);const t=new a.default(l,c,d,this.state.getValue(m),(e=>this.keyupHandler(e,m)));this.viewElementCreator.addInnerElement(t.getElement());const n=new a.default(l,u,h,this.state.getValue(p),(e=>this.keyupHandler(e,p)));this.viewElementCreator.addInnerElement(n.getElement())}keyupHandler(e,t){e.target instanceof HTMLInputElement&&this.state.setValue(t,e.target.value)}}t.default=v},707:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});const s=n(644);class i extends s.View{constructor(){super("main","main")}}t.default=i},15:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});const s=n(644),i=n(111);class a extends s.View{constructor(){super("section","not-found"),this.configView()}configView(){const e=new i.ElementCreator("h1","title","НЕ НАЙДЕНА");this.viewElementCreator.addInnerElement(e)}}t.default=a},156:function(e,t,n){var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=n(111),a=s(n(507)),o=n(644),l="registration",r="registration__title",c="email",u="password",d="Ваш мейл",h="Ваш пароль",f="ЭТО СТРАНИЦА РЕГИСТРАЦИИ",m="registration__email-input",p="registration__password-input";class v extends o.View{constructor(e){super("section",l),this.state=e,this.configView()}configView(){const e=new i.ElementCreator("h1",r,f);this.viewElementCreator.addInnerElement(e);const t=new a.default(l,c,d,this.state.getValue(m),(e=>this.keyupHandler(e,m)));this.viewElementCreator.addInnerElement(t.getElement());const n=new a.default(l,u,h,this.state.getValue(p),(e=>this.keyupHandler(e,p)));this.viewElementCreator.addInnerElement(n.getElement())}keyupHandler(e,t){e.target instanceof HTMLInputElement&&this.state.setValue(t,e.target.value)}}t.default=v},644:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.View=void 0;const s=n(111);t.View=class{constructor(e,t,n){this.viewElementCreator=this.createView(e,t,n)}createView(e,t,n){return new s.ElementCreator(e,t,n)}getHTMLElement(){return this.viewElementCreator.getElement()}setContent(e){const t=this.viewElementCreator.getElement(),n=e.getHTMLElement();this.removeContent(t),this.viewElementCreator.addInnerElement(n)}removeContent(e){for(;e.firstChild;)e.firstChild.remove()}}},83:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});const s=n(644),i=["wrapper"];class a extends s.View{constructor(){super("div",i)}}t.default=a},303:function(e,t,n){var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),n(183);new(s(n(477)).default)}},t={};function n(s){var i=t[s];if(void 0!==i)return i.exports;var a=t[s]={exports:{}};return e[s].call(a.exports,a,a.exports,n),a.exports}n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};n(303)}();